(function(){var n={};if(n.dev=!1,n.tooltip=n.tooltip||{},n.utils=n.utils||{},n.models=n.models||{},n.charts={},n.logs={},n.dom={},typeof module!="undefined"&&typeof exports!="undefined"&&typeof d3=="undefined"&&(d3=require("d3")),n.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(n){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),u=this,t=function(){},i=function(){return u.apply(this instanceof t&&n?this:n,r.concat(Array.prototype.slice.call(arguments)))};return t.prototype=this.prototype,i.prototype=new t,i}),n.dev){n.dispatch.on("render_start",function(){n.logs.startTime=+new Date});n.dispatch.on("render_end",function(){n.logs.endTime=+new Date;n.logs.totalTime=n.logs.endTime-n.logs.startTime;n.log("total",n.logs.totalTime)})}n.log=function(){if(n.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(n.dev&&window.console&&typeof console.log=="function"&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]};n.deprecated=function(n,t){console&&console.warn&&console.warn("nvd3 warning: `"+n+"` has been deprecated. ",t||"")};n.render=function(t){t=t||1;n.render.active=!0;n.dispatch.render_start();var i=function(){for(var f,r,u=0;u<t&&(r=n.render.queue[u]);u++)f=r.generate(),typeof r.callback==typeof Function&&r.callback(f);n.render.queue.splice(0,u);n.render.queue.length?setTimeout(i):(n.dispatch.render_end(),n.render.active=!1)};setTimeout(i)};n.render.active=!1;n.render.queue=[];n.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]});n.render.queue.push(t);n.render.active||n.render()};typeof module!="undefined"&&typeof exports!="undefined"&&(module.exports=n);typeof window!="undefined"&&(window.nv=n);n.dom.write=function(n){return window.fastdom!==undefined?fastdom.mutate(n):n()};n.dom.read=function(n){return window.fastdom!==undefined?fastdom.measure(n):n()};n.interactiveGuideline=function(){"use strict";function t(l){l.each(function(l){function a(){var s=d3.mouse(this),n=s[0],e=s[1],h=!0,l=!1,a,o,y;if(c&&(n=d3.event.offsetX,e=d3.event.offsetY,d3.event.target.tagName!=="svg"&&(h=!1),d3.event.target.className.baseVal.match("nv-legend")&&(l=!0)),h&&(n-=u.left,e-=u.top),d3.event.type==="mouseout"||n<0||e<0||n>w||e>v||d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined||l){if(c&&d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined&&(d3.event.relatedTarget.className===undefined||d3.event.relatedTarget.className.match(f.nvPointerEventsClass)))return;r.elementMouseout({mouseX:n,mouseY:e});t.renderGuideLine(null);f.hidden(!0);return}if(f.hidden(!1),a=typeof i.rangeBands=="function",o=undefined,a)if(y=d3.bisect(i.range(),n)-1,i.range()[y]+i.rangeBand()>=n)o=i.domain()[d3.bisect(i.range(),n)-1];else{r.elementMouseout({mouseX:n,mouseY:e});t.renderGuideLine(null);f.hidden(!0);return}else o=i.invert(n);r.elementMousemove({mouseX:n,mouseY:e,pointXValue:o});d3.event.type==="dblclick"&&r.elementDblclick({mouseX:n,mouseY:e,pointXValue:o});d3.event.type==="click"&&r.elementClick({mouseX:n,mouseY:e,pointXValue:o});d3.event.type==="mousedown"&&r.elementMouseDown({mouseX:n,mouseY:e,pointXValue:o});d3.event.type==="mouseup"&&r.elementMouseUp({mouseX:n,mouseY:e,pointXValue:o})}var p=d3.select(this),w=o||960,v=s||400,y=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([l]),b=y.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");if(b.append("g").attr("class","nv-interactiveGuideLine"),e){e.on("touchmove",a).on("mousemove",a,!0).on("mouseout",a,!0).on("mousedown",a,!0).on("mouseup",a,!0).on("dblclick",a).on("click",a);t.guideLine=null;t.renderGuideLine=function(i){h&&(t.guideLine&&t.guideLine.attr("x1")===i||n.dom.write(function(){var t=y.select(".nv-interactiveGuideLine").selectAll("line").data(i!=null?[n.utils.NaNtoZero(i)]:[],String);t.enter().append("line").attr("class","nv-guideline").attr("x1",function(n){return n}).attr("x2",function(n){return n}).attr("y1",v).attr("y2",0);t.exit().remove()}))}}})}var u={left:0,top:0},o=null,s=null,i=d3.scale.linear(),r=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),h=!0,e=null,f=n.models.tooltip(),c=window.ActiveXObject;return f.duration(0).hideDelay(0).hidden(!1),t.dispatch=r,t.tooltip=f,t.margin=function(n){return arguments.length?(u.top=typeof n.top!="undefined"?n.top:u.top,u.left=typeof n.left!="undefined"?n.left:u.left,t):u},t.width=function(n){return arguments.length?(o=n,t):o},t.height=function(n){return arguments.length?(s=n,t):s},t.xScale=function(n){return arguments.length?(i=n,t):i},t.showGuideLine=function(n){return arguments.length?(h=n,t):h},t.svgContainer=function(n){return arguments.length?(e=n,t):e},t};n.interactiveBisect=function(n,t,i){"use strict";var u,e,o;if(!(n instanceof Array))return null;u=typeof i!="function"?function(n){return n.x}:i;var s=function(n,t){return u(n)-t},h=d3.bisector(s).left,r=d3.max([0,h(n,t)-1]),f=u(n[r]);return(typeof f=="undefined"&&(f=r),f===t)?r:(e=d3.min([r+1,n.length-1]),o=u(n[e]),typeof o=="undefined"&&(o=e),Math.abs(o-t)>=Math.abs(f-t)?r:e)};n.nearestValueIndex=function(n,t,i){"use strict";var r=Infinity,u=null;return n.forEach(function(n,f){var e=Math.abs(t-n);n!=null&&e<=r&&e<i&&(r=e,u=f)}),u};n.models.tooltip=function(){"use strict";function rt(){if(!t||!t.node())t=d3.select(document.body).select("#"+s).data([1]),t.enter().append("div").attr("class","nvtooltip "+(f?f:"xy-tooltip")).attr("id",s).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(y,!0).classed(y,!0),t.exit().remove()}function r(){if(l)return nt(u)?(n.dom.write(function(){rt();var n=k(u);n&&(t.node().innerHTML=n);it()}),r):void 0}var s="nvtooltip-"+Math.floor(Math.random()*1e5),u=null,h="w",i=25,g=0,f=null,e=!0,c=200,t=null,o={left:null,top:null},l=!0,a=100,v=!0,y="nv-pointer-events-none",p=function(n){return n},w=function(n){return n},b=function(n){return n},k=function(n){var i,u,f,t,r;return n===null?"":(i=d3.select(document.createElement("table")),v&&(u=i.selectAll("thead").data([n]).enter().append("thead"),u.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(w(n.value))),f=i.selectAll("tbody").data([n]).enter().append("tbody"),t=f.selectAll("tr").data(function(n){return n.series}).enter().append("tr").classed("highlight",function(n){return n.highlight}),t.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(n){return n.color}),t.append("td").classed("key",!0).classed("total",function(n){return!!n.total}).html(function(n,t){return b(n.key,t)}),t.append("td").classed("value",!0).html(function(n,t){return p(n.value,t)}),t.filter(function(n){return n.percent!==undefined}).append("td").classed("percent",!0).html(function(n){return"("+d3.format("%")(n.percent)+")"}),t.selectAll("td").each(function(n){if(n.highlight){var t=d3.scale.linear().domain([0,1]).range(["#fff",n.color]),i=.6;d3.select(this).style("border-bottom-color",t(i)).style("border-top-color",t(i))}}),r=i.node().outerHTML,n.footer!==undefined&&(r+="<div class='footer'>"+n.footer+"<\/div>"),r)},d=function(){var n={left:d3.event!==null?d3.event.clientX:0,top:d3.event!==null?d3.event.clientY:0},t;return getComputedStyle(document.body).transform!="none"&&(t=document.body.getBoundingClientRect(),n.left-=t.left,n.top-=t.top),n},nt=function(t){if(t&&t.series){if(n.utils.isArray(t.series))return!0;if(n.utils.isObject(t.series))return t.series=[t.series],!0}return!1},tt=function(n){var e=t.node().offsetHeight,o=t.node().offsetWidth,s=document.documentElement.clientWidth,c=document.documentElement.clientHeight,r,u,f;switch(h){case"e":r=-o-i;u=-(e/2);n.left+r<0&&(r=i);(f=n.top+u)<0&&(u-=f);(f=n.top+u+e)>c&&(u-=f-c);break;case"w":r=i;u=-(e/2);n.left+r+o>s&&(r=-o-i);(f=n.top+u)<0&&(u-=f);(f=n.top+u+e)>c&&(u-=f-c);break;case"n":r=-(o/2)-5;u=i;n.top+u+e>c&&(u=-e-i);(f=n.left+r)<0&&(r-=f);(f=n.left+r+o)>s&&(r-=f-s);break;case"s":r=-(o/2);u=-e-i;n.top+u<0&&(u=i);(f=n.left+r)<0&&(r-=f);(f=n.left+r+o)>s&&(r-=f-s);break;case"center":r=-(o/2);u=-(e/2);break;default:r=0;u=0}return{left:r,top:u}},it=function(){n.dom.read(function(){var n=d(),i=tt(n),r=n.left+i.left,u=n.top+i.top;if(e)t.interrupt().transition().delay(c).duration(0).style("opacity",0);else{var h="translate("+o.left+"px, "+o.top+"px)",f="translate("+Math.round(r)+"px, "+Math.round(u)+"px)",s=d3.interpolateString(h,f),l=t.style("opacity")<.1;t.interrupt().transition().duration(l?0:a).styleTween("transform",function(){return s},"important").styleTween("-webkit-transform",function(){return s}).style("-ms-transform",f).style("opacity",1)}o.left=r;o.top=u})};return r.nvPointerEventsClass=y,r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{duration:{get:function(){return a},set:function(n){a=n}},gravity:{get:function(){return h},set:function(n){h=n}},distance:{get:function(){return i},set:function(n){i=n}},snapDistance:{get:function(){return g},set:function(n){g=n}},classes:{get:function(){return f},set:function(n){f=n}},enabled:{get:function(){return l},set:function(n){l=n}},hideDelay:{get:function(){return c},set:function(n){c=n}},contentGenerator:{get:function(){return k},set:function(n){k=n}},valueFormatter:{get:function(){return p},set:function(n){p=n}},headerFormatter:{get:function(){return w},set:function(n){w=n}},keyFormatter:{get:function(){return b},set:function(n){b=n}},headerEnabled:{get:function(){return v},set:function(n){v=n}},position:{get:function(){return d},set:function(n){d=n}},chartContainer:{get:function(){return document.body},set:function(){n.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(){n.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(){n.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return e},set:function(n){e!=n&&(e=!!n,r())}},data:{get:function(){return u},set:function(n){n.point&&(n.value=n.point.x,n.series=n.series||{},n.series.value=n.point.y,n.series.color=n.point.color||n.series.color);u=n}},node:{get:function(){return t.node()},set:function(){}},id:{get:function(){return s},set:function(){}}}),n.utils.initOptions(r),r};n.utils.windowSize=function(){var n={width:640,height:480};return window.innerWidth&&window.innerHeight?(n.width=window.innerWidth,n.height=window.innerHeight,n):document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth?(n.width=document.documentElement.offsetWidth,n.height=document.documentElement.offsetHeight,n):document.body&&document.body.offsetWidth?(n.width=document.body.offsetWidth,n.height=document.body.offsetHeight,n):n};n.utils.isArray=Array.isArray;n.utils.isObject=function(n){return n!==null&&typeof n=="object"};n.utils.isFunction=function(n){return typeof n=="function"};n.utils.isDate=function(n){return toString.call(n)==="[object Date]"};n.utils.isNumber=function(n){return!isNaN(n)&&typeof n=="number"};n.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):n.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}};n.utils.getColor=function(t){if(t===undefined)return n.utils.defaultColor();if(n.utils.isArray(t)){var i=d3.scale.ordinal().range(t);return function(n,t){var r=t===undefined?n:t;return n.color||i(r)}}return t};n.utils.defaultColor=function(){return n.utils.getColor(d3.scale.category20().range())};n.utils.customTheme=function(t,i,r){i=i||function(n){return n.key};r=r||d3.scale.category20().range();var u=r.length;return function(f){var e=i(f);return n.utils.isFunction(t[e])?t[e]():t[e]!==undefined?t[e]:(u||(u=r.length),u=u-1,r[u])}};n.utils.pjax=function(t,i){var r=function(r){d3.html(r,function(r){var u=d3.select(i).node();u.parentNode.replaceChild(d3.select(r).select(i).node(),u);n.utils.pjax(t,i)})};d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href);r(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})};n.utils.calcApproxTextWidth=function(t){if(n.utils.isFunction(t.style)&&n.utils.isFunction(t.text)){var i=parseInt(t.style("font-size").replace("px",""),10),r=t.text().length;return n.utils.NaNtoZero(r*i*.5)}return 0};n.utils.NaNtoZero=function(t){return!n.utils.isNumber(t)||isNaN(t)||t===null||t===Infinity||t===-Infinity?0:t};d3.selection.prototype.watchTransition=function(n){var t=[this].concat([].slice.call(arguments,1));return n.transition.apply(n,t)};n.utils.renderWatch=function(t,i){if(!(this instanceof n.utils.renderWatch))return new n.utils.renderWatch(t,i);var u=i!==undefined?i:250,r=[],f=this;this.models=function(n){return n=[].slice.call(arguments,0),n.forEach(function(n){n.__rendered=!1,function(n){n.dispatch.on("renderEnd",function(){n.__rendered=!0;f.renderEnd("model")})}(n);r.indexOf(n)<0&&r.push(n)}),this};this.reset=function(n){n!==undefined&&(u=n);r=[]};this.transition=function(n,t,i){if(t=arguments.length>1?[].slice.call(arguments,1):[],i=t.length>1?t.pop():u!==undefined?u:250,n.__rendered=!1,r.indexOf(n)<0&&r.push(n),i===0)return n.__rendered=!0,n.delay=function(){return this},n.duration=function(){return this},n;n.__rendered=n.length===0?!0:n.every(function(n){return!n.length})?!0:!1;var e=0;return n.transition().duration(i).each(function(){++e}).each("end",function(){--e==0&&(n.__rendered=!0,f.renderEnd.apply(this,t))})};this.renderEnd=function(){r.every(function(n){return n.__rendered})&&(r.forEach(function(n){n.__rendered=!1}),t.renderEnd.apply(this,arguments))}};n.utils.deepExtend=function(t){var i=arguments.length>1?[].slice.call(arguments,1):[];i.forEach(function(i){for(var r in i){var u=n.utils.isArray(t[r]),f=n.utils.isObject(t[r]),e=n.utils.isObject(i[r]);f&&!u&&e?n.utils.deepExtend(t[r],i[r]):t[r]=i[r]}})};n.utils.state=function(){var f;if(!(this instanceof n.utils.state))return new n.utils.state;var i={},o=this,r=function(){},u=function(){return{}},t=null,e=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(n){r(n,!0)});this.getter=function(n){return u=n,this};this.setter=function(n,t){return t||(t=function(){}),r=function(i,r){n(i);r&&t()},this};this.init=function(i){t=t||{};n.utils.deepExtend(t,i)};f=function(){var t=u(),n;if(JSON.stringify(t)===JSON.stringify(i))return!1;for(n in t)i[n]===undefined&&(i[n]={}),i[n]=t[n],e=!0;return!0};this.update=function(){t&&(r(t,!1),t=null);f.call(this)&&this.dispatch.change(i)}};n.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,i){n.utils.isFunction(this[t])&&this[t](i)}.bind(this)),this};n.utils.calcTicksX=function(t,i){var r=1,u=0,f;for(u;u<i.length;u+=1)f=i[u]&&i[u].values?i[u].values.length:0,r=f>r?f:r;return n.log("Requested number of ticks: ",t),n.log("Calculated max values to be: ",r),t=t>r?t=r-1:t,t=t<1?1:t,t=Math.floor(t),n.log("Calculating tick count as: ",t),t};n.utils.calcTicksY=function(t,i){return n.utils.calcTicksX(t,i)};n.utils.initOption=function(n,t){n._calls&&n._calls[t]?n[t]=n._calls[t]:(n[t]=function(i){return arguments.length?(n._overrides[t]=!0,n._options[t]=i,n):n._options[t]},n["_"+t]=function(i){return arguments.length?(n._overrides[t]||(n._options[t]=i),n):n._options[t]})};n.utils.initOptions=function(t){var i,r,u;t._overrides=t._overrides||{};i=Object.getOwnPropertyNames(t._options||{});r=Object.getOwnPropertyNames(t._calls||{});i=i.concat(r);for(u in i)n.utils.initOption(t,i[u])};n.utils.inheritOptionsD3=function(n,t,i){n._d3options=i.concat(n._d3options||[]);i.unshift(t);i.unshift(n);d3.rebind.apply(this,i)};n.utils.arrayUnique=function(n){return n.sort().filter(function(t,i){return!i||t!=n[i-1]})};n.utils.symbolMap=d3.map();n.utils.symbol=function(){function t(t,u){var f=i.call(this,t,u),e=r.call(this,t,u);return d3.svg.symbolTypes.indexOf(f)!==-1?d3.svg.symbol().type(f).size(e)():n.utils.symbolMap.get(f)(e)}var i,r=64;return t.type=function(n){return arguments.length?(i=d3.functor(n),t):i},t.size=function(n){return arguments.length?(r=d3.functor(n),t):r},t};n.utils.inheritOptions=function(t,i){var r=Object.getOwnPropertyNames(i._options||{}),f=Object.getOwnPropertyNames(i._calls||{}),e=i._inherited||[],o=i._d3options||[],u=r.concat(f).concat(e).concat(o);u.unshift(i);u.unshift(t);d3.rebind.apply(this,u);t._inherited=n.utils.arrayUnique(r.concat(f).concat(e).concat(r).concat(t._inherited||[]));t._d3options=n.utils.arrayUnique(o.concat(t._d3options||[]))};n.utils.initSVG=function(n){n.classed({"nvd3-svg":!0})};n.utils.sanitizeHeight=function(n,t){return n||parseInt(t.style("height"),10)||400};n.utils.sanitizeWidth=function(n,t){return n||parseInt(t.style("width"),10)||960};n.utils.availableHeight=function(t,i,r){return Math.max(0,n.utils.sanitizeHeight(t,i)-r.top-r.bottom)};n.utils.availableWidth=function(t,i,r){return Math.max(0,n.utils.sanitizeWidth(t,i)-r.left-r.right)};n.utils.noData=function(t,i){var f=t.options(),r=f.margin(),e=f.noData(),o=e==null?["No Data Available."]:[e],s=n.utils.availableHeight(null,i,r),h=n.utils.availableWidth(null,i,r),c=r.left+h/2,l=r.top+s/2,u;i.selectAll("g").remove();u=i.selectAll(".nv-noData").data(o);u.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");u.attr("x",c).attr("y",l).text(function(n){return n})};n.utils.wrapTicks=function(n,t){n.each(function(){for(var n=d3.select(this),o=n.text().split(/\s+/).reverse(),r,i=[],s=0,f=n.attr("y"),e=parseFloat(n.attr("dy")),u=n.text(null).append("tspan").attr("x",0).attr("y",f).attr("dy",e+"em");r=o.pop();)i.push(r),u.text(i.join(" ")),u.node().getComputedTextLength()>t&&(i.pop(),u.text(i.join(" ")),i=[r],u=n.append("tspan").attr("x",0).attr("y",f).attr("dy",++s*1.1+e+"em").text(r))})};n.utils.arrayEquals=function(t,i){if(t===i)return!0;if(!t||!i||t.length!=i.length)return!1;for(var r=0,u=t.length;r<u;r++)if(t[r]instanceof Array&&i[r]instanceof Array){if(!n.arrayEquals(t[r],i[r]))return!1}else if(t[r]!=i[r])return!1;return!0};n.models.axis=function(){"use strict";function u(p){return e.reset(),p.each(function(u){var st=d3.select(this),tt,k,ft,p,d,ot,it;n.utils.initSVG(st);var g=st.selectAll("g.nv-wrap.nv-axis").data([u]),ct=g.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),lt=ct.append("g"),nt=g.select("g");v!==null?i.ticks(v):(i.orient()=="top"||i.orient()=="bottom")&&i.ticks(Math.abs(t.range()[1]-t.range()[0])/100);nt.watchTransition(e,"axis").call(i);l=l||i.scale();tt=i.tickFormat();tt==null&&(tt=l.tickFormat());k=nt.selectAll("text.nv-axislabel").data([w||null]);k.exit().remove();y!==undefined&&nt.selectAll("g").select("text").style("font-size",y);switch(i.orient()){case"top":k.enter().append("text").attr("class","nv-axislabel");d=0;t.range().length===1?d=h?t.range()[0]*2+t.rangeBand():0:t.range().length===2?d=h?t.range()[0]+t.range()[1]+t.rangeBand():t.range()[1]:t.range().length>2&&(d=t.range()[t.range().length-1]+(t.range()[1]-t.range()[0]));k.attr("text-anchor","middle").attr("y",0).attr("x",d/2);o&&(p=g.selectAll("g.nv-axisMaxMin").data(t.domain()),p.enter().append("g").attr("class",function(n,t){return["nv-axisMaxMin","nv-axisMaxMin-x",t==0?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),p.exit().remove(),p.attr("transform",function(i){return"translate("+n.utils.NaNtoZero(t(i))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-i.tickPadding()).attr("text-anchor","middle").text(function(n){var t=tt(n);return(""+t).match("NaN")?"":t}),p.watchTransition(e,"min-max top").attr("transform",function(i,r){return"translate("+n.utils.NaNtoZero(t.range()[r])+",0)"}));break;case"bottom":ft=c+36;var ut=30,ht=0,rt=nt.selectAll("g").select("text"),et="";s%360?(rt.attr("transform",""),rt.each(function(){var n=this.getBoundingClientRect(),t=n.width;ht=n.height;t>ut&&(ut=t)}),et="rotate("+s+" 0,"+(ht/2+i.tickPadding())+")",ot=Math.abs(Math.sin(s*Math.PI/180)),ft=(ot?ot*ut:ut)+30,rt.attr("transform",et).style("text-anchor",s%360>0?"start":"end")):b?rt.attr("transform",function(n,t){return"translate(0,"+(t%2==0?"0":"12")+")"}):rt.attr("transform","translate(0,0)");k.enter().append("text").attr("class","nv-axislabel");d=0;t.range().length===1?d=h?t.range()[0]*2+t.rangeBand():0:t.range().length===2?d=h?t.range()[0]+t.range()[1]+t.rangeBand():t.range()[1]:t.range().length>2&&(d=t.range()[t.range().length-1]+(t.range()[1]-t.range()[0]));k.attr("text-anchor","middle").attr("y",ft).attr("x",d/2);o&&(p=g.selectAll("g.nv-axisMaxMin").data([t.domain()[0],t.domain()[t.domain().length-1]]),p.enter().append("g").attr("class",function(n,t){return["nv-axisMaxMin","nv-axisMaxMin-x",t==0?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),p.exit().remove(),p.attr("transform",function(i){return"translate("+n.utils.NaNtoZero(t(i)+(h?t.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",i.tickPadding()).attr("transform",et).style("text-anchor",s?s%360>0?"start":"end":"middle").text(function(n){var t=tt(n);return(""+t).match("NaN")?"":t}),p.watchTransition(e,"min-max bottom").attr("transform",function(i){return"translate("+n.utils.NaNtoZero(t(i)+(h?t.rangeBand()/2:0))+",0)"}));break;case"right":k.enter().append("text").attr("class","nv-axislabel");k.style("text-anchor",f?"middle":"begin").attr("transform",f?"rotate(90)":"").attr("y",f?-Math.max(r.right,a)+12-(c||0):-10).attr("x",f?d3.max(t.range())/2:i.tickPadding());o&&(p=g.selectAll("g.nv-axisMaxMin").data(t.domain()),p.enter().append("g").attr("class",function(n,t){return["nv-axisMaxMin","nv-axisMaxMin-y",t==0?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),p.exit().remove(),p.attr("transform",function(i){return"translate(0,"+n.utils.NaNtoZero(t(i))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",i.tickPadding()).style("text-anchor","start").text(function(n){var t=tt(n);return(""+t).match("NaN")?"":t}),p.watchTransition(e,"min-max right").attr("transform",function(i,r){return"translate(0,"+n.utils.NaNtoZero(t.range()[r])+")"}).select("text").style("opacity",1));break;case"left":k.enter().append("text").attr("class","nv-axislabel");k.style("text-anchor",f?"middle":"end").attr("transform",f?"rotate(-90)":"").attr("y",f?-Math.max(r.left,a)+25-(c||0):-10).attr("x",f?-d3.max(t.range())/2:-i.tickPadding());o&&(p=g.selectAll("g.nv-axisMaxMin").data(t.domain()),p.enter().append("g").attr("class",function(n,t){return["nv-axisMaxMin","nv-axisMaxMin-y",t==0?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),p.exit().remove(),p.attr("transform",function(t){return"translate(0,"+n.utils.NaNtoZero(l(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-i.tickPadding()).attr("text-anchor","end").text(function(n){var t=tt(n);return(""+t).match("NaN")?"":t}),p.watchTransition(e,"min-max right").attr("transform",function(i,r){return"translate(0,"+n.utils.NaNtoZero(t.range()[r])+")"}).select("text").style("opacity",1))}k.text(function(n){return n});o&&(i.orient()==="left"||i.orient()==="right")&&(nt.selectAll("g").each(function(n){d3.select(this).select("text").attr("opacity",1);(t(n)<t.range()[1]+10||t(n)>t.range()[0]-10)&&((n>1e-10||n<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),t.domain()[0]==t.domain()[1]&&t.domain()[0]==0&&g.selectAll("g.nv-axisMaxMin").style("opacity",function(n,t){return t?0:1}));o&&(i.orient()==="top"||i.orient()==="bottom")&&(it=[],g.selectAll("g.nv-axisMaxMin").each(function(n,i){try{i?it.push(t(n)-this.getBoundingClientRect().width-4):it.push(t(n)+this.getBoundingClientRect().width+4)}catch(r){i?it.push(t(n)-4):it.push(t(n)+4)}}),nt.selectAll("g").each(function(n){(t(n)<it[0]||t(n)>it[1])&&(n>1e-10||n<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())}));nt.selectAll(".tick").filter(function(n){return!parseFloat(Math.round(n*1e5)/1e6)&&n!==undefined}).classed("zero",!0);l=t.copy()}),e.renderEnd("axis immediate"),u}var i=d3.svg.axis(),t=d3.scale.linear(),r={top:0,right:0,bottom:0,left:0},a=75,k=60,w=null,o=!0,s=0,f=!0,b=!1,h=!1,v=null,c=0,y=undefined,p=250,d=d3.dispatch("renderEnd"),l,e;return i.scale(t).orient("bottom").tickFormat(function(n){return n}),e=n.utils.renderWatch(d,p),u.axis=i,u.dispatch=d,u.options=n.utils.optionsFunc.bind(u),u._options=Object.create({},{axisLabelDistance:{get:function(){return c},set:function(n){c=n}},staggerLabels:{get:function(){return b},set:function(n){b=n}},rotateLabels:{get:function(){return s},set:function(n){s=n}},rotateYLabel:{get:function(){return f},set:function(n){f=n}},showMaxMin:{get:function(){return o},set:function(n){o=n}},axisLabel:{get:function(){return w},set:function(n){w=n}},height:{get:function(){return k},set:function(n){k=n}},ticks:{get:function(){return v},set:function(n){v=n}},width:{get:function(){return a},set:function(n){a=n}},fontSize:{get:function(){return y},set:function(n){y=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return p},set:function(n){p=n;e.reset(p)}},scale:{get:function(){return t},set:function(r){t=r;i.scale(t);h=typeof t.rangeBands=="function";n.utils.inheritOptionsD3(u,t,["domain","range","rangeBand","rangeBands"])}}}),n.utils.initOptions(u),n.utils.inheritOptionsD3(u,i,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),n.utils.inheritOptionsD3(u,t,["domain","range","rangeBand","rangeBands"]),u};n.models.boxPlot=function(){"use strict";function a(ht){return h.reset(),ht.each(function(a){var gt=nt-u.left-u.right,ni=tt-u.top-u.bottom,yt,ct,bt,kt,vt,ti,ht,lt,at;it=d3.select(this);n.utils.initSVG(it);r.domain(rt||a.map(function(n,t){return s(n,t)})).rangeBands(ut||[0,gt],.1);yt=[];g||(ct=[],a.forEach(function(n){var t=l(n),i=c(n),r=o(n),u=y(n),f=b(n);f&&f.forEach(function(n,t){ct.push(k(n,t,undefined))});r&&ct.push(r);t&&ct.push(t);i&&ct.push(i);u&&ct.push(u)}),bt=d3.min(ct),kt=d3.max(ct),yt=[bt,kt]);t.domain(g||yt);t.range(ft||[ni,0]);ot=ot||r;st=st||t.copy().range([t(0),t(0)]);vt=it.selectAll("g.nv-wrap").data([a]);ti=vt.enter().append("g").attr("class","nvd3 nv-wrap");vt.attr("transform","translate("+u.left+","+u.top+")");ht=vt.selectAll(".nv-boxplot").data(function(n){return n});lt=ht.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);ht.attr("class","nv-boxplot").attr("transform",function(n,t){return"translate("+(r(s(n,t))+r.rangeBand()*.05)+", 0)"}).classed("hover",function(n){return n.hover});ht.watchTransition(h,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(n,t){return t*w/a.length}).attr("transform",function(n,t){return"translate("+(r(s(n,t))+r.rangeBand()*.05)+", 0)"});ht.exit().remove();lt.each(function(n,t){var r=d3.select(this);[o,y].forEach(function(u){if(u(n)!==undefined&&u(n)!==null){var e=u===o?"low":"high";r.append("line").style("stroke",f(n)||i(n,t)).attr("class","nv-boxplot-whisker nv-boxplot-"+e);r.append("line").style("stroke",f(n)||i(n,t)).attr("class","nv-boxplot-tick nv-boxplot-"+e)}})});var pt=function(){return et===null?r.rangeBand()*.9:Math.min(75,r.rangeBand()*.9)},wt=function(){return r.rangeBand()*.45-pt()/2},dt=function(){return r.rangeBand()*.45+pt()/2};[o,y].forEach(function(n){var i=n===o?"low":"high",u=n===o?l:c;ht.select("line.nv-boxplot-whisker.nv-boxplot-"+i).watchTransition(h,"nv-boxplot: boxplots").attr("x1",r.rangeBand()*.45).attr("y1",function(i){return t(n(i))}).attr("x2",r.rangeBand()*.45).attr("y2",function(n){return t(u(n))});ht.select("line.nv-boxplot-tick.nv-boxplot-"+i).watchTransition(h,"nv-boxplot: boxplots").attr("x1",wt).attr("y1",function(i){return t(n(i))}).attr("x2",dt).attr("y2",function(i){return t(n(i))})});[o,y].forEach(function(n){var t=n===o?"low":"high";lt.selectAll(".nv-boxplot-"+t).on("mouseover",function(t,r,u){d3.select(this).classed("hover",!0);e.elementMouseover({series:{key:n(t),color:f(t)||i(t,u)},e:d3.event})}).on("mouseout",function(t,r,u){d3.select(this).classed("hover",!1);e.elementMouseout({series:{key:n(t),color:f(t)||i(t,u)},e:d3.event})}).on("mousemove",function(){e.elementMousemove({e:d3.event})})});lt.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(n,t){d3.select(this).classed("hover",!0);e.elementMouseover({key:s(n),value:s(n),series:[{key:"Q3",value:c(n),color:f(n)||i(n,t)},{key:"Q2",value:v(n),color:f(n)||i(n,t)},{key:"Q1",value:l(n),color:f(n)||i(n,t)}],data:n,index:t,e:d3.event})}).on("mouseout",function(n,t){d3.select(this).classed("hover",!1);e.elementMouseout({key:s(n),value:s(n),series:[{key:"Q3",value:c(n),color:f(n)||i(n,t)},{key:"Q2",value:v(n),color:f(n)||i(n,t)},{key:"Q1",value:l(n),color:f(n)||i(n,t)}],data:n,index:t,e:d3.event})}).on("mousemove",function(){e.elementMousemove({e:d3.event})});ht.select("rect.nv-boxplot-box").watchTransition(h,"nv-boxplot: boxes").attr("y",function(n){return t(c(n))}).attr("width",pt).attr("x",wt).attr("height",function(n){return Math.abs(t(c(n))-t(l(n)))||1}).style("fill",function(n,t){return f(n)||i(n,t)}).style("stroke",function(n,t){return f(n)||i(n,t)});lt.append("line").attr("class","nv-boxplot-median");ht.select("line.nv-boxplot-median").watchTransition(h,"nv-boxplot: boxplots line").attr("x1",wt).attr("y1",function(n){return t(v(n))}).attr("x2",dt).attr("y2",function(n){return t(v(n))});at=ht.selectAll(".nv-boxplot-outlier").data(function(n){return b(n)||[]});at.enter().append("circle").style("fill",function(n,t,r){return p(n,t,r)||i(n,r)}).style("stroke",function(n,t,r){return p(n,t,r)||i(n,r)}).style("z-index",9e3).on("mouseover",function(n,t,r){d3.select(this).classed("hover",!0);e.elementMouseover({series:{key:d(n,t,r),color:p(n,t,r)||i(n,r)},e:d3.event})}).on("mouseout",function(n,t,r){d3.select(this).classed("hover",!1);e.elementMouseout({series:{key:d(n,t,r),color:p(n,t,r)||i(n,r)},e:d3.event})}).on("mousemove",function(){e.elementMousemove({e:d3.event})});at.attr("class","nv-boxplot-outlier");at.watchTransition(h,"nv-boxplot: nv-boxplot-outlier").attr("cx",r.rangeBand()*.45).attr("cy",function(n,i,r){return t(k(n,i,r))}).attr("r","3");at.exit().remove();ot=r.copy();st=t.copy()}),h.renderEnd("nv-boxplot immediate"),a}var u={top:0,right:0,bottom:0,left:0},nt=960,tt=500,ht=Math.floor(Math.random()*1e4),r=d3.scale.ordinal(),t=d3.scale.linear(),s=function(n){return n.label},l=function(n){return n.values.Q1},v=function(n){return n.values.Q2},c=function(n){return n.values.Q3},o=function(n){return n.values.whisker_low},y=function(n){return n.values.whisker_high},f=function(n){return n.color},b=function(n){return n.values.outliers},k=function(n){return n},d=function(n){return n},p=function(){return undefined},i=n.utils.defaultColor(),it=null,rt,ut,g,ft,e=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),w=250,et=null,ot,st,h=n.utils.renderWatch(e,w);return a.dispatch=e,a.options=n.utils.optionsFunc.bind(a),a._options=Object.create({},{width:{get:function(){return nt},set:function(n){nt=n}},height:{get:function(){return tt},set:function(n){tt=n}},maxBoxWidth:{get:function(){return et},set:function(n){et=n}},x:{get:function(){return s},set:function(n){s=n}},q1:{get:function(){return l},set:function(n){l=n}},q2:{get:function(){return v},set:function(n){v=n}},q3:{get:function(){return c},set:function(n){c=n}},wl:{get:function(){return o},set:function(n){o=n}},wh:{get:function(){return y},set:function(n){y=n}},itemColor:{get:function(){return f},set:function(n){f=n}},outliers:{get:function(){return b},set:function(n){b=n}},outlierValue:{get:function(){return k},set:function(n){k=n}},outlierLabel:{get:function(){return d},set:function(n){d=n}},outlierColor:{get:function(){return p},set:function(n){p=n}},xScale:{get:function(){return r},set:function(n){r=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return rt},set:function(n){rt=n}},yDomain:{get:function(){return g},set:function(n){g=n}},xRange:{get:function(){return ut},set:function(n){ut=n}},yRange:{get:function(){return ft},set:function(n){ft=n}},id:{get:function(){return ht},set:function(n){ht=n}},y:{get:function(){return console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead."),{}},set:function(){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return u},set:function(n){u.top=n.top!==undefined?n.top:u.top;u.right=n.right!==undefined?n.right:u.right;u.bottom=n.bottom!==undefined?n.bottom:u.bottom;u.left=n.left!==undefined?n.left:u.left}},color:{get:function(){return i},set:function(t){i=n.utils.getColor(t)}},duration:{get:function(){return w},set:function(n){w=n;h.reset(w)}}}),n.utils.initOptions(a),a};n.models.boxPlotChart=function(){"use strict";function i(e){return o.reset(),o.models(r),l&&o.models(s),a&&o.models(f),e.each(function(e){var b=d3.select(this),ot=this,g,nt,it,ut,ft;if(n.utils.initSVG(b),g=(p||parseInt(b.style("width"))||960)-t.left-t.right,nt=(w||parseInt(b.style("height"))||400)-t.top-t.bottom,i.update=function(){d.beforeUpdate();b.transition().duration(u).call(i)},i.container=this,e&&e.length)b.selectAll(".nv-noData").remove();else return it=b.selectAll(".nv-noData").data([k]),it.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),it.attr("x",t.left+g/2).attr("y",t.top+nt/2).text(function(n){return n}),i;y=r.xScale();c=r.yScale().clamp(!0);var rt=b.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([e]),tt=rt.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),et=tt.append("defs"),o=rt.select("g");tt.append("g").attr("class","nv-x nv-axis");tt.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");tt.append("g").attr("class","nv-barsWrap");o.attr("transform","translate("+t.left+","+t.top+")");v&&o.select(".nv-y.nv-axis").attr("transform","translate("+g+",0)");r.width(g).height(nt);ut=o.select(".nv-barsWrap").datum(e.filter(function(n){return!n.disabled}));ut.transition().call(r);et.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect");o.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",y.rangeBand()*(h?2:1)).attr("height",16).attr("x",-y.rangeBand()/(h?1:2));l&&(s.scale(y).ticks(n.utils.calcTicksX(g/100,e)).tickSize(-nt,0),o.select(".nv-x.nv-axis").attr("transform","translate(0,"+c.range()[0]+")"),o.select(".nv-x.nv-axis").call(s),ft=o.select(".nv-x.nv-axis").selectAll("g"),h&&ft.selectAll("text").attr("transform",function(n,t,i){return"translate(0,"+(i%2==0?"5":"17")+")"}));a&&(f.scale(c).ticks(Math.floor(nt/36)).tickSize(-g,0),o.select(".nv-y.nv-axis").call(f));o.select(".nv-zeroLine line").attr("x1",0).attr("x2",g).attr("y1",c(0)).attr("y2",c(0))}),o.renderEnd("nv-boxplot chart immediate"),i}var r=n.models.boxPlot(),s=n.models.axis(),f=n.models.axis(),t={top:15,right:10,bottom:50,left:60},p=null,w=null,b=n.utils.getColor(),l=!0,a=!0,v=!1,h=!1,e=n.models.tooltip(),y,c,k="No Data Available.",d=d3.dispatch("beforeUpdate","renderEnd"),u=250,o;s.orient("bottom").showMaxMin(!1).tickFormat(function(n){return n});f.orient(v?"right":"left").tickFormat(d3.format(",.1f"));e.duration(0);o=n.utils.renderWatch(d,u);r.dispatch.on("elementMouseover.tooltip",function(n){e.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(n){e.data(n).hidden(!0)});r.dispatch.on("elementMousemove.tooltip",function(){e()});return i.dispatch=d,i.boxplot=r,i.xAxis=s,i.yAxis=f,i.tooltip=e,i.options=n.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return p},set:function(n){p=n}},height:{get:function(){return w},set:function(n){w=n}},staggerLabels:{get:function(){return h},set:function(n){h=n}},showXAxis:{get:function(){return l},set:function(n){l=n}},showYAxis:{get:function(){return a},set:function(n){a=n}},tooltipContent:{get:function(){return e},set:function(n){e=n}},noData:{get:function(){return k},set:function(n){k=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},duration:{get:function(){return u},set:function(n){u=n;o.reset(u);r.duration(u);s.duration(u);f.duration(u)}},color:{get:function(){return b},set:function(t){b=n.utils.getColor(t);r.color(b)}},rightAlignYAxis:{get:function(){return v},set:function(n){v=n;f.orient(n?"right":"left")}}}),n.utils.inheritOptions(i,r),n.utils.initOptions(i),i};n.models.bullet=function(){"use strict";function e(n,t){var i=n.slice();n.sort(function(n,r){var u=i.indexOf(n),f=i.indexOf(r);return d3.descending(t[u],t[f])})}function r(f){return f.each(function(r,f){var gt=l-t.left-t.right,ft=a-t.top-t.bottom,w,st,vt,f,at,yt,et,kt,dt;v=d3.select(this);n.utils.initSVG(v);var ut=o.call(this,r,f).slice(),pt=s.call(this,r,f).slice(),wt=k.call(this,r,f).slice(),rt=h.call(this,r,f).slice(),bt=d.call(this,r,f).slice(),ni=g.call(this,r,f).slice(),ti=nt.call(this,r,f).slice(),ot=tt.call(this,r,f).slice();e(bt,ut);e(ni,pt);e(ti,wt);e(ot,rt);ut.sort(d3.descending);pt.sort(d3.descending);wt.sort(d3.descending);rt.sort(d3.descending);w=d3.scale.linear().domain(d3.extent(d3.merge([c,ut]))).range(p?[gt,0]:[0,gt]);st=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(w.range());this.__chart__=w;var fi=d3.min(ut),ei=d3.max(ut),oi=ut[1],ht=v.selectAll("g.nv-wrap.nv-bullet").data([r]),ri=ht.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),ct=ri.append("g"),lt=ht.select("g");for(f=0,at=ut.length;f<at;f++)vt="nv-range nv-range"+f,f<=2&&(vt=vt+" nv-range"+it[f]),ct.append("rect").attr("class",vt);ct.append("rect").attr("class","nv-measure");ht.attr("transform","translate("+t.left+","+t.top+")");var si=function(n){return Math.abs(st(n)-st(0))},ui=function(n){return Math.abs(w(n)-w(0))},hi=function(n){return n<0?st(n):st(0)},ii=function(n){return n<0?w(n):w(0)};for(f=0,at=ut.length;f<at;f++)yt=ut[f],lt.select("rect.nv-range"+f).datum(yt).attr("height",ft).transition().duration(u).attr("width",ui(yt)).attr("x",ii(yt));lt.select("rect.nv-measure").style("fill",y).attr("height",ft/3).attr("y",ft/3).on("mouseover",function(){i.elementMouseover({value:rt[0],label:ot[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){i.elementMousemove({value:rt[0],label:ot[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){i.elementMouseout({value:rt[0],label:ot[0]||"Current",color:d3.select(this).style("fill")})}).transition().duration(u).attr("width",rt<0?w(0)-w(rt[0]):w(rt[0])-w(0)).attr("x",ii(rt));et=ft/6;kt=pt.map(function(n,t){return{value:n,label:ni[t]}});ct.selectAll("path.nv-markerTriangle").data(kt).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+et+"L"+et+","+-et+" "+-et+","+-et+"Z").on("mouseover",function(n){i.elementMouseover({value:n.value,label:n.label||"Previous",color:d3.select(this).style("fill"),pos:[w(n.value),ft/2]})}).on("mousemove",function(n){i.elementMousemove({value:n.value,label:n.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(n){i.elementMouseout({value:n.value,label:n.label||"Previous",color:d3.select(this).style("fill")})});lt.selectAll("path.nv-markerTriangle").data(kt).transition().duration(u).attr("transform",function(n){return"translate("+w(n.value)+","+ft/2+")"});dt=wt.map(function(n,t){return{value:n,label:ti[t]}});ct.selectAll("line.nv-markerLine").data(dt).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(n){return w(n.value)}).attr("y1","2").attr("x2",function(n){return w(n.value)}).attr("y2",ft-2).on("mouseover",function(n){i.elementMouseover({value:n.value,label:n.label||"Previous",color:d3.select(this).style("fill"),pos:[w(n.value),ft/2]})}).on("mousemove",function(n){i.elementMousemove({value:n.value,label:n.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(n){i.elementMouseout({value:n.value,label:n.label||"Previous",color:d3.select(this).style("fill")})});lt.selectAll("line.nv-markerLine").data(dt).transition().duration(u).attr("x1",function(n){return w(n.value)}).attr("x2",function(n){return w(n.value)});ht.selectAll(".nv-range").on("mouseover",function(n,t){var r=bt[t]||b[t];i.elementMouseover({value:n,label:r,color:d3.select(this).style("fill")})}).on("mousemove",function(){i.elementMousemove({value:rt[0],label:ot[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(n,t){var r=bt[t]||b[t];i.elementMouseout({value:n,label:r,color:d3.select(this).style("fill")})})}),r}var t={top:0,right:0,bottom:0,left:0},f="left",p=!1,o=function(n){return n.ranges},s=function(n){return n.markers?n.markers:[]},k=function(n){return n.markerLines?n.markerLines:[0]},h=function(n){return n.measures},d=function(n){return n.rangeLabels?n.rangeLabels:[]},g=function(n){return n.markerLabels?n.markerLabels:[]},nt=function(n){return n.markerLineLabels?n.markerLineLabels:[]},tt=function(n){return n.measureLabels?n.measureLabels:[]},c=[0],l=380,a=30,v=null,w=null,y=n.utils.getColor(["#1f77b4"]),i=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),b=["Maximum","Mean","Minimum"],it=["Max","Avg","Min"],u=1e3;return r.dispatch=i,r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{ranges:{get:function(){return o},set:function(n){o=n}},markers:{get:function(){return s},set:function(n){s=n}},measures:{get:function(){return h},set:function(n){h=n}},forceX:{get:function(){return c},set:function(n){c=n}},width:{get:function(){return l},set:function(n){l=n}},height:{get:function(){return a},set:function(n){a=n}},tickFormat:{get:function(){return w},set:function(n){w=n}},duration:{get:function(){return u},set:function(n){u=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},orient:{get:function(){return f},set:function(n){f=n;p=f=="right"||f=="bottom"}},color:{get:function(){return y},set:function(t){y=n.utils.getColor(t)}}}),n.utils.initOptions(r),r};n.models.bulletChart=function(){"use strict";function i(u){return u.each(function(f,y){var b=d3.select(this),p,d,ft,it;n.utils.initSVG(b);var k=n.utils.availableWidth(l,b,t),w=o-t.top-t.bottom,at=this;if(i.update=function(){i(u)},i.container=this,f&&e.call(this,f,y))b.selectAll(".nv-noData").remove();else return n.utils.noData(i,b),i;var st=e.call(this,f,y).slice().sort(d3.descending),ht=h.call(this,f,y).slice().sort(d3.descending),ct=c.call(this,f,y).slice().sort(d3.descending),g=b.selectAll("g.nv-wrap.nv-bulletChart").data([f]),lt=g.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),nt=lt.append("g"),rt=g.select("g");nt.append("g").attr("class","nv-bulletWrap");nt.append("g").attr("class","nv-titles");g.attr("transform","translate("+t.left+","+t.top+")");p=d3.scale.linear().domain([0,Math.max(st[0],ht[0]||0,ct[0])]).range(v?[k,0]:[0,k]);d=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(p.range());this.__chart__=p;var vt=function(n){return Math.abs(d(n)-d(0))},yt=function(n){return Math.abs(p(n)-p(0))},ut=nt.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(o-t.top-t.bottom)/2+")");ut.append("text").attr("class","nv-title").text(function(n){return n.title});ut.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(n){return n.subtitle});r.width(k).height(w);ft=rt.select(".nv-bulletWrap");d3.transition(ft).call(r);var et=a||p.tickFormat(k/100),tt=rt.selectAll("g.nv-tick").data(p.ticks(s?s:k/50),function(n){return this.textContent||et(n)}),ot=tt.enter().append("g").attr("class","nv-tick").attr("transform",function(n){return"translate("+d(n)+",0)"}).style("opacity",1e-6);ot.append("line").attr("y1",w).attr("y2",w*7/6);ot.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",w*7/6).text(et);it=d3.transition(tt).transition().duration(r.duration()).attr("transform",function(n){return"translate("+p(n)+",0)"}).style("opacity",1);it.select("line").attr("y1",w).attr("y2",w*7/6);it.select("text").attr("y",w*7/6);d3.transition(tt.exit()).transition().duration(r.duration()).attr("transform",function(n){return"translate("+p(n)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),i}var r=n.models.bullet(),u=n.models.tooltip(),f="left",v=!1,t={top:5,right:40,bottom:20,left:120},e=function(n){return n.ranges},h=function(n){return n.markers?n.markers:[]},c=function(n){return n.measures},l=null,o=55,a=null,s=null,y=null,p=d3.dispatch();u.duration(0).headerEnabled(!1);r.dispatch.on("elementMouseover.tooltip",function(n){n.series={key:n.label,value:n.value,color:n.color};u.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});r.dispatch.on("elementMousemove.tooltip",function(){u()});return i.bullet=r,i.dispatch=p,i.tooltip=u,i.options=n.utils.optionsFunc.bind(i),i._options=Object.create({},{ranges:{get:function(){return e},set:function(n){e=n}},markers:{get:function(){return h},set:function(n){h=n}},measures:{get:function(){return c},set:function(n){c=n}},width:{get:function(){return l},set:function(n){l=n}},height:{get:function(){return o},set:function(n){o=n}},tickFormat:{get:function(){return a},set:function(n){a=n}},ticks:{get:function(){return s},set:function(n){s=n}},noData:{get:function(){return y},set:function(n){y=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},orient:{get:function(){return f},set:function(n){f=n;v=f=="right"||f=="bottom"}}}),n.utils.inheritOptions(i,r),n.utils.initOptions(i),i};n.models.candlestickBar=function(){"use strict";function u(it){return it.each(function(u){var rt,ot,it,ft,st,vt,yt;o=d3.select(this);rt=n.utils.availableWidth(p,o,r);ot=n.utils.availableHeight(w,o,r);n.utils.initSVG(o);it=rt/u[0].values.length*.45;i.domain(g||d3.extent(u[0].values.map(s).concat(b)));k?i.range(y||[rt*.5/u[0].values.length,rt*(u[0].values.length-.5)/u[0].values.length]):i.range(y||[5+it/2,rt-it/2-5]);t.domain(nt||[d3.min(u[0].values.map(l).concat(v)),d3.max(u[0].values.map(c).concat(v))]).range(tt||[ot,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]+t.domain()[0]*.01,t.domain()[1]-t.domain()[1]*.01]):t.domain([-1,1]));var et=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([u[0].values]),ht=et.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),ct=ht.append("defs"),lt=ht.append("g"),at=et.select("g");lt.append("g").attr("class","nv-ticks");et.attr("transform","translate("+r.left+","+r.top+")");o.on("click",function(n,t){ut.chartClick({data:n,index:t,pos:d3.event,id:h})});ct.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");et.select("#nv-chart-clip-path-"+h+" rect").attr("width",rt).attr("height",ot);at.attr("clip-path",d?"url(#nv-chart-clip-path-"+h+")":"");ft=et.select(".nv-ticks").selectAll(".nv-tick").data(function(n){return n});ft.exit().remove();st=ft.enter().append("g");ft.attr("class",function(n,t,i){return(f(n,t)>e(n,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+i+"-"+t});vt=st.append("line").attr("class","nv-candlestick-lines").attr("transform",function(n,t){return"translate("+i(s(n,t))+",0)"}).attr("x1",0).attr("y1",function(n,i){return t(c(n,i))}).attr("x2",0).attr("y2",function(n,i){return t(l(n,i))});yt=st.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(n,r){return"translate("+(i(s(n,r))-it/2)+","+(t(a(n,r))-(f(n,r)>e(n,r)?t(e(n,r))-t(f(n,r)):0))+")"}).attr("x",0).attr("y",0).attr("width",it).attr("height",function(n,i){var r=f(n,i),u=e(n,i);return r>u?t(u)-t(r):t(r)-t(u)});ft.select(".nv-candlestick-lines").transition().attr("transform",function(n,t){return"translate("+i(s(n,t))+",0)"}).attr("x1",0).attr("y1",function(n,i){return t(c(n,i))}).attr("x2",0).attr("y2",function(n,i){return t(l(n,i))});ft.select(".nv-candlestick-rects").transition().attr("transform",function(n,r){return"translate("+(i(s(n,r))-it/2)+","+(t(a(n,r))-(f(n,r)>e(n,r)?t(e(n,r))-t(f(n,r)):0))+")"}).attr("x",0).attr("y",0).attr("width",it).attr("height",function(n,i){var r=f(n,i),u=e(n,i);return r>u?t(u)-t(r):t(r)-t(u)})}),u}var r={top:0,right:0,bottom:0,left:0},p=null,w=null,h=Math.floor(Math.random()*1e4),o,i=d3.scale.linear(),t=d3.scale.linear(),s=function(n){return n.x},a=function(n){return n.y},f=function(n){return n.open},e=function(n){return n.close},c=function(n){return n.high},l=function(n){return n.low},b=[],v=[],k=!1,d=!0,it=n.utils.defaultColor(),rt=!1,g,nt,y,tt,ut=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return u.highlightPoint=function(n,t){u.clearHighlights();o.select(".nv-candlestickBar .nv-tick-0-"+n).classed("hover",t)},u.clearHighlights=function(){o.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},u.dispatch=ut,u.options=n.utils.optionsFunc.bind(u),u._options=Object.create({},{width:{get:function(){return p},set:function(n){p=n}},height:{get:function(){return w},set:function(n){w=n}},xScale:{get:function(){return i},set:function(n){i=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return g},set:function(n){g=n}},yDomain:{get:function(){return nt},set:function(n){nt=n}},xRange:{get:function(){return y},set:function(n){y=n}},yRange:{get:function(){return tt},set:function(n){tt=n}},forceX:{get:function(){return b},set:function(n){b=n}},forceY:{get:function(){return v},set:function(n){v=n}},padData:{get:function(){return k},set:function(n){k=n}},clipEdge:{get:function(){return d},set:function(n){d=n}},id:{get:function(){return h},set:function(n){h=n}},interactive:{get:function(){return rt},set:function(n){rt=n}},x:{get:function(){return s},set:function(n){s=n}},y:{get:function(){return a},set:function(n){a=n}},open:{get:function(){return f()},set:function(n){f=n}},close:{get:function(){return e()},set:function(n){e=n}},high:{get:function(){return c},set:function(n){c=n}},low:{get:function(){return l},set:function(n){l=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!=undefined?n.top:r.top;r.right=n.right!=undefined?n.right:r.right;r.bottom=n.bottom!=undefined?n.bottom:r.bottom;r.left=n.left!=undefined?n.left:r.left}},color:{get:function(){return it},set:function(t){it=n.utils.getColor(t)}}}),n.utils.initOptions(u),u};n.models.cumulativeLineChart=function(){"use strict";function t(g){return p.reset(),p.models(u),it&&p.models(h),rt&&p.models(o),g.each(function(p){function hi(){d3.select(t.container).style("cursor","ew-resize")}function ci(){r.x=d3.event.x;r.i=Math.round(y.invert(r.x));fi()}function li(){d3.select(t.container).style("cursor","auto");i.index=r.i;c.stateChange(i)}function fi(){gt.data([r]);var n=t.duration();t.duration(0);t.update();t.duration(n)}var nt=d3.select(this),dt,ei,ti,oi,si,ii,ri,gt;n.utils.initSVG(nt);nt.classed("nv-chart-"+vt,!0);var yi=this,ct=n.utils.availableWidth(et,nt,f),at=n.utils.availableHeight(tt,nt,f);if(t.update=function(){s===0?nt.call(t):nt.transition().duration(s).call(t)},t.container=this,i.setter(pt(p),t.update).getter(yt(p)).update(),i.disabled=p.map(function(n){return!!n.disabled}),!v){v={};for(dt in i)v[dt]=i[dt]instanceof Array?i[dt].slice(0):i[dt]}if(ei=d3.behavior.drag().on("dragstart",hi).on("drag",ci).on("dragend",li),p&&p.length&&p.filter(function(n){return n.values.length}).length)nt.selectAll(".nv-noData").remove();else return n.utils.noData(t,nt),t;ht=u.xScale();k=u.yScale();e?u.yDomain(null):(ti=p.filter(function(n){return!n.disabled}).map(function(n){var t=d3.extent(n.values,u.y());return t[0]<-.95&&(t[0]=-.95),[(t[0]-t[1])/(1+t[1]),(t[1]-t[0])/(1+t[0])]}),oi=[d3.min(ti,function(n){return n[0]}),d3.max(ti,function(n){return n[1]})],u.yDomain(oi));y.domain([0,p[0].values.length-1]).range([0,ct]).clamp(!0);var p=wt(r.i,p),ai=ft?"none":"all",kt=nt.selectAll("g.nv-wrap.nv-cumulativeLine").data([p]),bt=kt.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),g=kt.select("g");bt.append("g").attr("class","nv-interactive");bt.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");bt.append("g").attr("class","nv-y nv-axis");bt.append("g").attr("class","nv-background");bt.append("g").attr("class","nv-linesWrap").style("pointer-events",ai);bt.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");bt.append("g").attr("class","nv-legendWrap");bt.append("g").attr("class","nv-controlsWrap");ot?(l.width(ct),g.select(".nv-legendWrap").datum(p).call(l),lt||l.height()===f.top||(f.top=l.height(),at=n.utils.availableHeight(tt,nt,f)),g.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")):g.select(".nv-legendWrap").selectAll("*").remove();st?(si=[{key:"Re-scale y-axis",disabled:!e}],w.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),g.select(".nv-controlsWrap").datum(si).attr("transform","translate(0,"+-f.top+")").call(w)):g.select(".nv-controlsWrap").selectAll("*").remove();kt.attr("transform","translate("+f.left+","+f.top+")");ut&&g.select(".nv-y.nv-axis").attr("transform","translate("+ct+",0)");ii=p.filter(function(n){return n.tempDisabled});kt.select(".tempDisabled").remove();ii.length&&kt.append("text").attr("class","tempDisabled").attr("x",ct/2).attr("y","-.71em").style("text-anchor","end").text(ii.map(function(n){return n.key}).join(", ")+" values cannot be calculated for this time period.");ft&&(a.width(ct).height(at).margin({left:f.left,top:f.top}).svgContainer(nt).xScale(ht),kt.select(".nv-interactive").call(a));bt.select(".nv-background").append("rect");g.select(".nv-background rect").attr("width",ct).attr("height",at);u.y(function(n){return n.display.y}).width(ct).height(at).color(p.map(function(n,t){return n.color||b(n,t)}).filter(function(n,t){return!p[t].disabled&&!p[t].tempDisabled}));ri=g.select(".nv-linesWrap").datum(p.filter(function(n){return!n.disabled&&!n.tempDisabled}));ri.call(u);p.forEach(function(n,t){n.seriesIndex=t});var vi=p.filter(function(n){return!n.disabled&&!!d(n)}),ui=g.select(".nv-avgLinesWrap").selectAll("line").data(vi,function(n){return n.key}),ni=function(n){var t=k(d(n));return t<0?0:t>at?at:t};ui.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(n){return u.color()(n,n.seriesIndex)}).attr("x1",0).attr("x2",ct).attr("y1",ni).attr("y2",ni);ui.style("stroke-opacity",function(n){var t=k(d(n));return t<0||t>at?0:1}).attr("x1",0).attr("x2",ct).attr("y1",ni).attr("y2",ni);ui.exit().remove();gt=ri.selectAll(".nv-indexLine").data([r]);gt.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ei);gt.attr("transform",function(n){return"translate("+y(n.i)+",0)"}).attr("height",at);it&&(h.scale(ht)._ticks(n.utils.calcTicksX(ct/70,p)).tickSize(-at,0),g.select(".nv-x.nv-axis").attr("transform","translate(0,"+k.range()[0]+")"),g.select(".nv-x.nv-axis").call(h));rt&&(o.scale(k)._ticks(n.utils.calcTicksY(at/36,p)).tickSize(-ct,0),g.select(".nv-y.nv-axis").call(o));g.select(".nv-background rect").on("click",function(){r.x=d3.mouse(this)[0];r.i=Math.round(y.invert(r.x));i.index=r.i;c.stateChange(i);fi()});u.dispatch.on("elementClick",function(n){r.i=n.pointIndex;r.x=y(r.i);i.index=r.i;c.stateChange(i);fi()});w.dispatch.on("legendClick",function(n){n.disabled=!n.disabled;e=!n.disabled;i.rescaleY=e;c.stateChange(i);t.update()});l.dispatch.on("stateChange",function(n){for(var r in n)i[r]=n[r];c.stateChange(i);t.update()});a.dispatch.on("elementMousemove",function(i){var e,r,s,f,l;if(u.clearHighlights(),f=[],p.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(o,h){r=n.interactiveBisect(o.values,i.pointXValue,t.x());u.highlightPoint(h,r,!0);var c=o.values[r];typeof c!="undefined"&&(typeof e=="undefined"&&(e=c),typeof s=="undefined"&&(s=t.xScale()(t.x()(c,r))),f.push({key:o.key,value:t.y()(c,r),color:b(o,o.seriesIndex)}))}),f.length>2){var v=t.yScale().invert(i.mouseY),y=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),w=.03*y,c=n.nearestValueIndex(f.map(function(n){return n.value}),v,w);c!==null&&(f[c].highlight=!0)}l=h.tickFormat()(t.x()(e,r),r);a.tooltip.valueFormatter(function(n){return o.tickFormat()(n)}).data({value:l,series:f})();a.renderGuideLine(s)});a.dispatch.on("elementMouseout",function(){u.clearHighlights()});c.on("changeState",function(n){typeof n.disabled!="undefined"&&(p.forEach(function(t,i){t.disabled=n.disabled[i]}),i.disabled=n.disabled);typeof n.index!="undefined"&&(r.i=n.index,r.x=y(r.i),i.index=n.index,gt.data([r]));typeof n.rescaleY!="undefined"&&(e=n.rescaleY);t.update()})}),p.renderEnd("cumulativeLineChart immediate"),t}function wt(n,t){return g||(g=u.y()),t.map(function(t){var r,i;return t.values?(r=t.values[n],r==null)?t:(i=g(r,n),i<-.95&&!ct)?(t.tempDisabled=!0,t):(t.tempDisabled=!1,t.values=t.values.map(function(n,t){return n.display={y:(g(n,t)-i)/(1+i)},n}),t):t})}var u=n.models.line(),h=n.models.axis(),o=n.models.axis(),l=n.models.legend(),w=n.models.legend(),a=n.interactiveGuideline(),nt=n.models.tooltip(),f={top:30,right:30,bottom:50,left:60},lt=null,b=n.utils.defaultColor(),et=null,tt=null,ot=!0,it=!0,rt=!0,ut=!1,st=!0,ft=!1,e=!0,ht,k,vt=u.id(),i=n.utils.state(),v=null,at=null,d=function(n){return n.average},c=d3.dispatch("stateChange","changeState","renderEnd"),s=250,ct=!1,g;i.index=0;i.rescaleY=e;h.orient("bottom").tickPadding(7);o.orient(ut?"right":"left");nt.valueFormatter(function(n,t){return o.tickFormat()(n,t)}).headerFormatter(function(n,t){return h.tickFormat()(n,t)});w.updateState(!1);var y=d3.scale.linear(),r={i:0,x:0},p=n.utils.renderWatch(c,s),yt=function(n){return function(){return{active:n.map(function(n){return!n.disabled}),index:r.i,rescaleY:e}}},pt=function(n){return function(t){t.index!==undefined&&(r.i=t.index);t.rescaleY!==undefined&&(e=t.rescaleY);t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};u.dispatch.on("elementMouseover.tooltip",function(n){var i={x:t.x()(n.point),y:t.y()(n.point),color:n.point.color};n.point=i;nt.data(n).hidden(!1)});u.dispatch.on("elementMouseout.tooltip",function(){nt.hidden(!0)});return g=null,t.dispatch=c,t.lines=u,t.legend=l,t.controls=w,t.xAxis=h,t.yAxis=o,t.interactiveLayer=a,t.state=i,t.tooltip=nt,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return et},set:function(n){et=n}},height:{get:function(){return tt},set:function(n){tt=n}},rescaleY:{get:function(){return e},set:function(n){e=n}},showControls:{get:function(){return st},set:function(n){st=n}},showLegend:{get:function(){return ot},set:function(n){ot=n}},average:{get:function(){return d},set:function(n){d=n}},defaultState:{get:function(){return v},set:function(n){v=n}},noData:{get:function(){return at},set:function(n){at=n}},showXAxis:{get:function(){return it},set:function(n){it=n}},showYAxis:{get:function(){return rt},set:function(n){rt=n}},noErrorCheck:{get:function(){return ct},set:function(n){ct=n}},margin:{get:function(){return f},set:function(n){n.top!==undefined&&(f.top=n.top,lt=n.top);f.right=n.right!==undefined?n.right:f.right;f.bottom=n.bottom!==undefined?n.bottom:f.bottom;f.left=n.left!==undefined?n.left:f.left}},color:{get:function(){return b},set:function(t){b=n.utils.getColor(t);l.color(b)}},useInteractiveGuideline:{get:function(){return ft},set:function(n){ft=n;n===!0&&(t.interactive(!1),t.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return ut},set:function(n){ut=n;o.orient(n?"right":"left")}},duration:{get:function(){return s},set:function(n){s=n;u.duration(s);h.duration(s);o.duration(s);p.reset(s)}}}),n.utils.inheritOptions(t,u),n.utils.initOptions(t),t};n.models.discreteBar=function(){"use strict";function o(y){return f.reset(),y.each(function(o){var st=p-i.left-i.right,ot=w-i.top-i.bottom,ft,rt,y,et;b=d3.select(this);n.utils.initSVG(b);o.forEach(function(n,t){n.values.forEach(function(n){n.series=t})});ft=l&&a?[]:o.map(function(n){return n.values.map(function(n,t){return{x:s(n,t),y:u(n,t),y0:n.y0}})});r.domain(l||d3.merge(ft).map(function(n){return n.x})).rangeBands(g||[0,st],.1);t.domain(a||d3.extent(d3.merge(ft).map(function(n){return n.y}).concat(k)));c?t.range(v||[ot-(t.domain()[0]<0?12:0),t.domain()[1]>0?12:0]):t.range(v||[ot,0]);tt=tt||r;it=it||t.copy().range([t(0),t(0)]);var ut=b.selectAll("g.nv-wrap.nv-discretebar").data([o]),ht=ut.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),ct=ht.append("g"),lt=ut.select("g");ct.append("g").attr("class","nv-groups");ut.attr("transform","translate("+i.left+","+i.top+")");rt=ut.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n){return n.key});rt.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);rt.exit().watchTransition(f,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();rt.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover});rt.watchTransition(f,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);y=rt.selectAll("g.nv-bar").data(function(n){return n.values});y.exit().remove();et=y.enter().append("g").attr("transform",function(n,i){return"translate("+(r(s(n,i))+r.rangeBand()*.05)+", "+t(0)+")"}).on("mouseover",function(n,t){d3.select(this).classed("hover",!0);e.elementMouseover({data:n,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(n,t){d3.select(this).classed("hover",!1);e.elementMouseout({data:n,index:t,color:d3.select(this).style("fill")})}).on("mousemove",function(n,t){e.elementMousemove({data:n,index:t,color:d3.select(this).style("fill")})}).on("click",function(n,t){var i=this;e.elementClick({data:n,index:t,color:d3.select(this).style("fill"),event:d3.event,element:i});d3.event.stopPropagation()}).on("dblclick",function(n,t){e.elementDblClick({data:n,index:t,color:d3.select(this).style("fill")});d3.event.stopPropagation()});et.append("rect").attr("height",0).attr("width",r.rangeBand()*.9/o.length);c?(et.append("text").attr("text-anchor","middle"),y.select("text").text(function(n,t){return d(u(n,t))}).watchTransition(f,"discreteBar: bars text").attr("x",r.rangeBand()*.9/2).attr("y",function(n,i){return u(n,i)<0?t(u(n,i))-t(0)+12:-4})):y.selectAll("text").remove();y.attr("class",function(n,t){return u(n,t)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(n,t){return n.color||h(n,t)}).style("stroke",function(n,t){return n.color||h(n,t)}).select("rect").attr("class",nt).watchTransition(f,"discreteBar: bars rect").attr("width",r.rangeBand()*.9/o.length);y.watchTransition(f,"discreteBar: bars").attr("transform",function(n,i){var f=r(s(n,i))+r.rangeBand()*.05,e=u(n,i)<0?t(0):t(0)-t(u(n,i))<1?t(0)-1:t(u(n,i));return"translate("+f+", "+e+")"}).select("rect").attr("height",function(n,i){return Math.max(Math.abs(t(u(n,i))-t(0)),1)});tt=r.copy();it=t.copy()}),f.renderEnd("discreteBar immediate"),o}var i={top:0,right:0,bottom:0,left:0},p=960,w=500,rt=Math.floor(Math.random()*1e4),b,r=d3.scale.ordinal(),t=d3.scale.linear(),s=function(n){return n.x},u=function(n){return n.y},k=[0],h=n.utils.defaultColor(),c=!1,d=d3.format(",.2f"),l,a,g,v,e=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),nt="discreteBar",y=250,tt,it,f=n.utils.renderWatch(e,y);return o.dispatch=e,o.options=n.utils.optionsFunc.bind(o),o._options=Object.create({},{width:{get:function(){return p},set:function(n){p=n}},height:{get:function(){return w},set:function(n){w=n}},forceY:{get:function(){return k},set:function(n){k=n}},showValues:{get:function(){return c},set:function(n){c=n}},x:{get:function(){return s},set:function(n){s=n}},y:{get:function(){return u},set:function(n){u=n}},xScale:{get:function(){return r},set:function(n){r=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return l},set:function(n){l=n}},yDomain:{get:function(){return a},set:function(n){a=n}},xRange:{get:function(){return g},set:function(n){g=n}},yRange:{get:function(){return v},set:function(n){v=n}},valueFormat:{get:function(){return d},set:function(n){d=n}},id:{get:function(){return rt},set:function(n){rt=n}},rectClass:{get:function(){return nt},set:function(n){nt=n}},margin:{get:function(){return i},set:function(n){i.top=n.top!==undefined?n.top:i.top;i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}},color:{get:function(){return h},set:function(t){h=n.utils.getColor(t)}},duration:{get:function(){return y},set:function(n){y=n;f.reset(y)}}}),n.utils.initOptions(o),o};n.models.discreteBarChart=function(){"use strict";function t(c){return o.reset(),o.models(r),w&&o.models(e),b&&o.models(u),c.each(function(o){var p=d3.select(this),ct=this,rt,ut,st,ot;if(n.utils.initSVG(p),rt=n.utils.availableWidth(d,p,i),ut=n.utils.availableHeight(y,p,i),t.update=function(){tt.beforeUpdate();p.transition().duration(f).call(t)},t.container=this,o&&o.length&&o.filter(function(n){return n.values.length}).length)p.selectAll(".nv-noData").remove();else return n.utils.noData(t,p),t;k=r.xScale();h=r.yScale().clamp(!0);var et=p.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([o]),ft=et.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),ht=ft.append("defs"),c=et.select("g");ft.append("g").attr("class","nv-x nv-axis");ft.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");ft.append("g").attr("class","nv-barsWrap");ft.append("g").attr("class","nv-legendWrap");c.attr("transform","translate("+i.left+","+i.top+")");g?(s.width(rt),c.select(".nv-legendWrap").datum(o).call(s),it||s.height()===i.top||(i.top=s.height(),ut=n.utils.availableHeight(y,p,i)),et.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")")):c.select(".nv-legendWrap").selectAll("*").remove();l&&c.select(".nv-y.nv-axis").attr("transform","translate("+rt+",0)");r.width(rt).height(ut);st=c.select(".nv-barsWrap").datum(o.filter(function(n){return!n.disabled}));st.transition().call(r);ht.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect");c.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",k.rangeBand()*(a?2:1)).attr("height",16).attr("x",-k.rangeBand()/(a?1:2));w&&(e.scale(k)._ticks(n.utils.calcTicksX(rt/100,o)).tickSize(-ut,0),c.select(".nv-x.nv-axis").attr("transform","translate(0,"+(h.range()[0]+(r.showValues()&&h.domain()[0]<0?16:0))+")"),c.select(".nv-x.nv-axis").call(e),ot=c.select(".nv-x.nv-axis").selectAll("g"),a&&ot.selectAll("text").attr("transform",function(n,t,i){return"translate(0,"+(i%2==0?"5":"17")+")"}),v&&ot.selectAll(".tick text").attr("transform","rotate("+v+" 0,0)").style("text-anchor",v>0?"start":"end"),nt&&c.selectAll(".tick text").call(n.utils.wrapTicks,t.xAxis.rangeBand()));b&&(u.scale(h)._ticks(n.utils.calcTicksY(ut/36,o)).tickSize(-rt,0),c.select(".nv-y.nv-axis").call(u));c.select(".nv-zeroLine line").attr("x1",0).attr("x2",l?-rt:rt).attr("y1",h(0)).attr("y2",h(0))}),o.renderEnd("discreteBar chart immediate"),t}var r=n.models.discreteBar(),e=n.models.axis(),u=n.models.axis(),s=n.models.legend(),c=n.models.tooltip(),i={top:15,right:10,bottom:50,left:60},it=null,d=null,y=null,p=n.utils.getColor(),g=!1,w=!0,b=!0,l=!1,a=!1,nt=!1,v=0,k,h,rt=null,tt=d3.dispatch("beforeUpdate","renderEnd"),f=250,o;e.orient("bottom").showMaxMin(!1).tickFormat(function(n){return n});u.orient(l?"right":"left").tickFormat(d3.format(",.1f"));c.duration(0).headerEnabled(!1).valueFormatter(function(n,t){return u.tickFormat()(n,t)}).keyFormatter(function(n,t){return e.tickFormat()(n,t)});o=n.utils.renderWatch(tt,f);r.dispatch.on("elementMouseover.tooltip",function(n){n.series={key:t.x()(n.data),value:t.y()(n.data),color:n.color};c.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(){c.hidden(!0)});r.dispatch.on("elementMousemove.tooltip",function(){c()});return t.dispatch=tt,t.discretebar=r,t.legend=s,t.xAxis=e,t.yAxis=u,t.tooltip=c,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return d},set:function(n){d=n}},height:{get:function(){return y},set:function(n){y=n}},showLegend:{get:function(){return g},set:function(n){g=n}},staggerLabels:{get:function(){return a},set:function(n){a=n}},rotateLabels:{get:function(){return v},set:function(n){v=n}},wrapLabels:{get:function(){return nt},set:function(n){nt=!!n}},showXAxis:{get:function(){return w},set:function(n){w=n}},showYAxis:{get:function(){return b},set:function(n){b=n}},noData:{get:function(){return rt},set:function(n){rt=n}},margin:{get:function(){return i},set:function(n){n.top!==undefined&&(i.top=n.top,it=n.top);i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}},duration:{get:function(){return f},set:function(n){f=n;o.reset(f);r.duration(f);e.duration(f);u.duration(f)}},color:{get:function(){return p},set:function(t){p=n.utils.getColor(t);r.color(p);s.color(p)}},rightAlignYAxis:{get:function(){return l},set:function(n){l=n;u.orient(n?"right":"left")}}}),n.utils.inheritOptions(t,r),n.utils.initOptions(t),t};n.models.distribution=function(){"use strict";function t(s){return o.reset(),s.each(function(t){var k=h-(r==="x"?i.left+i.right:i.top+i.bottom),y=r=="x"?"y":"x",p=d3.select(this),s,a;n.utils.initSVG(p);e=e||f;var v=p.selectAll("g.nv-distribution").data([t]),w=v.enter().append("g").attr("class","nvd3 nv-distribution"),d=w.append("g"),b=v.select("g");v.attr("transform","translate("+i.left+","+i.top+")");s=b.selectAll("g.nv-dist").data(function(n){return n},function(n){return n.key});s.enter().append("g");s.attr("class",function(n,t){return"nv-dist nv-series-"+t}).style("stroke",function(n,t){return l(n,t)});a=s.selectAll("line.nv-dist"+r).data(function(n){return n.values});a.enter().append("line").attr(r+"1",function(n,t){return e(u(n,t))}).attr(r+"2",function(n,t){return e(u(n,t))});o.transition(s.exit().selectAll("line.nv-dist"+r),"dist exit").attr(r+"1",function(n,t){return f(u(n,t))}).attr(r+"2",function(n,t){return f(u(n,t))}).style("stroke-opacity",0).remove();a.attr("class",function(n,t){return"nv-dist"+r+" nv-dist"+r+"-"+t}).attr(y+"1",0).attr(y+"2",c);o.transition(a,"dist").attr(r+"1",function(n,t){return f(u(n,t))}).attr(r+"2",function(n,t){return f(u(n,t))});e=f.copy()}),o.renderEnd("distribution immediate"),t}var i={top:0,right:0,bottom:0,left:0},h=400,c=8,r="x",u=function(n){return n[r]},l=n.utils.defaultColor(),f=d3.scale.linear(),s=250,a=d3.dispatch("renderEnd"),e,o=n.utils.renderWatch(a,s);return t.options=n.utils.optionsFunc.bind(t),t.dispatch=a,t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(h=n,t):h},t.axis=function(n){return arguments.length?(r=n,t):r},t.size=function(n){return arguments.length?(c=n,t):c},t.getData=function(n){return arguments.length?(u=d3.functor(n),t):u},t.scale=function(n){return arguments.length?(f=n,t):f},t.color=function(i){return arguments.length?(l=n.utils.getColor(i),t):l},t.duration=function(n){return arguments.length?(s=n,o.reset(s),t):s},t};n.models.focus=function(t){"use strict";function r(g){return c.reset(),c.models(t),v&&c.models(h),y&&c.models(o),g.each(function(c){function ct(n){var r=+(n=="e"),i=r?1:-1,t=g/3;return"M"+.5*i+","+t+"A6,6 0 0 "+r+" "+6.5*i+","+(t+6)+"V"+(2*t-6)+"A6,6 0 0 "+r+" "+.5*i+","+2*t+"ZM"+2.5*i+","+(t+8)+"V"+(2*t-8)+"M"+4.5*i+","+(t+8)+"V"+(2*t-8)}function lt(){i.empty()||i.extent(s);ft.data([i.empty()?f.domain():s]).each(function(n){var t=f(n[0])-f.range()[0],i=tt-f(n[1]);d3.select(this).select(".left").attr("width",t<0?0:t);d3.select(this).select(".right").attr("x",f(n[1])).attr("width",i<0?0:i)})}function ht(n){s=i.empty()?null:i.extent();var t=i.empty()?f.domain():i.extent();if(l.brush({extent:t,brush:i}),lt(),n)l.onBrush(t)}var rt=d3.select(this),tt,g,st,ft,et,ot;n.utils.initSVG(rt);tt=n.utils.availableWidth(k,rt,u);g=d-u.top-u.bottom;r.update=function(){e===0?rt.call(r):rt.transition().duration(e).call(r)};r.container=this;f=t.xScale();w=t.yScale();var ut=rt.selectAll("g.nv-focus").data([c]),it=ut.enter().append("g").attr("class","nvd3 nv-focus").append("g"),nt=ut.select("g");ut.attr("transform","translate("+u.left+","+u.top+")");it.append("g").attr("class","nv-background").append("rect");it.append("g").attr("class","nv-x nv-axis");it.append("g").attr("class","nv-y nv-axis");it.append("g").attr("class","nv-contentWrap");it.append("g").attr("class","nv-brushBackground");it.append("g").attr("class","nv-x nv-brush");p&&nt.select(".nv-y.nv-axis").attr("transform","translate("+tt+",0)");nt.select(".nv-background rect").attr("width",tt).attr("height",g);t.width(tt).height(g).color(c.map(function(n,t){return n.color||a(n,t)}).filter(function(n,t){return!c[t].disabled}));st=nt.select(".nv-contentWrap").datum(c.filter(function(n){return!n.disabled}));d3.transition(st).call(t);i.x(f).on("brush",function(){ht(b)});i.on("brushend",function(){if(!b)l.onBrush(i.empty()?f.domain():i.extent())});s&&i.extent(s);ft=nt.select(".nv-brushBackground").selectAll("g").data([s||i.extent()]);et=ft.enter().append("g");et.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",g);et.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",g);ot=nt.select(".nv-x.nv-brush").call(i);ot.selectAll("rect").attr("height",g);ot.selectAll(".resize").append("path").attr("d",ct);ht(!0);nt.select(".nv-background rect").attr("width",tt).attr("height",g);v&&(h.scale(f)._ticks(n.utils.calcTicksX(tt/100,c)).tickSize(-g,0),nt.select(".nv-x.nv-axis").attr("transform","translate(0,"+w.range()[0]+")"),d3.transition(nt.select(".nv-x.nv-axis")).call(h));y&&(o.scale(w)._ticks(n.utils.calcTicksY(g/36,c)).tickSize(-tt,0),d3.transition(nt.select(".nv-y.nv-axis")).call(o));nt.select(".nv-x.nv-axis").attr("transform","translate(0,"+w.range()[0]+")")}),c.renderEnd("focus immediate"),r}var t=t||n.models.line(),h=n.models.axis(),o=n.models.axis(),i=d3.svg.brush(),u={top:10,right:0,bottom:30,left:0},a=n.utils.defaultColor(),k=null,d=70,v=!0,y=!1,p=!1,f,w,s=null,e=250,l=d3.dispatch("brush","onBrush","renderEnd"),b=!0,c;return t.interactive(!1),t.pointActive(function(){return!1}),c=n.utils.renderWatch(l,e),r.dispatch=l,r.content=t,r.brush=i,r.xAxis=h,r.yAxis=o,r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{width:{get:function(){return k},set:function(n){k=n}},height:{get:function(){return d},set:function(n){d=n}},showXAxis:{get:function(){return v},set:function(n){v=n}},showYAxis:{get:function(){return y},set:function(n){y=n}},brushExtent:{get:function(){return s},set:function(n){s=n}},syncBrushing:{get:function(){return b},set:function(n){b=n}},margin:{get:function(){return u},set:function(n){u.top=n.top!==undefined?n.top:u.top;u.right=n.right!==undefined?n.right:u.right;u.bottom=n.bottom!==undefined?n.bottom:u.bottom;u.left=n.left!==undefined?n.left:u.left}},duration:{get:function(){return e},set:function(n){e=n;c.reset(e);t.duration(e);h.duration(e);o.duration(e)}},color:{get:function(){return a},set:function(i){a=n.utils.getColor(i);t.color(a)}},interpolate:{get:function(){return t.interpolate()},set:function(n){t.interpolate(n)}},xTickFormat:{get:function(){return h.tickFormat()},set:function(n){h.tickFormat(n)}},yTickFormat:{get:function(){return o.tickFormat()},set:function(n){o.tickFormat(n)}},x:{get:function(){return t.x()},set:function(n){t.x(n)}},y:{get:function(){return t.y()},set:function(n){t.y(n)}},rightAlignYAxis:{get:function(){return p},set:function(n){p=n;o.orient(p?"right":"left")}}}),n.utils.inheritOptions(r,t),n.utils.initOptions(r),r};n.models.forceDirectedGraph=function(){"use strict";function r(k){return g.reset(),k.each(function(k){var d,g,nt;if(t=d3.select(this),n.utils.initSVG(t),d=n.utils.availableWidth(e,t,i),g=n.utils.availableHeight(o,t,i),t.attr("width",d).attr("height",g),k&&k.links&&k.nodes)t.selectAll(".nv-noData").remove();else return n.utils.noData(r,t),r;t.selectAll("*").remove();nt=new Set;k.nodes.forEach(function(n){var t=Object.keys(n);t.forEach(function(n){nt.add(n)})});var it=d3.layout.force().nodes(k.nodes).links(k.links).size([d,g]).linkStrength(s).friction(h).linkDistance(c).charge(l).gravity(a).theta(v).alpha(y).start(),rt=t.selectAll(".link").data(k.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",function(n){return Math.sqrt(n.value)}),tt=t.selectAll(".node").data(k.nodes).enter().append("g").attr("class","nv-force-node").call(it.drag);tt.append("circle").attr("r",p).style("fill",function(n){return u(n)}).on("mouseover",function(n){t.select(".nv-series-"+n.seriesIndex+" .nv-distx-"+n.pointIndex).attr("y1",n.py);t.select(".nv-series-"+n.seriesIndex+" .nv-disty-"+n.pointIndex).attr("x2",n.px);var i=u(n);n.series=[];nt.forEach(function(t){n.series.push({color:i,key:t,value:n[t]})});f.data(n).hidden(!1)}).on("mouseout",function(){f.hidden(!0)});f.headerFormatter(function(){return"Node"});b(rt);w(tt);it.on("tick",function(){rt.attr("x1",function(n){return n.source.x}).attr("y1",function(n){return n.source.y}).attr("x2",function(n){return n.target.x}).attr("y2",function(n){return n.target.y});tt.attr("transform",function(n){return"translate("+n.x+", "+n.y+")"})})}),r}var i={top:2,right:0,bottom:2,left:0},e=400,o=32,t=null,k=d3.dispatch("renderEnd"),u=n.utils.getColor(["#000"]),f=n.models.tooltip(),d=null,s=.1,h=.9,c=30,l=-120,a=.1,v=.8,y=.1,p=5,w=function(){},b=function(){},g=n.utils.renderWatch(k);return r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{width:{get:function(){return e},set:function(n){e=n}},height:{get:function(){return o},set:function(n){o=n}},linkStrength:{get:function(){return s},set:function(n){s=n}},friction:{get:function(){return h},set:function(n){h=n}},linkDist:{get:function(){return c},set:function(n){c=n}},charge:{get:function(){return l},set:function(n){l=n}},gravity:{get:function(){return a},set:function(n){a=n}},theta:{get:function(){return v},set:function(n){v=n}},alpha:{get:function(){return y},set:function(n){y=n}},radius:{get:function(){return p},set:function(n){p=n}},x:{get:function(){return getX},set:function(n){getX=d3.functor(n)}},y:{get:function(){return getY},set:function(n){getY=d3.functor(n)}},margin:{get:function(){return i},set:function(n){i.top=n.top!==undefined?n.top:i.top;i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}},color:{get:function(){return u},set:function(t){u=n.utils.getColor(t)}},noData:{get:function(){return d},set:function(n){d=n}},nodeExtras:{get:function(){return w},set:function(n){w=n}},linkExtras:{get:function(){return b},set:function(n){b=n}}}),r.dispatch=k,r.tooltip=f,n.utils.initOptions(r),r};n.models.furiousLegend=function(){"use strict";function s(b){function k(n,t){return i!="furious"?"#000":r?n.disengaged?e(n,t):"#fff":r?void 0:!n.disabled?"#fff":e(n,t)}function d(n,t){return r&&i=="furious"?n.disengaged?"#fff":e(n,t):!n.disabled?e(n,t):"#fff"}return b.each(function(s){var bt=h-t.left-t.right,kt=d3.select(this),b,rt,ht,dt,at,ut,nt,tt,vt,et,yt;n.utils.initSVG(kt);var lt=kt.selectAll("g.nv-legend").data([s]),gt=lt.enter().append("g").attr("class","nvd3 nv-legend").append("g"),st=lt.select("g");lt.attr("transform","translate("+t.left+","+t.top+")");b=st.selectAll(".nv-series").data(function(n){return i!="furious"?n:n.filter(function(n){return r?!0:!n.disengaged})});rt=b.enter().append("g").attr("class","nv-series");i=="classic"?(rt.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),ht=b.select("circle")):i=="furious"&&(rt.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),ht=b.select("rect"),rt.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"><\/path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"><\/path>').attr("transform","translate(-10,-8)scale(0.5)"),dt=b.select(".nv-check-box"),dt.each(function(n,t){d3.select(this).selectAll("path").attr("stroke",k(n,t))}));rt.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");at=b.select("text.nv-legend-text");b.on("mouseover",function(n,t){o.legendMouseover(n,t)}).on("mouseout",function(n,t){o.legendMouseout(n,t)}).on("click",function(n,t){var u,f;o.legendClick(n,t);u=b.data();v&&(i=="classic"?w?(u.forEach(function(n){n.disabled=!0}),n.disabled=!1):(n.disabled=!n.disabled,u.every(function(n){return n.disabled})&&u.forEach(function(n){n.disabled=!1})):i=="furious"&&(r?(n.disengaged=!n.disengaged,n.userDisabled=n.userDisabled==undefined?!!n.disabled:n.userDisabled,n.disabled=n.disengaged||n.userDisabled):r||(n.disabled=!n.disabled,n.userDisabled=n.disabled,f=u.filter(function(n){return!n.disengaged}),f.every(function(n){return n.userDisabled})&&u.forEach(function(n){n.disabled=n.userDisabled=!1}))),o.stateChange({disabled:u.map(function(n){return!!n.disabled}),disengaged:u.map(function(n){return!!n.disengaged})}))}).on("dblclick",function(n,t){if((i!="furious"||!r)&&(o.legendDblclick(n,t),v)){var u=b.data();u.forEach(function(n){n.disabled=!0;i=="furious"&&(n.userDisabled=n.disabled)});n.disabled=!1;i=="furious"&&(n.userDisabled=n.disabled);o.stateChange({disabled:u.map(function(n){return!!n.disabled})})}});b.classed("nv-disabled",function(n){return n.userDisabled});b.exit().remove();at.attr("fill",k).text(function(n){return f(u(n))});switch(i){case"furious":ut=23;break;case"classic":ut=20}if(y){nt=[];b.each(function(t){var i,e,r;f(u(t))&&f(u(t)).length>l?(e=f(u(t)).substring(0,l),i=d3.select(this).select("text").text(e+"..."),d3.select(this).append("svg:title").text(f(u(t)))):i=d3.select(this).select("text");try{if(r=i.node().getComputedTextLength(),r<=0)throw Error();}catch(o){r=n.utils.calcApproxTextWidth(i)}nt.push(r+a)});for(var g=0,ft=0,it=[];ft<bt&&g<nt.length;)it[g]=nt[g],ft+=nt[g++];for(g===0&&(g=1);ft>bt&&g>1;){for(it=[],g--,tt=0;tt<nt.length;tt++)nt[tt]>(it[tt%g]||0)&&(it[tt%g]=nt[tt]);ft=it.reduce(function(n,t){return n+t})}for(vt=[],et=0,yt=0;et<g;et++)vt[et]=yt,yt+=it[et];b.attr("transform",function(n,t){return"translate("+vt[t%g]+","+(5+Math.floor(t/g)*ut)+")"});p?st.attr("transform","translate("+(h-t.right-ft)+","+t.top+")"):st.attr("transform","translate(0,"+t.top+")");c=t.top+t.bottom+Math.ceil(nt.length/g)*ut}else{var pt=5,ot=5,wt=0,ct;b.attr("transform",function(){var n=d3.select(this).select("text").node().getComputedTextLength()+a;return ct=ot,h<t.left+t.right+ct+n&&(ot=ct=5,pt+=ut),ot+=n,ot>wt&&(wt=ot),"translate("+ct+","+pt+")"});st.attr("transform","translate("+(h-t.right-wt)+","+t.top+")");c=t.top+t.bottom+pt+15}i=="furious"&&ht.attr("width",function(n,t){return at[0][t].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);ht.style("fill",d).style("stroke",function(n,t){return n.color||e(n,t)})}),s}var t={top:5,right:0,bottom:5,left:0},h=400,c=20,u=function(n){return n.key},f=function(n){return n},e=n.utils.getColor(),l=20,y=!0,a=28,p=!0,v=!0,w=!1,r=!1,o=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),i="classic";return s.dispatch=o,s.options=n.utils.optionsFunc.bind(s),s._options=Object.create({},{width:{get:function(){return h},set:function(n){h=n}},height:{get:function(){return c},set:function(n){c=n}},key:{get:function(){return u},set:function(n){u=n}},keyFormatter:{get:function(){return f},set:function(n){f=n}},align:{get:function(){return y},set:function(n){y=n}},rightAlign:{get:function(){return p},set:function(n){p=n}},maxKeyLength:{get:function(){return l},set:function(n){l=n}},padding:{get:function(){return a},set:function(n){a=n}},updateState:{get:function(){return v},set:function(n){v=n}},radioButtonMode:{get:function(){return w},set:function(n){w=n}},expanded:{get:function(){return r},set:function(n){r=n}},vers:{get:function(){return i},set:function(n){i=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},color:{get:function(){return e},set:function(t){e=n.utils.getColor(t)}}}),n.utils.initOptions(s),s};n.models.historicalBar=function(){"use strict";function f(it){return it.each(function(f){var it,ft,ut;a.reset();o=d3.select(this);it=n.utils.availableWidth(v,o,r);ft=n.utils.availableHeight(y,o,r);n.utils.initSVG(o);i.domain(g||d3.extent(f[0].values.map(c).concat(p)));b?i.range(l||[it*.5/f[0].values.length,it*(f[0].values.length-.5)/f[0].values.length]):i.range(l||[0,it]);t.domain(nt||d3.extent(f[0].values.map(u).concat(w))).range(tt||[ft,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]+t.domain()[0]*.01,t.domain()[1]-t.domain()[1]*.01]):t.domain([-1,1]));var rt=o.selectAll("g.nv-wrap.nv-historicalBar-"+e).data([f[0].values]),et=rt.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+e),ot=et.append("defs"),st=et.append("g"),ht=rt.select("g");st.append("g").attr("class","nv-bars");rt.attr("transform","translate("+r.left+","+r.top+")");o.on("click",function(n,t){s.chartClick({data:n,index:t,pos:d3.event,id:e})});ot.append("clipPath").attr("id","nv-chart-clip-path-"+e).append("rect");rt.select("#nv-chart-clip-path-"+e+" rect").attr("width",it).attr("height",ft);ht.attr("clip-path",k?"url(#nv-chart-clip-path-"+e+")":"");ut=rt.select(".nv-bars").selectAll(".nv-bar").data(function(n){return n},function(n,t){return c(n,t)});ut.exit().remove();ut.enter().append("rect").attr("x",0).attr("y",function(i,r){return n.utils.NaNtoZero(t(Math.max(0,u(i,r))))}).attr("height",function(i,r){return n.utils.NaNtoZero(Math.abs(t(u(i,r))-t(0)))}).attr("transform",function(n,t){return"translate("+(i(c(n,t))-it/f[0].values.length*.45)+",0)"}).on("mouseover",function(n,t){h&&(d3.select(this).classed("hover",!0),s.elementMouseover({data:n,index:t,color:d3.select(this).style("fill")}))}).on("mouseout",function(n,t){h&&(d3.select(this).classed("hover",!1),s.elementMouseout({data:n,index:t,color:d3.select(this).style("fill")}))}).on("mousemove",function(n,t){h&&s.elementMousemove({data:n,index:t,color:d3.select(this).style("fill")})}).on("click",function(n,t){if(h){var i=this;s.elementClick({data:n,index:t,color:d3.select(this).style("fill"),event:d3.event,element:i});d3.event.stopPropagation()}}).on("dblclick",function(n,t){h&&(s.elementDblClick({data:n,index:t,color:d3.select(this).style("fill")}),d3.event.stopPropagation())});ut.attr("fill",function(n,t){return d(n,t)}).attr("class",function(n,t,i){return(u(n,t)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+i+"-"+t}).watchTransition(a,"bars").attr("transform",function(n,t){return"translate("+(i(c(n,t))-it/f[0].values.length*.45)+",0)"}).attr("width",it/f[0].values.length*.9);ut.watchTransition(a,"bars").attr("y",function(i,r){var f=u(i,r)<0?t(0):t(0)-t(u(i,r))<1?t(0)-1:t(u(i,r));return n.utils.NaNtoZero(f)}).attr("height",function(i,r){return n.utils.NaNtoZero(Math.max(Math.abs(t(u(i,r))-t(0)),1))})}),a.renderEnd("historicalBar immediate"),f}var r={top:0,right:0,bottom:0,left:0},v=null,y=null,e=Math.floor(Math.random()*1e4),o=null,i=d3.scale.linear(),t=d3.scale.linear(),c=function(n){return n.x},u=function(n){return n.y},p=[],w=[0],b=!1,k=!0,d=n.utils.defaultColor(),g,nt,l,tt,s=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),h=!0,a=n.utils.renderWatch(s,0);return f.highlightPoint=function(n,t){o.select(".nv-bars .nv-bar-0-"+n).classed("hover",t)},f.clearHighlights=function(){o.select(".nv-bars .nv-bar.hover").classed("hover",!1)},f.dispatch=s,f.options=n.utils.optionsFunc.bind(f),f._options=Object.create({},{width:{get:function(){return v},set:function(n){v=n}},height:{get:function(){return y},set:function(n){y=n}},forceX:{get:function(){return p},set:function(n){p=n}},forceY:{get:function(){return w},set:function(n){w=n}},padData:{get:function(){return b},set:function(n){b=n}},x:{get:function(){return c},set:function(n){c=n}},y:{get:function(){return u},set:function(n){u=n}},xScale:{get:function(){return i},set:function(n){i=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return g},set:function(n){g=n}},yDomain:{get:function(){return nt},set:function(n){nt=n}},xRange:{get:function(){return l},set:function(n){l=n}},yRange:{get:function(){return tt},set:function(n){tt=n}},clipEdge:{get:function(){return k},set:function(n){k=n}},id:{get:function(){return e},set:function(n){e=n}},interactive:{get:function(){return h},set:function(n){h=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},color:{get:function(){return d},set:function(t){d=n.utils.getColor(t)}}}),n.utils.initOptions(f),f};n.models.historicalBarChart=function(t){"use strict";function i(t){return t.each(function(p){var ft,vt,et,st,ct,at;if(c.reset(),c.models(u),b&&c.models(o),k&&c.models(e),ft=d3.select(this),vt=this,n.utils.initSVG(ft),et=n.utils.availableWidth(g,ft,r),st=n.utils.availableHeight(w,ft,r),i.update=function(){ft.transition().duration(y).call(i)},i.container=this,f.disabled=p.map(function(n){return!!n.disabled}),!a){a={};for(ct in f)a[ct]=f[ct]instanceof Array?f[ct].slice(0):f[ct]}if(p&&p.length&&p.filter(function(n){return n.values.length}).length)ft.selectAll(".nv-noData").remove();else return n.utils.noData(i,ft),i;it=u.xScale();rt=u.yScale();var ht=ft.selectAll("g.nv-wrap.nv-historicalBarChart").data([p]),lt=ht.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),ot=ht.select("g");lt.append("g").attr("class","nv-x nv-axis");lt.append("g").attr("class","nv-y nv-axis");lt.append("g").attr("class","nv-barsWrap");lt.append("g").attr("class","nv-legendWrap");lt.append("g").attr("class","nv-interactive");nt?(s.width(et),ot.select(".nv-legendWrap").datum(p).call(s),ut||s.height()===r.top||(r.top=s.height(),st=n.utils.availableHeight(w,ft,r)),ht.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")")):ot.select(".nv-legendWrap").selectAll("*").remove();ht.attr("transform","translate("+r.left+","+r.top+")");d&&ot.select(".nv-y.nv-axis").attr("transform","translate("+et+",0)");tt&&(h.width(et).height(st).margin({left:r.left,top:r.top}).svgContainer(ft).xScale(it),ht.select(".nv-interactive").call(h));u.width(et).height(st).color(p.map(function(n,t){return n.color||l(n,t)}).filter(function(n,t){return!p[t].disabled}));at=ot.select(".nv-barsWrap").datum(p.filter(function(n){return!n.disabled}));at.transition().call(u);b&&(o.scale(it)._ticks(n.utils.calcTicksX(et/100,p)).tickSize(-st,0),ot.select(".nv-x.nv-axis").attr("transform","translate(0,"+rt.range()[0]+")"),ot.select(".nv-x.nv-axis").transition().call(o));k&&(e.scale(rt)._ticks(n.utils.calcTicksY(st/36,p)).tickSize(-et,0),ot.select(".nv-y.nv-axis").transition().call(e));h.dispatch.on("elementMousemove",function(t){var f,r,s,c,a;u.clearHighlights();c=[];p.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(e){r=n.interactiveBisect(e.values,t.pointXValue,i.x());u.highlightPoint(r,!0);var o=e.values[r];o!==undefined&&(f===undefined&&(f=o),s===undefined&&(s=i.xScale()(i.x()(o,r))),c.push({key:e.key,value:i.y()(o,r),color:l(e,e.seriesIndex),data:e.values[r]}))});a=o.tickFormat()(i.x()(f,r));h.tooltip.valueFormatter(function(n){return e.tickFormat()(n)}).data({value:a,index:r,series:c})();h.renderGuideLine(s)});h.dispatch.on("elementMouseout",function(){v.tooltipHide();u.clearHighlights()});s.dispatch.on("legendClick",function(n){n.disabled=!n.disabled;p.filter(function(n){return!n.disabled}).length||p.map(function(n){return n.disabled=!1,ht.selectAll(".nv-series").classed("disabled",!1),n});f.disabled=p.map(function(n){return!!n.disabled});v.stateChange(f);t.transition().call(i)});s.dispatch.on("legendDblclick",function(n){p.forEach(function(n){n.disabled=!0});n.disabled=!1;f.disabled=p.map(function(n){return!!n.disabled});v.stateChange(f);i.update()});v.on("changeState",function(n){typeof n.disabled!="undefined"&&(p.forEach(function(t,i){t.disabled=n.disabled[i]}),f.disabled=n.disabled);i.update()})}),c.renderEnd("historicalBarChart immediate"),i}var u=t||n.models.historicalBar(),o=n.models.axis(),e=n.models.axis(),s=n.models.legend(),h=n.interactiveGuideline(),p=n.models.tooltip(),r={top:30,right:90,bottom:50,left:90},ut=null,l=n.utils.defaultColor(),g=null,w=null,nt=!1,b=!0,k=!0,d=!1,tt=!1,it,rt,f={},a=null,ft=null,v=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),y=250,c;o.orient("bottom").tickPadding(7);e.orient(d?"right":"left");p.duration(0).headerEnabled(!1).valueFormatter(function(n,t){return e.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});c=n.utils.renderWatch(v,0);u.dispatch.on("elementMouseover.tooltip",function(n){n.series={key:i.x()(n.data),value:i.y()(n.data),color:n.color};p.data(n).hidden(!1)});u.dispatch.on("elementMouseout.tooltip",function(){p.hidden(!0)});u.dispatch.on("elementMousemove.tooltip",function(){p()});return i.dispatch=v,i.bars=u,i.legend=s,i.xAxis=o,i.yAxis=e,i.interactiveLayer=h,i.tooltip=p,i.options=n.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return g},set:function(n){g=n}},height:{get:function(){return w},set:function(n){w=n}},showLegend:{get:function(){return nt},set:function(n){nt=n}},showXAxis:{get:function(){return b},set:function(n){b=n}},showYAxis:{get:function(){return k},set:function(n){k=n}},defaultState:{get:function(){return a},set:function(n){a=n}},noData:{get:function(){return ft},set:function(n){ft=n}},margin:{get:function(){return r},set:function(n){n.top!==undefined&&(r.top=n.top,ut=n.top);r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},color:{get:function(){return l},set:function(t){l=n.utils.getColor(t);s.color(l);u.color(l)}},duration:{get:function(){return y},set:function(n){y=n;c.reset(y);e.duration(y);o.duration(y)}},rightAlignYAxis:{get:function(){return d},set:function(n){d=n;e.orient(n?"right":"left")}},useInteractiveGuideline:{get:function(){return tt},set:function(n){tt=n;n===!0&&i.interactive(!1)}}}),n.utils.inheritOptions(i,u),n.utils.initOptions(i),i};n.models.ohlcBarChart=function(){var t=n.models.historicalBarChart(n.models.ohlcBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(n){var i=n.series[0].data,r=i.open<i.close?"2ca02c":"d62728";return'<h3 style="color: #'+r+'">'+n.value+"<\/h3><table><tr><td>open:<\/td><td>"+t.yAxis.tickFormat()(i.open)+"<\/td><\/tr><tr><td>close:<\/td><td>"+t.yAxis.tickFormat()(i.close)+"<\/td><\/tr><tr><td>high<\/td><td>"+t.yAxis.tickFormat()(i.high)+"<\/td><\/tr><tr><td>low:<\/td><td>"+t.yAxis.tickFormat()(i.low)+"<\/td><\/tr><\/table>"}),t};n.models.candlestickBarChart=function(){var t=n.models.historicalBarChart(n.models.candlestickBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(n){var i=n.series[0].data,r=i.open<i.close?"2ca02c":"d62728";return'<h3 style="color: #'+r+'">'+n.value+"<\/h3><table><tr><td>open:<\/td><td>"+t.yAxis.tickFormat()(i.open)+"<\/td><\/tr><tr><td>close:<\/td><td>"+t.yAxis.tickFormat()(i.close)+"<\/td><\/tr><tr><td>high<\/td><td>"+t.yAxis.tickFormat()(i.high)+"<\/td><\/tr><tr><td>low:<\/td><td>"+t.yAxis.tickFormat()(i.low)+"<\/td><\/tr><\/table>"}),t};n.models.legend=function(){"use strict";function o(b){function k(n,t){return i!="furious"?"#000":r?n.disengaged?"#000":"#fff":r?void 0:(n.color||(n.color=c(n,t)),!n.disabled?"#fff":n.color)}function d(n,t){return r&&i=="furious"?n.disengaged?"#eee":n.color||c(n,t):n.color||c(n,t)}function g(n){return r&&i=="furious"?1:!n.disabled?1:0}return b.each(function(o){var bt=s-t.left-t.right,kt=d3.select(this),b,ot,at,it,dt,vt,nt,tt,c,rt,ut,yt,st,pt,gt;n.utils.initSVG(kt);var lt=kt.selectAll("g.nv-legend").data([o]),ni=lt.enter().append("g").attr("class","nvd3 nv-legend").append("g"),et=lt.select("g");v?lt.attr("transform","translate("+-t.right+","+t.top+")"):lt.attr("transform","translate("+t.left+","+t.top+")");b=et.selectAll(".nv-series").data(function(n){return i!="furious"?n:n.filter(function(n){return r?!0:!n.disengaged})});ot=b.enter().append("g").attr("class","nv-series");switch(i){case"furious":it=23;break;case"classic":it=20}i=="classic"?(ot.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),at=b.select(".nv-legend-symbol")):i=="furious"&&(ot.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),at=b.select(".nv-legend-symbol"),ot.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"><\/path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"><\/path>').attr("transform","translate(-10,-8)scale(0.5)"),dt=b.select(".nv-check-box"),dt.each(function(n,t){d3.select(this).selectAll("path").attr("stroke",k(n,t))}));ot.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");vt=b.select("text.nv-legend-text");b.on("mouseover",function(n,t){e.legendMouseover(n,t)}).on("mouseout",function(n,t){e.legendMouseout(n,t)}).on("click",function(n,t){var u,f;e.legendClick(n,t);u=b.data();y&&(i=="classic"?w?(u.forEach(function(n){n.disabled=!0}),n.disabled=!1):(n.disabled=!n.disabled,u.every(function(n){return n.disabled})&&u.forEach(function(n){n.disabled=!1})):i=="furious"&&(r?(n.disengaged=!n.disengaged,n.userDisabled=n.userDisabled==undefined?!!n.disabled:n.userDisabled,n.disabled=n.disengaged||n.userDisabled):r||(n.disabled=!n.disabled,n.userDisabled=n.disabled,f=u.filter(function(n){return!n.disengaged}),f.every(function(n){return n.userDisabled})&&u.forEach(function(n){n.disabled=n.userDisabled=!1}))),e.stateChange({disabled:u.map(function(n){return!!n.disabled}),disengaged:u.map(function(n){return!!n.disengaged})}))}).on("dblclick",function(n,t){if((i!="furious"||!r)&&(e.legendDblclick(n,t),y)){var u=b.data();u.forEach(function(n){n.disabled=!0;i=="furious"&&(n.userDisabled=n.disabled)});n.disabled=!1;i=="furious"&&(n.userDisabled=n.disabled);e.stateChange({disabled:u.map(function(n){return!!n.disabled})})}});if(b.classed("nv-disabled",function(n){return n.userDisabled}),b.exit().remove(),vt.attr("fill",k).text(function(n){return f(u(n))}),nt=0,p){for(tt=[],b.each(function(t){var i,e,r;f(u(t))&&f(u(t)).length>l?(e=f(u(t)).substring(0,l),i=d3.select(this).select("text").text(e+"..."),d3.select(this).append("svg:title").text(f(u(t)))):i=d3.select(this).select("text");try{if(r=i.node().getComputedTextLength(),r<=0)throw Error();}catch(o){r=n.utils.calcApproxTextWidth(i)}tt.push(r+a)}),c=0,rt=[],nt=0;nt<bt&&c<tt.length;)rt[c]=tt[c],nt+=tt[c++];for(c===0&&(c=1);nt>bt&&c>1;){for(rt=[],c--,ut=0;ut<tt.length;ut++)tt[ut]>(rt[ut%c]||0)&&(rt[ut%c]=tt[ut]);nt=rt.reduce(function(n,t){return n+t})}for(yt=[],st=0,pt=0;st<c;st++)yt[st]=pt,pt+=rt[st];b.attr("transform",function(n,t){return"translate("+yt[t%c]+","+(5+Math.floor(t/c)*it)+")"});v?et.attr("transform","translate("+(s-t.right-nt)+","+t.top+")"):et.attr("transform","translate(0,"+t.top+")");h=t.top+t.bottom+Math.ceil(tt.length/c)*it}else{var wt=5,ht=5,ct=0,ft;b.attr("transform",function(){var n=d3.select(this).select("text").node().getComputedTextLength()+a;return ft=ht,s<t.left+t.right+ft+n&&(ht=ft=5,wt+=it),ht+=n,ht>ct&&(ct=ht),nt<ft+ct&&(nt=ft+ct),"translate("+ft+","+wt+")"});et.attr("transform","translate("+(s-t.right-ct)+","+t.top+")");h=t.top+t.bottom+wt+15}i=="furious"&&(at.attr("width",function(n,t){return vt[0][t].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),ni.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),gt=et.select(".nv-legend-bg"),gt.transition().duration(300).attr("x",-it).attr("width",nt+it-12).attr("height",h+10).attr("y",-t.top-10).attr("opacity",r?1:0));at.style("fill",d).style("fill-opacity",g).style("stroke",d)}),o}var t={top:5,right:0,bottom:5,left:0},s=400,h=20,u=function(n){return n.key},f=function(n){return n},c=n.utils.getColor(),l=20,p=!0,a=32,v=!0,y=!0,w=!1,r=!1,e=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),i="classic";return o.dispatch=e,o.options=n.utils.optionsFunc.bind(o),o._options=Object.create({},{width:{get:function(){return s},set:function(n){s=n}},height:{get:function(){return h},set:function(n){h=n}},key:{get:function(){return u},set:function(n){u=n}},keyFormatter:{get:function(){return f},set:function(n){f=n}},align:{get:function(){return p},set:function(n){p=n}},maxKeyLength:{get:function(){return l},set:function(n){l=n}},rightAlign:{get:function(){return v},set:function(n){v=n}},padding:{get:function(){return a},set:function(n){a=n}},updateState:{get:function(){return y},set:function(n){y=n}},radioButtonMode:{get:function(){return w},set:function(n){w=n}},expanded:{get:function(){return r},set:function(n){r=n}},vers:{get:function(){return i},set:function(n){i=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},color:{get:function(){return c},set:function(t){c=n.utils.getColor(t)}}}),n.utils.initOptions(o),o};n.models.line=function(){"use strict";function u(y){return e.reset(),e.models(t),y.each(function(u){var it,tt,rt,y,ut,ft;l=d3.select(this);it=n.utils.availableWidth(k,l,r);tt=n.utils.availableHeight(d,l,r);n.utils.initSVG(l);v=t.xScale();i=t.yScale();w=w||v;c=c||i;var p=l.selectAll("g.nv-wrap.nv-line").data([u]),et=p.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),st=et.append("defs"),ot=et.append("g"),ht=p.select("g");ot.append("g").attr("class","nv-groups");ot.append("g").attr("class","nv-scatterWrap");p.attr("transform","translate("+r.left+","+r.top+")");t.width(it).height(tt);rt=p.select(".nv-scatterWrap");rt.call(t);st.append("clipPath").attr("id","nv-edge-clip-"+t.id()).append("rect");p.select("#nv-edge-clip-"+t.id()+" rect").attr("width",it).attr("height",tt>0?tt:0);ht.attr("clip-path",b?"url(#nv-edge-clip-"+t.id()+")":"");rt.attr("clip-path",b?"url(#nv-edge-clip-"+t.id()+")":"");y=p.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n){return n.key});y.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(n){return n.strokeWidth||nt}).style("fill-opacity",1e-6);y.exit().remove();y.attr("class",function(n,t){return(n.classed||"")+" nv-group nv-series-"+t}).classed("hover",function(n){return n.hover}).style("fill",function(n,t){return a(n,t)}).style("stroke",function(n,t){return a(n,t)});y.watchTransition(e,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(n){return n.fillOpacity||.5});ut=y.selectAll("path.nv-area").data(function(n){return g(n)?[n]:[]});ut.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(h).defined(s).x(function(t,i){return n.utils.NaNtoZero(w(o(t,i)))}).y0(function(t,i){return n.utils.NaNtoZero(c(f(t,i)))}).y1(function(){return c(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[t.values])});y.exit().selectAll("path.nv-area").remove();ut.watchTransition(e,"line: areaPaths").attr("d",function(t){return d3.svg.area().interpolate(h).defined(s).x(function(t,i){return n.utils.NaNtoZero(v(o(t,i)))}).y0(function(t,r){return n.utils.NaNtoZero(i(f(t,r)))}).y1(function(){return i(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[t.values])});ft=y.selectAll("path.nv-line").data(function(n){return[n.values]});ft.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(h).defined(s).x(function(t,i){return n.utils.NaNtoZero(w(o(t,i)))}).y(function(t,i){return n.utils.NaNtoZero(c(f(t,i)))}));ft.watchTransition(e,"line: linePaths").attr("d",d3.svg.line().interpolate(h).defined(s).x(function(t,i){return n.utils.NaNtoZero(v(o(t,i)))}).y(function(t,r){return n.utils.NaNtoZero(i(f(t,r)))}));w=v.copy();c=i.copy()}),e.renderEnd("line immediate"),u}var t=n.models.scatter(),r={top:0,right:0,bottom:0,left:0},k=960,d=500,l=null,nt=1.5,a=n.utils.defaultColor(),o=function(n){return n.x},f=function(n){return n.y},s=function(n,t){return!isNaN(f(n,t))&&f(n,t)!==null},g=function(n){return n.area},b=!1,v,i,h="linear",y=250,p=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd"),w,c,e;t.pointSize(16).pointDomain([16,256]);e=n.utils.renderWatch(p,y);u.dispatch=p;u.scatter=t;t.dispatch.on("elementClick",function(){p.elementClick.apply(this,arguments)});t.dispatch.on("elementMouseover",function(){p.elementMouseover.apply(this,arguments)});t.dispatch.on("elementMouseout",function(){p.elementMouseout.apply(this,arguments)});return u.options=n.utils.optionsFunc.bind(u),u._options=Object.create({},{width:{get:function(){return k},set:function(n){k=n}},height:{get:function(){return d},set:function(n){d=n}},defined:{get:function(){return s},set:function(n){s=n}},interpolate:{get:function(){return h},set:function(n){h=n}},clipEdge:{get:function(){return b},set:function(n){b=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return y},set:function(n){y=n;e.reset(y);t.duration(y)}},isArea:{get:function(){return g},set:function(n){g=d3.functor(n)}},x:{get:function(){return o},set:function(n){o=n;t.x(n)}},y:{get:function(){return f},set:function(n){f=n;t.y(n)}},color:{get:function(){return a},set:function(i){a=n.utils.getColor(i);t.color(a)}}}),n.utils.inheritOptions(u,t),n.utils.initOptions(u),u};n.models.lineChart=function(){"use strict";function t(d){return y.reset(),y.models(r),p&&y.models(o),w&&y.models(e),d.each(function(y){function kt(){p&&ct.select(".nv-focus .nv-x.nv-axis").transition().duration(f).call(o)}function dt(){w&&ct.select(".nv-focus .nv-y.nv-axis").transition().duration(f).call(e)}function gt(n){var t=ct.select(".nv-focus .nv-linesWrap").datum(y.filter(function(n){return!n.disabled}).map(function(t){return{key:t.key,area:t.area,classed:t.classed,values:t.values.filter(function(t,i){return r.x()(t,i)>=n[0]&&r.x()(t,i)<=n[1]}),disableTooltip:t.disableTooltip}}));t.transition().duration(f).call(r);kt();dt()}var ot=d3.select(this),lt,d,yt,vt,ni,bt,wt;if(n.utils.initSVG(ot),lt=n.utils.availableWidth(rt,ot,u),d=n.utils.availableHeight(g,ot,u)-(a?i.height():0),t.update=function(){f===0?ot.call(t):ot.transition().duration(f).call(t)},t.container=this,h.setter(ht(y),t.update).getter(st(y)).update(),h.disabled=y.map(function(n){return!!n.disabled}),!v){v={};for(yt in h)v[yt]=h[yt]instanceof Array?h[yt].slice(0):h[yt]}if(y&&y.length&&y.filter(function(n){return n.values.length}).length)ot.selectAll(".nv-noData").remove();else return n.utils.noData(t,ot),t;i.dispatch.on("onBrush",function(n){gt(n)});it=r.xScale();et=r.yScale();var at=ot.selectAll("g.nv-wrap.nv-lineChart").data([y]),pt=at.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),ct=at.select("g");pt.append("g").attr("class","nv-legendWrap");vt=pt.append("g").attr("class","nv-focus");vt.append("g").attr("class","nv-background").append("rect");vt.append("g").attr("class","nv-x nv-axis");vt.append("g").attr("class","nv-y nv-axis");vt.append("g").attr("class","nv-linesWrap");vt.append("g").attr("class","nv-interactive");ni=pt.append("g").attr("class","nv-focusWrap");ut?(c.width(lt),ct.select(".nv-legendWrap").datum(y).call(c),nt==="bottom"?at.select(".nv-legendWrap").attr("transform","translate(0,"+d+")"):nt==="top"&&(ft||c.height()===u.top||(u.top=c.height(),d=n.utils.availableHeight(g,ot,u)-(a?i.height():0)),at.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")"))):ct.select(".nv-legendWrap").selectAll("*").remove();at.attr("transform","translate("+u.left+","+u.top+")");b&&ct.select(".nv-y.nv-axis").attr("transform","translate("+lt+",0)");tt&&(s.width(lt).height(d).margin({left:u.left,top:u.top}).svgContainer(ot).xScale(it),at.select(".nv-interactive").call(s));ct.select(".nv-focus .nv-background rect").attr("width",lt).attr("height",d);r.width(lt).height(d).color(y.map(function(n,t){return n.color||l(n,t)}).filter(function(n,t){return!y[t].disabled}));bt=ct.select(".nv-linesWrap").datum(y.filter(function(n){return!n.disabled}));p&&o.scale(it)._ticks(n.utils.calcTicksX(lt/100,y)).tickSize(-d,0);w&&e.scale(et)._ticks(n.utils.calcTicksY(d/36,y)).tickSize(-lt,0);ct.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+d+")");a?(i.width(lt),ct.select(".nv-focusWrap").attr("transform","translate(0,"+(d+u.bottom+i.margin().top)+")").datum(y.filter(function(n){return!n.disabled})).call(i),wt=i.brush.empty()?i.xDomain():i.brush.extent(),wt!==null&&gt(wt)):(bt.call(r),kt(),dt());c.dispatch.on("stateChange",function(n){for(var i in n)h[i]=n[i];k.stateChange(h);t.update()});s.dispatch.on("elementMousemove",function(u){var h,f,c,o,p;if(r.clearHighlights(),o=[],y.filter(function(n,t){return n.seriesIndex=t,!n.disabled&&!n.disableTooltip}).forEach(function(e,s){var v=a?i.brush.empty()?i.xScale().domain():i.brush.extent():it.domain(),w=e.values.filter(function(n,t){return v[0]<=v[1]?r.x()(n,t)>=v[0]&&r.x()(n,t)<=v[1]:r.x()(n,t)>=v[1]&&r.x()(n,t)<=v[0]}),y,p;(f=n.interactiveBisect(w,u.pointXValue,r.x()),y=w[f],p=t.y()(y,f),p!==null&&r.highlightPoint(s,f,!0),y!==undefined)&&(h===undefined&&(h=y),c===undefined&&(c=t.xScale()(t.x()(y,f))),o.push({key:e.key,value:p,color:l(e,e.seriesIndex),data:y}))}),o.length>2){var w=t.yScale().invert(u.mouseY),b=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),k=.03*b,v=n.nearestValueIndex(o.map(function(n){return n.value}),w,k);v!==null&&(o[v].highlight=!0)}p=function(n){return n==null?"N/A":e.tickFormat()(n)};s.tooltip.valueFormatter(s.tooltip.valueFormatter()||p).data({value:t.x()(h,f),index:f,series:o})();s.renderGuideLine(c)});s.dispatch.on("elementClick",function(i){var u,f=[];y.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(r){var e=n.interactiveBisect(r.values,i.pointXValue,t.x()),o=r.values[e],s;typeof o!="undefined"&&(typeof u=="undefined"&&(u=t.xScale()(t.x()(o,e))),s=t.yScale()(t.y()(o,e)),f.push({point:o,pointIndex:e,pos:[u,s],seriesIndex:r.seriesIndex,series:r}))});r.dispatch.elementClick(f)});s.dispatch.on("elementMouseout",function(){r.clearHighlights()});k.on("changeState",function(n){typeof n.disabled!="undefined"&&y.length===n.disabled.length&&(y.forEach(function(t,i){t.disabled=n.disabled[i]}),h.disabled=n.disabled);t.update()})}),y.renderEnd("lineChart immediate"),t}var r=n.models.line(),o=n.models.axis(),e=n.models.axis(),c=n.models.legend(),s=n.interactiveGuideline(),d=n.models.tooltip(),i=n.models.focus(n.models.line()),u={top:30,right:20,bottom:50,left:60},ft=null,l=n.utils.defaultColor(),rt=null,g=null,ut=!0,nt="top",p=!0,w=!0,b=!1,tt=!1,it,et,a=!1,h=n.utils.state(),v=null,ot=null,k=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),f=250;o.orient("bottom").tickPadding(7);e.orient(b?"right":"left");r.clipEdge(!0).duration(0);d.valueFormatter(function(n,t){return e.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});s.tooltip.valueFormatter(function(n,t){return e.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});var y=n.utils.renderWatch(k,f),st=function(n){return function(){return{active:n.map(function(n){return!n.disabled})}}},ht=function(n){return function(t){t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};r.dispatch.on("elementMouseover.tooltip",function(n){n.series.disableTooltip||d.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(){d.hidden(!0)});return t.dispatch=k,t.lines=r,t.legend=c,t.focus=i,t.xAxis=o,t.x2Axis=i.xAxis,t.yAxis=e,t.y2Axis=i.yAxis,t.interactiveLayer=s,t.tooltip=d,t.state=h,t.dispatch=k,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return rt},set:function(n){rt=n}},height:{get:function(){return g},set:function(n){g=n}},showLegend:{get:function(){return ut},set:function(n){ut=n}},legendPosition:{get:function(){return nt},set:function(n){nt=n}},showXAxis:{get:function(){return p},set:function(n){p=n}},showYAxis:{get:function(){return w},set:function(n){w=n}},defaultState:{get:function(){return v},set:function(n){v=n}},noData:{get:function(){return ot},set:function(n){ot=n}},focusEnable:{get:function(){return a},set:function(n){a=n}},focusHeight:{get:function(){return i.height()},set:function(n){i.height(n)}},focusShowAxisX:{get:function(){return i.showXAxis()},set:function(n){i.showXAxis(n)}},focusShowAxisY:{get:function(){return i.showYAxis()},set:function(n){i.showYAxis(n)}},brushExtent:{get:function(){return i.brushExtent()},set:function(n){i.brushExtent(n)}},focusMargin:{get:function(){return i.margin},set:function(n){n.top!==undefined&&(u.top=n.top,ft=n.top);i.margin.right=n.right!==undefined?n.right:i.margin.right;i.margin.bottom=n.bottom!==undefined?n.bottom:i.margin.bottom;i.margin.left=n.left!==undefined?n.left:i.margin.left}},margin:{get:function(){return u},set:function(n){u.top=n.top!==undefined?n.top:u.top;u.right=n.right!==undefined?n.right:u.right;u.bottom=n.bottom!==undefined?n.bottom:u.bottom;u.left=n.left!==undefined?n.left:u.left}},duration:{get:function(){return f},set:function(n){f=n;y.reset(f);r.duration(f);i.duration(f);o.duration(f);e.duration(f)}},color:{get:function(){return l},set:function(t){l=n.utils.getColor(t);c.color(l);r.color(l);i.color(l)}},interpolate:{get:function(){return r.interpolate()},set:function(n){r.interpolate(n);i.interpolate(n)}},xTickFormat:{get:function(){return o.tickFormat()},set:function(n){o.tickFormat(n);i.xTickFormat(n)}},yTickFormat:{get:function(){return e.tickFormat()},set:function(n){e.tickFormat(n);i.yTickFormat(n)}},x:{get:function(){return r.x()},set:function(n){r.x(n);i.x(n)}},y:{get:function(){return r.y()},set:function(n){r.y(n);i.y(n)}},rightAlignYAxis:{get:function(){return b},set:function(n){b=n;e.orient(b?"right":"left")}},useInteractiveGuideline:{get:function(){return tt},set:function(n){tt=n;tt&&(r.interactive(!1),r.useVoronoi(!1))}}}),n.utils.inheritOptions(t,r),n.utils.initOptions(t),t};n.models.lineWithFocusChart=function(){return n.models.lineChart().margin({bottom:30}).focusEnable(!0)};n.models.linePlusBarChart=function(){"use strict";function t(g){return g.each(function(g){function fr(n){var r=+(n=="e"),i=r?1:-1,t=oi/3;return"M"+.5*i+","+t+"A6,6 0 0 "+r+" "+6.5*i+","+(t+6)+"V"+(2*t-6)+"A6,6 0 0 "+r+" "+.5*i+","+2*t+"ZM"+2.5*i+","+(t+8)+"V"+(2*t-8)+"M"+4.5*i+","+(t+8)+"V"+(2*t-8)}function er(){e.empty()||e.extent(b);bi.data([e.empty()?s.domain():b]).each(function(n){var t=s(n[0])-s.range()[0],i=s.range()[1]-s(n[1]);d3.select(this).select(".left").attr("width",t<0?0:t);d3.select(this).select(".right").attr("x",s(n[1])).attr("width",i<0?0:i)})}function ur(){var t,i;b=e.empty()?null:e.extent();w=e.empty()?s.domain():e.extent();ht.brush({extent:w,brush:e});er();f.width(ri).height(li).color(g.map(function(n,t){return n.color||nt(n,t)}).filter(function(n,t){return!g[t].disabled&&g[t].bar}));u.width(ri).height(li).color(g.map(function(n,t){return n.color||nt(n,t)}).filter(function(n,t){return!g[t].disabled&&!g[t].bar}));t=ii.select(".nv-focus .nv-barsWrap").datum(ui.length?ui.map(function(n){return{key:n.key,values:n.values.filter(function(n,t){return f.x()(n,t)>=w[0]&&f.x()(n,t)<=w[1]})}}):[{values:[]}]);i=ii.select(".nv-focus .nv-linesWrap").datum(dt(si)?[{values:[]}]:si.filter(function(n){return!n.disabled}).map(function(n){return{area:n.area,fillOpacity:n.fillOpacity,strokeWidth:n.strokeWidth,key:n.key,values:n.values.filter(function(n,t){return u.x()(n,t)>=w[0]&&u.x()(n,t)<=w[1]})}}));tt=ui.length&&!r?f.xScale():u.xScale();it.scale(tt)._ticks(n.utils.calcTicksX(ri/100,g)).tickSize(-li,0);it.domain([Math.ceil(w[0]),Math.floor(w[1])]);ii.select(".nv-x.nv-axis").transition().duration(k).call(it);t.transition().duration(k).call(f);i.transition().duration(k).call(u);ii.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+bt.range()[0]+")");l.scale(bt)._ticks(n.utils.calcTicksY(li/36,g)).tickSize(-ri,0);h.scale(ni)._ticks(n.utils.calcTicksY(li/36,g));r?h.tickSize(si.length?0:-ri,0):h.tickSize(ui.length?0:-ri,0);var o=ui.length?1:0,c=si.length&&!dt(si)?1:0,a=r?c:o,v=r?o:c;ii.select(".nv-focus .nv-y1.nv-axis").style("opacity",a);ii.select(".nv-focus .nv-y2.nv-axis").style("opacity",v).attr("transform","translate("+tt.range()[1]+",0)");ii.select(".nv-focus .nv-y1.nv-axis").transition().duration(k).call(l);ii.select(".nv-focus .nv-y2.nv-axis").transition().duration(k).call(h)}var hi=d3.select(this),or=this,vi,ui,si,gi,nr,ai,ci,wi,tr,ir,rr,bi,ki,di;n.utils.initSVG(hi);var ri=n.utils.availableWidth(vt,hi,i),li=n.utils.availableHeight(ft,hi,i)-(st?ut:0),oi=ut-o.top-o.bottom;if(t.update=function(){hi.transition().duration(k).call(t)},t.container=this,p.setter(ei(g),t.update).getter(fi(g)).update(),p.disabled=g.map(function(n){return!!n.disabled}),!ct){ct={};for(vi in p)ct[vi]=p[vi]instanceof Array?p[vi].slice(0):p[vi]}if(g&&g.length&&g.filter(function(n){return n.values.length}).length)hi.selectAll(".nv-noData").remove();else return n.utils.noData(t,hi),t;ui=g.filter(function(n){return!n.disabled&&n.bar});si=g.filter(function(n){return!n.bar});tt=ui.length&&!r?f.xScale():u.xScale();s=rt.scale();bt=r?u.yScale():f.yScale();ni=r?f.yScale():u.yScale();kt=r?c.yScale():d.yScale();ti=r?d.yScale():c.yScale();gi=g.filter(function(n){return!n.disabled&&(r?!n.bar:n.bar)}).map(function(n){return n.values.map(function(n,t){return{x:et(n,t),y:ot(n,t)}})});nr=g.filter(function(n){return!n.disabled&&(r?n.bar:!n.bar)}).map(function(n){return n.values.map(function(n,t){return{x:et(n,t),y:ot(n,t)}})});tt.range([0,ri]);s.domain(d3.extent(d3.merge(gi.concat(nr)),function(n){return n.x})).range([0,ri]);var yi=hi.selectAll("g.nv-wrap.nv-linePlusBar").data([g]),pi=yi.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),ii=yi.select("g");pi.append("g").attr("class","nv-legendWrap");ai=pi.append("g").attr("class","nv-focus");ai.append("g").attr("class","nv-x nv-axis");ai.append("g").attr("class","nv-y1 nv-axis");ai.append("g").attr("class","nv-y2 nv-axis");ai.append("g").attr("class","nv-barsWrap");ai.append("g").attr("class","nv-linesWrap");ci=pi.append("g").attr("class","nv-context");ci.append("g").attr("class","nv-x nv-axis");ci.append("g").attr("class","nv-y1 nv-axis");ci.append("g").attr("class","nv-y2 nv-axis");ci.append("g").attr("class","nv-barsWrap");ci.append("g").attr("class","nv-linesWrap");ci.append("g").attr("class","nv-brushBackground");ci.append("g").attr("class","nv-x nv-brush");yt?(wi=y.align()?ri/2:ri,tr=y.align()?wi:0,y.width(wi),ii.select(".nv-legendWrap").datum(g.map(function(n){return n.originalKey=n.originalKey===undefined?n.key:n.originalKey,n.key=r?n.originalKey+(n.bar?at:lt):n.originalKey+(n.bar?lt:at),n})).call(y),gt||y.height()===i.top||(i.top=y.height(),li=n.utils.availableHeight(ft,hi,i)-ut),ii.select(".nv-legendWrap").attr("transform","translate("+tr+","+-i.top+")")):ii.select(".nv-legendWrap").selectAll("*").remove();yi.attr("transform","translate("+i.left+","+i.top+")");ii.select(".nv-context").style("display",st?"initial":"none");d.width(ri).height(oi).color(g.map(function(n,t){return n.color||nt(n,t)}).filter(function(n,t){return!g[t].disabled&&g[t].bar}));c.width(ri).height(oi).color(g.map(function(n,t){return n.color||nt(n,t)}).filter(function(n,t){return!g[t].disabled&&!g[t].bar}));ir=ii.select(".nv-context .nv-barsWrap").datum(ui.length?ui:[{values:[]}]);rr=ii.select(".nv-context .nv-linesWrap").datum(dt(si)?[{values:[]}]:si.filter(function(n){return!n.disabled}));ii.select(".nv-context").attr("transform","translate(0,"+(li+i.bottom+o.top)+")");ir.transition().call(d);rr.transition().call(c);wt&&(rt._ticks(n.utils.calcTicksX(ri/100,g)).tickSize(-oi,0),ii.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+kt.range()[0]+")"),ii.select(".nv-context .nv-x.nv-axis").transition().call(rt));pt&&(a.scale(kt)._ticks(oi/36).tickSize(-ri,0),v.scale(ti)._ticks(oi/36).tickSize(ui.length?0:-ri,0),ii.select(".nv-context .nv-y3.nv-axis").style("opacity",ui.length?1:0).attr("transform","translate(0,"+s.range()[0]+")"),ii.select(".nv-context .nv-y2.nv-axis").style("opacity",si.length?1:0).attr("transform","translate("+s.range()[1]+",0)"),ii.select(".nv-context .nv-y1.nv-axis").transition().call(a),ii.select(".nv-context .nv-y2.nv-axis").transition().call(v));e.x(s).on("brush",ur);b&&e.extent(b);bi=ii.select(".nv-brushBackground").selectAll("g").data([b||e.extent()]);ki=bi.enter().append("g");ki.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",oi);ki.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",oi);di=ii.select(".nv-x.nv-brush").call(e);di.selectAll("rect").attr("height",oi);di.selectAll(".resize").append("path").attr("d",fr);y.dispatch.on("stateChange",function(n){for(var i in n)p[i]=n[i];ht.stateChange(p);t.update()});ht.on("changeState",function(n){typeof n.disabled!="undefined"&&(g.forEach(function(t,i){t.disabled=n.disabled[i]}),p.disabled=n.disabled);t.update()});ur()}),t}var u=n.models.line(),c=n.models.line(),f=n.models.historicalBar(),d=n.models.historicalBar(),it=n.models.axis(),rt=n.models.axis(),l=n.models.axis(),h=n.models.axis(),a=n.models.axis(),v=n.models.axis(),y=n.models.legend(),e=d3.svg.brush(),g=n.models.tooltip(),i={top:30,right:30,bottom:30,left:60},gt=null,o={top:0,right:30,bottom:20,left:60},vt=null,ft=null,et=function(n){return n.x},ot=function(n){return n.y},nt=n.utils.defaultColor(),yt=!0,st=!0,pt=!1,wt=!0,ut=50,w,b=null,tt,s,bt,ni,kt,ti,ii=null,ht=d3.dispatch("brush","stateChange","changeState"),k=0,p=n.utils.state(),ct=null,lt=" (left axis)",at=" (right axis)",r=!1;u.clipEdge(!0);c.interactive(!1);c.pointActive(function(){return!1});it.orient("bottom").tickPadding(5);l.orient("left");h.orient("right");rt.orient("bottom").tickPadding(5);a.orient("left");v.orient("right");g.headerEnabled(!0).headerFormatter(function(n,t){return it.tickFormat()(n,t)});var ri=function(){return r?{main:h,focus:v}:{main:l,focus:a}},ui=function(){return r?{main:l,focus:a}:{main:h,focus:v}},fi=function(n){return function(){return{active:n.map(function(n){return!n.disabled})}}},ei=function(n){return function(t){t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}},dt=function(n){return n.every(function(n){return n.disabled})};u.dispatch.on("elementMouseover.tooltip",function(n){g.duration(100).valueFormatter(function(n,t){return ui().main.tickFormat()(n,t)}).data(n).hidden(!1)});u.dispatch.on("elementMouseout.tooltip",function(){g.hidden(!0)});f.dispatch.on("elementMouseover.tooltip",function(n){n.value=t.x()(n.data);n.series={value:t.y()(n.data),color:n.color};g.duration(0).valueFormatter(function(n,t){return ri().main.tickFormat()(n,t)}).data(n).hidden(!1)});f.dispatch.on("elementMouseout.tooltip",function(){g.hidden(!0)});f.dispatch.on("elementMousemove.tooltip",function(){g()});return t.dispatch=ht,t.legend=y,t.lines=u,t.lines2=c,t.bars=f,t.bars2=d,t.xAxis=it,t.x2Axis=rt,t.y1Axis=l,t.y2Axis=h,t.y3Axis=a,t.y4Axis=v,t.tooltip=g,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return vt},set:function(n){vt=n}},height:{get:function(){return ft},set:function(n){ft=n}},showLegend:{get:function(){return yt},set:function(n){yt=n}},brushExtent:{get:function(){return b},set:function(n){b=n}},noData:{get:function(){return ii},set:function(n){ii=n}},focusEnable:{get:function(){return st},set:function(n){st=n}},focusHeight:{get:function(){return ut},set:function(n){ut=n}},focusShowAxisX:{get:function(){return wt},set:function(n){wt=n}},focusShowAxisY:{get:function(){return pt},set:function(n){pt=n}},legendLeftAxisHint:{get:function(){return lt},set:function(n){lt=n}},legendRightAxisHint:{get:function(){return at},set:function(n){at=n}},margin:{get:function(){return i},set:function(n){n.top!==undefined&&(i.top=n.top,gt=n.top);i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}},focusMargin:{get:function(){return o},set:function(n){o.top=n.top!==undefined?n.top:o.top;o.right=n.right!==undefined?n.right:o.right;o.bottom=n.bottom!==undefined?n.bottom:o.bottom;o.left=n.left!==undefined?n.left:o.left}},duration:{get:function(){return k},set:function(n){k=n}},color:{get:function(){return nt},set:function(t){nt=n.utils.getColor(t);y.color(nt)}},x:{get:function(){return et},set:function(n){et=n;u.x(n);c.x(n);f.x(n);d.x(n)}},y:{get:function(){return ot},set:function(n){ot=n;u.y(n);c.y(n);f.y(n);d.y(n)}},switchYAxisOrder:{get:function(){return r},set:function(n){var t,i;r!==n&&(t=l,l=h,h=t,i=a,a=v,v=i);r=n;l.orient("left");h.orient("right");a.orient("left");v.orient("right")}}}),n.utils.inheritOptions(t,u),n.utils.initOptions(t),t};n.models.multiBar=function(){"use strict";function c(ct){return w.reset(),ct.each(function(c){var kt=d-r.left-r.right,dt=g-r.top-r.bottom,ct,ni,lt,pt,vt,wt,at,ui,bt;nt=d3.select(this);n.utils.initSVG(nt);ct=0;ni=function(n,t){return n.series===c.length-1&&t===c[0].values.length-1?!0:!1};e&&c.length&&(e=[{values:c[0].values.map(function(n){return{x:n.x,y:0,series:n.series,size:.01}})}]);f&&(lt=d3.layout.stack().offset(rt).values(function(n){return n.values}).y(u)(!c.length&&e?e:c),lt.forEach(function(n,t){n.nonStackable?(c[t].nonStackableSeries=ct++,lt[t]=c[t]):t>0&&lt[t-1].nonStackable&&lt[t].values.map(function(n,i){n.y0-=lt[t-1].values[i].y;n.y1=n.y0+n.y})}),c=lt);c.forEach(function(n,t){n.values.forEach(function(i){i.series=t;i.key=n.key})});f&&c.length>0&&c[0].values.map(function(n,t){var i=0,r=0;c.map(function(n,u){if(!c[u].nonStackable){var f=n.values[t];f.size=Math.abs(f.y);f.y<0?(f.y1=r,r=r-f.size):(f.y1=f.size+i,i=i+f.size)}})});pt=b&&k?[]:c.map(function(n,t){return n.values.map(function(n,i){return{x:y(n,i),y:u(n,i),y0:n.y0,y1:n.y1,idx:t}})});i.domain(b||d3.merge(pt).map(function(n){return n.x})).rangeBands(ut||[0,kt],et);t.domain(k||d3.extent(d3.merge(pt).map(function(n){var t=n.y;return f&&!c[n.idx].nonStackable&&(t=n.y>0?n.y1:n.y1+n.y),t}).concat(tt))).range(ft||[dt,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]+t.domain()[0]*.01,t.domain()[1]-t.domain()[1]*.01]):t.domain([-1,1]));st=st||i;a=a||t;var yt=nt.selectAll("g.nv-wrap.nv-multibar").data([c]),gt=yt.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),ti=gt.append("defs"),ii=gt.append("g"),ri=yt.select("g");ii.append("g").attr("class","nv-groups");yt.attr("transform","translate("+r.left+","+r.top+")");ti.append("clipPath").attr("id","nv-edge-clip-"+v).append("rect");yt.select("#nv-edge-clip-"+v+" rect").attr("width",kt).attr("height",dt);ri.attr("clip-path",it?"url(#nv-edge-clip-"+v+")":"");vt=yt.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n,t){return t});vt.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);wt=w.transition(vt.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,s)).attr("y",function(n){var t=a(0)||0;return f&&c[n.series]&&!c[n.series].nonStackable&&(t=a(n.y0)),t}).attr("height",0).remove();wt.delay&&wt.delay(function(n,t){return t*(s/(ht+1))-t});vt.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover}).style("fill",function(n,t){return l(n,t)}).style("stroke",function(n,t){return l(n,t)});vt.style("stroke-opacity",1).style("fill-opacity",ot);at=vt.selectAll("rect.nv-bar").data(function(n){return e&&!c.length?e.values:n.values});at.exit().remove();ui=at.enter().append("rect").attr("class",function(n,t){return u(n,t)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(n,t,r){return f&&!c[r].nonStackable?0:r*i.rangeBand()/c.length}).attr("y",function(n,t,i){return a(f&&!c[i].nonStackable?n.y0:0)||0}).attr("height",0).attr("width",function(n,t,r){return i.rangeBand()/(f&&!c[r].nonStackable?1:c.length)}).attr("transform",function(n,t){return"translate("+i(y(n,t))+",0)"});at.style("fill",function(n,t,i){return l(n,i,t)}).style("stroke",function(n,t,i){return l(n,i,t)}).on("mouseover",function(n,t){d3.select(this).classed("hover",!0);h.elementMouseover({data:n,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(n,t){d3.select(this).classed("hover",!1);h.elementMouseout({data:n,index:t,color:d3.select(this).style("fill")})}).on("mousemove",function(n,t){h.elementMousemove({data:n,index:t,color:d3.select(this).style("fill")})}).on("click",function(n,t){var i=this;h.elementClick({data:n,index:t,color:d3.select(this).style("fill"),event:d3.event,element:i});d3.event.stopPropagation()}).on("dblclick",function(n,t){h.elementDblClick({data:n,index:t,color:d3.select(this).style("fill")});d3.event.stopPropagation()});at.attr("class",function(n,t){return u(n,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(n,t){return"translate("+i(y(n,t))+",0)"});p&&(o||(o=c.map(function(){return!0})),at.style("fill",function(n,t,i){return d3.rgb(p(n,t)).darker(o.map(function(n,t){return t}).filter(function(n,t){return!o[t]})[i]).toString()}).style("stroke",function(n,t,i){return d3.rgb(p(n,t)).darker(o.map(function(n,t){return t}).filter(function(n,t){return!o[t]})[i]).toString()}));bt=at.watchTransition(w,"multibar",Math.min(250,s)).delay(function(n,t){return t*s/c[0].values.length});f?bt.attr("y",function(n,i,r){return c[r].nonStackable?u(n,i)<0?t(0):t(0)-t(u(n,i))<-1?t(0)-1:t(u(n,i))||0:t(n.y1)}).attr("height",function(n,i,r){return c[r].nonStackable?Math.max(Math.abs(t(u(n,i))-t(0)),0)||0:Math.max(Math.abs(t(n.y+n.y0)-t(n.y0)),0)}).attr("x",function(n,t,r){var u=0;return c[r].nonStackable&&(u=n.series*i.rangeBand()/c.length,c.length!==ct&&(u=c[r].nonStackableSeries*i.rangeBand()/(ct*2))),u}).attr("width",function(n,t,r){if(c[r].nonStackable){var u=i.rangeBand()/ct;return c.length!==ct&&(u=i.rangeBand()/(ct*2)),u}return i.rangeBand()}):bt.attr("x",function(n){return n.series*i.rangeBand()/c.length}).attr("width",i.rangeBand()/c.length).attr("y",function(n,i){return u(n,i)<0?t(0):t(0)-t(u(n,i))<1?t(0)-1:t(u(n,i))||0}).attr("height",function(n,i){return Math.max(Math.abs(t(u(n,i))-t(0)),1)||0});st=i.copy();a=t.copy();c[0]&&c[0].values&&(ht=c[0].values.length)}),w.renderEnd("multibar immediate"),c}var r={top:0,right:0,bottom:0,left:0},d=960,g=500,i=d3.scale.ordinal(),t=d3.scale.linear(),v=Math.floor(Math.random()*1e4),nt=null,y=function(n){return n.x},u=function(n){return n.y},tt=[0],it=!0,f=!1,rt="zero",l=n.utils.defaultColor(),e=!1,p=null,o,s=500,b,k,ut,ft,et=.1,ot=.75,h=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),st,a,w=n.utils.renderWatch(h,s),ht=0;return c.dispatch=h,c.options=n.utils.optionsFunc.bind(c),c._options=Object.create({},{width:{get:function(){return d},set:function(n){d=n}},height:{get:function(){return g},set:function(n){g=n}},x:{get:function(){return y},set:function(n){y=n}},y:{get:function(){return u},set:function(n){u=n}},xScale:{get:function(){return i},set:function(n){i=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return b},set:function(n){b=n}},yDomain:{get:function(){return k},set:function(n){k=n}},xRange:{get:function(){return ut},set:function(n){ut=n}},yRange:{get:function(){return ft},set:function(n){ft=n}},forceY:{get:function(){return tt},set:function(n){tt=n}},stacked:{get:function(){return f},set:function(n){f=n}},stackOffset:{get:function(){return rt},set:function(n){rt=n}},clipEdge:{get:function(){return it},set:function(n){it=n}},disabled:{get:function(){return o},set:function(n){o=n}},id:{get:function(){return v},set:function(n){v=n}},hideable:{get:function(){return e},set:function(n){e=n}},groupSpacing:{get:function(){return et},set:function(n){et=n}},fillOpacity:{get:function(){return ot},set:function(n){ot=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return s},set:function(n){s=n;w.reset(s)}},color:{get:function(){return l},set:function(t){l=n.utils.getColor(t)}},barColor:{get:function(){return p},set:function(t){p=t?n.utils.getColor(t):null}}}),n.utils.initOptions(c),c};n.models.multiBarChart=function(){"use strict";function t(vt){return a.reset(),a.models(i),nt&&a.models(o),tt&&a.models(f),vt.each(function(a){var wt=d3.select(this),si=this,bt,kt,gt,ii,ri,ni,oi;if(n.utils.initSVG(wt),bt=n.utils.availableWidth(ut,wt,r),kt=n.utils.availableHeight(d,wt,r),t.update=function(){h===0?wt.call(t):wt.transition().duration(h).call(t)},t.container=this,u.setter(pt(a),t.update).getter(yt(a)).update(),u.disabled=a.map(function(n){return!!n.disabled}),!l){l={};for(gt in u)l[gt]=u[gt]instanceof Array?u[gt].slice(0):u[gt]}if(a&&a.length&&a.filter(function(n){return n.values.length}).length)wt.selectAll(".nv-noData").remove();else return n.utils.noData(t,wt),t;it=i.xScale();ht=i.yScale();var ti=wt.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([a]),dt=ti.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),vt=ti.select("g");if(dt.append("g").attr("class","nv-x nv-axis"),dt.append("g").attr("class","nv-y nv-axis"),dt.append("g").attr("class","nv-barsWrap"),dt.append("g").attr("class","nv-legendWrap"),dt.append("g").attr("class","nv-controlsWrap"),dt.append("g").attr("class","nv-interactive"),ft?(s.width(bt-ct()),vt.select(".nv-legendWrap").datum(a).call(s),at||s.height()===r.top||(r.top=s.height(),kt=n.utils.availableHeight(d,wt,r)),vt.select(".nv-legendWrap").attr("transform","translate("+ct()+","+-r.top+")")):vt.select(".nv-legendWrap").selectAll("*").remove(),g?(ii=[{key:c.grouped||"Grouped",disabled:i.stacked()},{key:c.stacked||"Stacked",disabled:!i.stacked()}],v.width(ct()).color(["#444","#444","#444"]),vt.select(".nv-controlsWrap").datum(ii).attr("transform","translate(0,"+-r.top+")").call(v)):vt.select(".nv-controlsWrap").selectAll("*").remove(),ti.attr("transform","translate("+r.left+","+r.top+")"),w&&vt.select(".nv-y.nv-axis").attr("transform","translate("+bt+",0)"),i.disabled(a.map(function(n){return n.disabled})).width(bt).height(kt).color(a.map(function(n,t){return n.color||p(n,t)}).filter(function(n,t){return!a[t].disabled})),ri=vt.select(".nv-barsWrap").datum(a.filter(function(n){return!n.disabled})),ri.call(i),nt){if(o.scale(it)._ticks(n.utils.calcTicksX(bt/100,a)).tickSize(-kt,0),vt.select(".nv-x.nv-axis").attr("transform","translate(0,"+ht.range()[0]+")"),vt.select(".nv-x.nv-axis").call(o),ni=vt.select(".nv-x.nv-axis > g").selectAll("g"),ni.selectAll("line, text").style("opacity",1),ot){var ui=function(n,t){return"translate("+n+","+t+")"},fi=5,ei=17;ni.selectAll("text").attr("transform",function(n,t,i){return ui(0,i%2==0?fi:ei)});oi=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;vt.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(n,t){return ui(0,t===0||oi%2!=0?ei:fi)})}st&&vt.selectAll(".tick text").call(n.utils.wrapTicks,t.xAxis.rangeBand());et&&ni.filter(function(n,t){return t%Math.ceil(a[0].values.length/(bt/100))!=0}).selectAll("text, line").style("opacity",0);b&&ni.selectAll(".tick text").attr("transform","rotate("+b+" 0,0)").style("text-anchor",b>0?"start":"end");vt.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}tt&&(f.scale(ht)._ticks(n.utils.calcTicksY(kt/36,a)).tickSize(-bt,0),vt.select(".nv-y.nv-axis").call(f));rt&&(e.width(bt).height(kt).margin({left:r.left,top:r.top}).svgContainer(wt).xScale(it),ti.select(".nv-interactive").call(e));s.dispatch.on("stateChange",function(n){for(var i in n)u[i]=n[i];k.stateChange(u);t.update()});v.dispatch.on("legendClick",function(n){if(n.disabled){ii=ii.map(function(n){return n.disabled=!0,n});n.disabled=!1;switch(n.key){case"Grouped":case c.grouped:i.stacked(!1);break;case"Stacked":case c.stacked:i.stacked(!0)}u.stacked=i.stacked();k.stateChange(u);t.update()}});k.on("changeState",function(n){typeof n.disabled!="undefined"&&(a.forEach(function(t,i){t.disabled=n.disabled[i]}),u.disabled=n.disabled);typeof n.stacked!="undefined"&&(i.stacked(n.stacked),u.stacked=n.stacked,lt=n.stacked);t.update()});if(rt){e.dispatch.on("elementMousemove",function(n){if(n.pointXValue!=undefined){var u,i,r,f,o=[];a.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(e){i=it.domain().indexOf(n.pointXValue);var s=e.values[i];s!==undefined&&(f=s.x,u===undefined&&(u=s),r===undefined&&(r=n.mouseX),o.push({key:e.key,value:t.y()(s,i),color:p(e,e.seriesIndex),data:e.values[i]}))});e.tooltip.data({value:f,index:i,series:o})();e.renderGuideLine(r)}});e.dispatch.on("elementMouseout",function(){e.tooltip.hidden(!0)})}else{i.dispatch.on("elementMouseover.tooltip",function(n){n.value=t.x()(n.data);n.series={key:n.data.key,value:t.y()(n.data),color:n.color};y.data(n).hidden(!1)});i.dispatch.on("elementMouseout.tooltip",function(){y.hidden(!0)});i.dispatch.on("elementMousemove.tooltip",function(){y()})}}),a.renderEnd("multibarchart immediate"),t}var i=n.models.multiBar(),o=n.models.axis(),f=n.models.axis(),e=n.interactiveGuideline(),s=n.models.legend(),v=n.models.legend(),y=n.models.tooltip(),r={top:30,right:20,bottom:50,left:60},at=null,ut=null,d=null,p=n.utils.defaultColor(),g=!0,c={},ft=!0,nt=!0,tt=!0,w=!1,et=!0,ot=!1,st=!1,b=0,it,ht,u=n.utils.state(),l=null,vt=null,k=d3.dispatch("stateChange","changeState","renderEnd"),ct=function(){return g?180:0},h=250,rt=!1;u.stacked=!1;i.stacked(!1);o.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(n){return n});f.orient(w?"right":"left").tickFormat(d3.format(",.1f"));y.duration(0).valueFormatter(function(n,t){return f.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});e.tooltip.valueFormatter(function(n,t){return n==null?"N/A":f.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});e.tooltip.valueFormatter(function(n,t){return n==null?"N/A":f.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});e.tooltip.duration(0).valueFormatter(function(n,t){return f.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});v.updateState(!1);var a=n.utils.renderWatch(k),lt=!1,yt=function(n){return function(){return{active:n.map(function(n){return!n.disabled}),stacked:lt}}},pt=function(n){return function(t){t.stacked!==undefined&&(lt=t.stacked);t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};return t.dispatch=k,t.multibar=i,t.legend=s,t.controls=v,t.xAxis=o,t.yAxis=f,t.state=u,t.tooltip=y,t.interactiveLayer=e,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return ut},set:function(n){ut=n}},height:{get:function(){return d},set:function(n){d=n}},showLegend:{get:function(){return ft},set:function(n){ft=n}},showControls:{get:function(){return g},set:function(n){g=n}},controlLabels:{get:function(){return c},set:function(n){c=n}},showXAxis:{get:function(){return nt},set:function(n){nt=n}},showYAxis:{get:function(){return tt},set:function(n){tt=n}},defaultState:{get:function(){return l},set:function(n){l=n}},noData:{get:function(){return vt},set:function(n){vt=n}},reduceXTicks:{get:function(){return et},set:function(n){et=n}},rotateLabels:{get:function(){return b},set:function(n){b=n}},staggerLabels:{get:function(){return ot},set:function(n){ot=n}},wrapLabels:{get:function(){return st},set:function(n){st=!!n}},margin:{get:function(){return r},set:function(n){n.top!==undefined&&(r.top=n.top,at=n.top);r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return h},set:function(n){h=n;i.duration(h);o.duration(h);f.duration(h);a.reset(h)}},color:{get:function(){return p},set:function(t){p=n.utils.getColor(t);s.color(p)}},rightAlignYAxis:{get:function(){return w},set:function(n){w=n;f.orient(w?"right":"left")}},useInteractiveGuideline:{get:function(){return rt},set:function(n){rt=n}},barColor:{get:function(){return i.barColor},set:function(n){i.barColor(n);s.color(function(n,t){return d3.rgb("#ccc").darker(t*1.5).toString()})}}}),n.utils.inheritOptions(t,i),n.utils.initOptions(t),t};n.models.multiBarHorizontal=function(){"use strict";function c(g){return e.reset(),g.each(function(c){var yt=tt-u.left-u.right,wt=it-u.top-u.bottom,vt,st,g,lt;ht=d3.select(this);n.utils.initSVG(ht);f&&(c=d3.layout.stack().offset("zero").values(function(n){return n.values}).y(i)(c));c.forEach(function(n,t){n.values.forEach(function(i){i.series=t;i.key=n.key})});f&&c[0].values.map(function(n,t){var i=0,r=0;c.map(function(n){var u=n.values[t];u.size=Math.abs(u.y);u.y<0?(u.y1=r-u.size,r=r-u.size):(u.y1=i,i=i+u.size)})});vt=b&&k?[]:c.map(function(n){return n.values.map(function(n,t){return{x:h(n,t),y:i(n,t),y0:n.y0,y1:n.y1}})});r.domain(b||d3.merge(vt).map(function(n){return n.x})).rangeBands(et||[0,wt],ut);t.domain(k||d3.extent(d3.merge(vt).map(function(n){return f?n.y>0?n.y1+n.y:n.y1:n.y}).concat(rt)));p&&!f?t.range(d||[t.domain()[0]<0?w:0,yt-(t.domain()[1]>0?w:0)]):t.range(d||[0,yt]);ot=ot||r;nt=nt||d3.scale.linear().domain(t.domain()).range([t(0),t(0)]);var at=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([c]),pt=at.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),kt=pt.append("defs"),bt=pt.append("g"),dt=at.select("g");bt.append("g").attr("class","nv-groups");at.attr("transform","translate("+u.left+","+u.top+")");st=at.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n,t){return t});st.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);st.exit().watchTransition(e,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();st.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover}).style("fill",function(n,t){return y(n,t)}).style("stroke",function(n,t){return y(n,t)});st.watchTransition(e,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",ft);g=st.selectAll("g.nv-bar").data(function(n){return n.values});g.exit().remove();lt=g.enter().append("g").attr("transform",function(n,t,i){return"translate("+nt(f?n.y0:0)+","+(f?0:i*r.rangeBand()/c.length+r(h(n,t)))+")"});lt.append("rect").attr("width",0).attr("height",r.rangeBand()/(f?1:c.length));g.on("mouseover",function(n,t){d3.select(this).classed("hover",!0);s.elementMouseover({data:n,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(n,t){d3.select(this).classed("hover",!1);s.elementMouseout({data:n,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(n,t){s.elementMouseout({data:n,index:t,color:d3.select(this).style("fill")})}).on("mousemove",function(n,t){s.elementMousemove({data:n,index:t,color:d3.select(this).style("fill")})}).on("click",function(n,t){var i=this;s.elementClick({data:n,index:t,color:d3.select(this).style("fill"),event:d3.event,element:i});d3.event.stopPropagation()}).on("dblclick",function(n,t){s.elementDblClick({data:n,index:t,color:d3.select(this).style("fill")});d3.event.stopPropagation()});a(c[0],0)&&(lt.append("polyline"),g.select("polyline").attr("fill","none").attr("points",function(n,i){var u=a(n,i),e=.8*r.rangeBand()/((f?1:c.length)*2),o;return u=u.length?u:[-Math.abs(u),Math.abs(u)],u=u.map(function(n){return t(n)-t(0)}),o=[[u[0],-e],[u[0],e],[u[0],0],[u[1],0],[u[1],-e],[u[1],e]],o.map(function(n){return n.join(",")}).join(" ")}).attr("transform",function(n,u){var e=r.rangeBand()/((f?1:c.length)*2);return"translate("+(i(n,u)<0?0:t(i(n,u))-t(0))+", "+e+")"}));lt.append("text");p&&!f?(g.select("text").attr("text-anchor",function(n,t){return i(n,t)<0?"end":"start"}).attr("y",r.rangeBand()/(c.length*2)).attr("dy",".32em").text(function(n,t){var u=l(i(n,t)),r=a(n,t);return r===undefined?u:r.length?u+"+"+l(Math.abs(r[1]))+"-"+l(Math.abs(r[0])):u+"±"+l(Math.abs(r))}),g.watchTransition(e,"multibarhorizontal: bars").select("text").attr("x",function(n,r){return i(n,r)<0?-4:t(i(n,r))-t(0)+4})):g.selectAll("text").text("");ct&&!f?(lt.append("text").classed("nv-bar-label",!0),g.select("text.nv-bar-label").attr("text-anchor",function(n,t){return i(n,t)<0?"start":"end"}).attr("y",r.rangeBand()/(c.length*2)).attr("dy",".32em").text(function(n,t){return h(n,t)}),g.watchTransition(e,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(n,r){return i(n,r)<0?t(0)-t(i(n,r))+4:-4})):g.selectAll("text.nv-bar-label").text("");g.attr("class",function(n,t){return i(n,t)<0?"nv-bar negative":"nv-bar positive"});v&&(o||(o=c.map(function(){return!0})),g.style("fill",function(n,t,i){return d3.rgb(v(n,t)).darker(o.map(function(n,t){return t}).filter(function(n,t){return!o[t]})[i]).toString()}).style("stroke",function(n,t,i){return d3.rgb(v(n,t)).darker(o.map(function(n,t){return t}).filter(function(n,t){return!o[t]})[i]).toString()}));f?g.watchTransition(e,"multibarhorizontal: bars").attr("transform",function(n,i){return"translate("+t(n.y1)+","+r(h(n,i))+")"}).select("rect").attr("width",function(n,r){return Math.abs(t(i(n,r)+n.y0)-t(n.y0))||0}).attr("height",r.rangeBand()):g.watchTransition(e,"multibarhorizontal: bars").attr("transform",function(n,u){return"translate("+(i(n,u)<0?t(i(n,u)):t(0))+","+(n.series*r.rangeBand()/c.length+r(h(n,u)))+")"}).select("rect").attr("height",r.rangeBand()/c.length).attr("width",function(n,r){return Math.max(Math.abs(t(i(n,r))-t(0)),1)||0});ot=r.copy();nt=t.copy()}),e.renderEnd("multibarHorizontal immediate"),c}var u={top:0,right:0,bottom:0,left:0},tt=960,it=500,st=Math.floor(Math.random()*1e4),ht=null,r=d3.scale.ordinal(),t=d3.scale.linear(),h=function(n){return n.x},i=function(n){return n.y},a=function(n){return n.yErr},rt=[0],y=n.utils.defaultColor(),v=null,o,f=!1,p=!1,ct=!1,w=60,ut=.1,ft=.75,l=d3.format(",.2f"),b,k,et,d,g=250,s=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),ot,nt,e=n.utils.renderWatch(s,g);return c.dispatch=s,c.options=n.utils.optionsFunc.bind(c),c._options=Object.create({},{width:{get:function(){return tt},set:function(n){tt=n}},height:{get:function(){return it},set:function(n){it=n}},x:{get:function(){return h},set:function(n){h=n}},y:{get:function(){return i},set:function(n){i=n}},yErr:{get:function(){return a},set:function(n){a=n}},xScale:{get:function(){return r},set:function(n){r=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return b},set:function(n){b=n}},yDomain:{get:function(){return k},set:function(n){k=n}},xRange:{get:function(){return et},set:function(n){et=n}},yRange:{get:function(){return d},set:function(n){d=n}},forceY:{get:function(){return rt},set:function(n){rt=n}},stacked:{get:function(){return f},set:function(n){f=n}},showValues:{get:function(){return p},set:function(n){p=n}},disabled:{get:function(){return o},set:function(n){o=n}},id:{get:function(){return st},set:function(n){st=n}},valueFormat:{get:function(){return l},set:function(n){l=n}},valuePadding:{get:function(){return w},set:function(n){w=n}},groupSpacing:{get:function(){return ut},set:function(n){ut=n}},fillOpacity:{get:function(){return ft},set:function(n){ft=n}},margin:{get:function(){return u},set:function(n){u.top=n.top!==undefined?n.top:u.top;u.right=n.right!==undefined?n.right:u.right;u.bottom=n.bottom!==undefined?n.bottom:u.bottom;u.left=n.left!==undefined?n.left:u.left}},duration:{get:function(){return g},set:function(n){g=n;e.reset(g)}},color:{get:function(){return y},set:function(t){y=n.utils.getColor(t)}},barColor:{get:function(){return v},set:function(t){v=t?n.utils.getColor(t):null}}}),n.utils.initOptions(c),c};n.models.multiBarHorizontalChart=function(){"use strict";function t(y){return a.reset(),a.models(i),d&&a.models(o),g&&a.models(s),y.each(function(a){var et=d3.select(this),bt=this,ct,ht,lt,vt,pt,wt;if(n.utils.initSVG(et),ct=n.utils.availableWidth(tt,et,r),ht=n.utils.availableHeight(w,et,r),t.update=function(){et.transition().duration(e).call(t)},t.container=this,c=i.stacked(),u.setter(st(a),t.update).getter(ot(a)).update(),u.disabled=a.map(function(n){return!!n.disabled}),!l){l={};for(lt in u)l[lt]=u[lt]instanceof Array?u[lt].slice(0):u[lt]}if(a&&a.length&&a.filter(function(n){return n.values.length}).length)et.selectAll(".nv-noData").remove();else return n.utils.noData(t,et),t;ft=i.xScale();nt=i.yScale().clamp(!0);var yt=et.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([a]),at=yt.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),y=yt.select("g");at.append("g").attr("class","nv-x nv-axis");at.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");at.append("g").attr("class","nv-barsWrap");at.append("g").attr("class","nv-legendWrap");at.append("g").attr("class","nv-controlsWrap");it?(f.width(ct-rt()),y.select(".nv-legendWrap").datum(a).call(f),ut||f.height()===r.top||(r.top=f.height(),ht=n.utils.availableHeight(w,et,r)),y.select(".nv-legendWrap").attr("transform","translate("+rt()+","+-r.top+")")):y.select(".nv-legendWrap").selectAll("*").remove();k?(vt=[{key:h.grouped||"Grouped",disabled:i.stacked()},{key:h.stacked||"Stacked",disabled:!i.stacked()}],v.width(rt()).color(["#444","#444","#444"]),y.select(".nv-controlsWrap").datum(vt).attr("transform","translate(0,"+-r.top+")").call(v)):y.select(".nv-controlsWrap").selectAll("*").remove();yt.attr("transform","translate("+r.left+","+r.top+")");i.disabled(a.map(function(n){return n.disabled})).width(ct).height(ht).color(a.map(function(n,t){return n.color||b(n,t)}).filter(function(n,t){return!a[t].disabled}));pt=y.select(".nv-barsWrap").datum(a.filter(function(n){return!n.disabled}));pt.transition().call(i);d&&(o.scale(ft)._ticks(n.utils.calcTicksY(ht/24,a)).tickSize(-ct,0),y.select(".nv-x.nv-axis").call(o),wt=y.select(".nv-x.nv-axis").selectAll("g"),wt.selectAll("line, text"));g&&(s.scale(nt)._ticks(n.utils.calcTicksX(ct/100,a)).tickSize(-ht,0),y.select(".nv-y.nv-axis").attr("transform","translate(0,"+ht+")"),y.select(".nv-y.nv-axis").call(s));y.select(".nv-zeroLine line").attr("x1",nt(0)).attr("x2",nt(0)).attr("y1",0).attr("y2",-ht);f.dispatch.on("stateChange",function(n){for(var i in n)u[i]=n[i];p.stateChange(u);t.update()});v.dispatch.on("legendClick",function(n){if(n.disabled){vt=vt.map(function(n){return n.disabled=!0,n});n.disabled=!1;switch(n.key){case"Grouped":case h.grouped:i.stacked(!1);break;case"Stacked":case h.stacked:i.stacked(!0)}u.stacked=i.stacked();p.stateChange(u);c=i.stacked();t.update()}});p.on("changeState",function(n){typeof n.disabled!="undefined"&&(a.forEach(function(t,i){t.disabled=n.disabled[i]}),u.disabled=n.disabled);typeof n.stacked!="undefined"&&(i.stacked(n.stacked),u.stacked=n.stacked,c=n.stacked);t.update()})}),a.renderEnd("multibar horizontal chart immediate"),t}var i=n.models.multiBarHorizontal(),o=n.models.axis(),s=n.models.axis(),f=n.models.legend().height(30),v=n.models.legend().height(30),y=n.models.tooltip(),r={top:30,right:20,bottom:50,left:60},ut=null,tt=null,w=null,b=n.utils.defaultColor(),k=!0,h={},it=!0,d=!0,g=!0,c=!1,ft,nt,u=n.utils.state(),l=null,et=null,p=d3.dispatch("stateChange","changeState","renderEnd"),rt=function(){return k?180:0},e=250;u.stacked=!1;i.stacked(c);o.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(n){return n});s.orient("bottom").tickFormat(d3.format(",.1f"));y.duration(0).valueFormatter(function(n,t){return s.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});v.updateState(!1);var ot=function(n){return function(){return{active:n.map(function(n){return!n.disabled}),stacked:c}}},st=function(n){return function(t){t.stacked!==undefined&&(c=t.stacked);t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}},a=n.utils.renderWatch(p,e);i.dispatch.on("elementMouseover.tooltip",function(n){n.value=t.x()(n.data);n.series={key:n.data.key,value:t.y()(n.data),color:n.color};y.data(n).hidden(!1)});i.dispatch.on("elementMouseout.tooltip",function(){y.hidden(!0)});i.dispatch.on("elementMousemove.tooltip",function(){y()});return t.dispatch=p,t.multibar=i,t.legend=f,t.controls=v,t.xAxis=o,t.yAxis=s,t.state=u,t.tooltip=y,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return tt},set:function(n){tt=n}},height:{get:function(){return w},set:function(n){w=n}},showLegend:{get:function(){return it},set:function(n){it=n}},showControls:{get:function(){return k},set:function(n){k=n}},controlLabels:{get:function(){return h},set:function(n){h=n}},showXAxis:{get:function(){return d},set:function(n){d=n}},showYAxis:{get:function(){return g},set:function(n){g=n}},defaultState:{get:function(){return l},set:function(n){l=n}},noData:{get:function(){return et},set:function(n){et=n}},margin:{get:function(){return r},set:function(n){n.top!==undefined&&(r.top=n.top,ut=n.top);r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return e},set:function(n){e=n;a.reset(e);i.duration(e);o.duration(e);s.duration(e)}},color:{get:function(){return b},set:function(t){b=n.utils.getColor(t);f.color(b)}},barColor:{get:function(){return i.barColor},set:function(n){i.barColor(n);f.color(function(n,t){return d3.rgb("#ccc").darker(t*1.5).toString()})}}}),n.utils.inheritOptions(t,i),n.utils.initOptions(t),t};n.models.multiChart=function(){"use strict";function t(f){return f.each(function(f){function li(n){var t=f[n.seriesIndex].yAxis===2?b:w;n.value=n.point.x;n.series={value:n.point.y,color:n.point.color,key:n.series.key};u.duration(0).headerFormatter(function(n,t){return p.tickFormat()(n,t)}).valueFormatter(function(n,i){return t.tickFormat()(n,i)}).data(n).hidden(!1)}function ai(n){var t=f[n.seriesIndex].yAxis===2?b:w;n.value=n.point.x;n.series={value:n.point.y,color:n.point.color,key:n.series.key};u.duration(100).headerFormatter(function(n,t){return p.tickFormat()(n,t)}).valueFormatter(function(n,i){return t.tickFormat()(n,i)}).data(n).hidden(!1)}function vi(n){var t=f[n.seriesIndex].yAxis===2?b:w;n.point.x=r.x()(n.point);n.point.y=r.y()(n.point);u.duration(0).headerFormatter(function(n,t){return p.tickFormat()(n,t)}).valueFormatter(function(n,i){return t.tickFormat()(n,i)}).data(n).hidden(!1)}function yi(n){var t=f[n.data.series].yAxis===2?b:w;n.value=h.x()(n.data);n.series={value:h.y()(n.data),color:n.color,key:n.data.key};u.duration(0).headerFormatter(function(n,t){return p.tickFormat()(n,t)}).valueFormatter(function(n,i){return t.tickFormat()(n,i)}).data(n).hidden(!1)}function pi(){for(var i,n=0,t=et.length;n<t;n++){i=et[n];try{i.clearHighlights()}catch(r){}}}function fr(n,t,i){for(var f,r=0,u=et.length;r<u;r++){f=et[r];try{f.highlightPoint(n,t,i)}catch(e){}}}var kt=d3.select(this),er=this,ni,ti,ii,wt,vt,bt,ri,ci;n.utils.initSVG(kt);t.update=function(){kt.transition().call(t)};t.container=this;var pt=n.utils.availableWidth(ot,kt,i),yt=n.utils.availableHeight(rt,kt,i),ui=f.filter(function(n){return n.type=="line"&&n.yAxis==1}),fi=f.filter(function(n){return n.type=="line"&&n.yAxis==2}),ei=f.filter(function(n){return n.type=="scatter"&&n.yAxis==1}),oi=f.filter(function(n){return n.type=="scatter"&&n.yAxis==2}),si=f.filter(function(n){return n.type=="bar"&&n.yAxis==1}),hi=f.filter(function(n){return n.type=="bar"&&n.yAxis==2}),dt=f.filter(function(n){return n.type=="area"&&n.yAxis==1}),gt=f.filter(function(n){return n.type=="area"&&n.yAxis==2});if(f&&f.length&&f.filter(function(n){return n.values.length}).length)kt.selectAll(".nv-noData").remove();else return n.utils.noData(t,kt),t;ni=f.filter(function(n){return!n.disabled&&n.yAxis==1}).map(function(n){return n.values.map(function(n){return{x:ut(n),y:ft(n)}})});ti=f.filter(function(n){return!n.disabled&&n.yAxis==2}).map(function(n){return n.values.map(function(n){return{x:ut(n),y:ft(n)}})});g.domain(d3.extent(d3.merge(ni.concat(ti)),function(n){return n.x})).range([0,pt]);ii=kt.selectAll("g.wrap.multiChart").data([f]);wt=ii.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");wt.append("g").attr("class","nv-x nv-axis");wt.append("g").attr("class","nv-y1 nv-axis");wt.append("g").attr("class","nv-y2 nv-axis");wt.append("g").attr("class","stack1Wrap");wt.append("g").attr("class","stack2Wrap");wt.append("g").attr("class","bars1Wrap");wt.append("g").attr("class","bars2Wrap");wt.append("g").attr("class","scatters1Wrap");wt.append("g").attr("class","scatters2Wrap");wt.append("g").attr("class","lines1Wrap");wt.append("g").attr("class","lines2Wrap");wt.append("g").attr("class","legendWrap");wt.append("g").attr("class","nv-interactive");vt=ii.select("g");bt=f.map(function(n,t){return f[t].color||it(n,t)});st?(ri=k.align()?pt/2:pt,ci=k.align()?ri:0,k.width(ri),k.color(bt),vt.select(".legendWrap").datum(f.map(function(n){return n.originalKey=n.originalKey===undefined?n.key:n.originalKey,n.key=n.originalKey+(n.yAxis==1?"":lt),n})).call(k),at||k.height()===i.top||(i.top=k.height(),yt=n.utils.availableHeight(rt,kt,i)),vt.select(".legendWrap").attr("transform","translate("+ci+","+-i.top+")")):vt.select(".legendWrap").selectAll("*").remove();e.width(pt).height(yt).interpolate(nt).color(bt.filter(function(n,t){return!f[t].disabled&&f[t].yAxis==1&&f[t].type=="line"}));o.width(pt).height(yt).interpolate(nt).color(bt.filter(function(n,t){return!f[t].disabled&&f[t].yAxis==2&&f[t].type=="line"}));c.width(pt).height(yt).color(bt.filter(function(n,t){return!f[t].disabled&&f[t].yAxis==1&&f[t].type=="scatter"}));l.width(pt).height(yt).color(bt.filter(function(n,t){return!f[t].disabled&&f[t].yAxis==2&&f[t].type=="scatter"}));h.width(pt).height(yt).color(bt.filter(function(n,t){return!f[t].disabled&&f[t].yAxis==1&&f[t].type=="bar"}));y.width(pt).height(yt).color(bt.filter(function(n,t){return!f[t].disabled&&f[t].yAxis==2&&f[t].type=="bar"}));r.width(pt).height(yt).interpolate(nt).color(bt.filter(function(n,t){return!f[t].disabled&&f[t].yAxis==1&&f[t].type=="area"}));s.width(pt).height(yt).interpolate(nt).color(bt.filter(function(n,t){return!f[t].disabled&&f[t].yAxis==2&&f[t].type=="area"}));vt.attr("transform","translate("+i.left+","+i.top+")");var wi=vt.select(".lines1Wrap").datum(ui.filter(function(n){return!n.disabled})),bi=vt.select(".scatters1Wrap").datum(ei.filter(function(n){return!n.disabled})),ki=vt.select(".bars1Wrap").datum(si.filter(function(n){return!n.disabled})),di=vt.select(".stack1Wrap").datum(dt.filter(function(n){return!n.disabled})),gi=vt.select(".lines2Wrap").datum(fi.filter(function(n){return!n.disabled})),nr=vt.select(".scatters2Wrap").datum(oi.filter(function(n){return!n.disabled})),tr=vt.select(".bars2Wrap").datum(hi.filter(function(n){return!n.disabled})),ir=vt.select(".stack2Wrap").datum(gt.filter(function(n){return!n.disabled})),rr=dt.length?dt.map(function(n){return n.values}).reduce(function(n,t){return n.map(function(n,i){return{x:n.x,y:n.y+t[i].y}})}).concat([{x:0,y:0}]):[],ur=gt.length?gt.map(function(n){return n.values}).reduce(function(n,t){return n.map(function(n,i){return{x:n.x,y:n.y+t[i].y}})}).concat([{x:0,y:0}]):[];a.domain(ht||d3.extent(d3.merge(ni).concat(rr),function(n){return n.y})).range([0,yt]);v.domain(ct||d3.extent(d3.merge(ti).concat(ur),function(n){return n.y})).range([0,yt]);e.yDomain(a.domain());c.yDomain(a.domain());h.yDomain(a.domain());r.yDomain(a.domain());o.yDomain(v.domain());l.yDomain(v.domain());y.yDomain(v.domain());s.yDomain(v.domain());dt.length&&d3.transition(di).call(r);gt.length&&d3.transition(ir).call(s);si.length&&d3.transition(ki).call(h);hi.length&&d3.transition(tr).call(y);ui.length&&d3.transition(wi).call(e);fi.length&&d3.transition(gi).call(o);ei.length&&d3.transition(bi).call(c);oi.length&&d3.transition(nr).call(l);p._ticks(n.utils.calcTicksX(pt/100,f)).tickSize(-yt,0);vt.select(".nv-x.nv-axis").attr("transform","translate(0,"+yt+")");d3.transition(vt.select(".nv-x.nv-axis")).call(p);w._ticks(n.utils.calcTicksY(yt/36,f)).tickSize(-pt,0);d3.transition(vt.select(".nv-y1.nv-axis")).call(w);b._ticks(n.utils.calcTicksY(yt/36,f)).tickSize(-pt,0);d3.transition(vt.select(".nv-y2.nv-axis")).call(b);vt.select(".nv-y1.nv-axis").classed("nv-disabled",ni.length?!1:!0).attr("transform","translate("+g.range()[0]+",0)");vt.select(".nv-y2.nv-axis").classed("nv-disabled",ti.length?!1:!0).attr("transform","translate("+g.range()[1]+",0)");k.dispatch.on("stateChange",function(){t.update()});if(tt&&(d.width(pt).height(yt).margin({left:i.left,top:i.top}).svgContainer(kt).xScale(g),ii.select(".nv-interactive").call(d)),tt){d.dispatch.on("elementMousemove",function(i){var e,r,o,u,s;pi();u=[];f.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(f,s){var l=g.domain(),a=f.values.filter(function(n,i){return t.x()(n,i)>=l[0]&&t.x()(n,i)<=l[1]}),h,c;(r=n.interactiveBisect(a,i.pointXValue,t.x()),h=a[r],c=t.y()(h,r),c!==null&&fr(s,r,!0),h!==undefined)&&(e===undefined&&(e=h),o===undefined&&(o=g(t.x()(h,r))),u.push({key:f.key,value:c,color:it(f,f.seriesIndex),data:h,yAxis:f.yAxis==2?b:w}))});s=function(n,t){var i=u[t].yAxis;return n==null?"N/A":i.tickFormat()(n)};d.tooltip.headerFormatter(function(n,t){return p.tickFormat()(n,t)}).valueFormatter(d.tooltip.valueFormatter()||s).data({value:t.x()(e,r),index:r,series:u})();d.renderGuideLine(o)});d.dispatch.on("elementMouseout",function(){pi()})}else{e.dispatch.on("elementMouseover.tooltip",li);o.dispatch.on("elementMouseover.tooltip",li);e.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});o.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});c.dispatch.on("elementMouseover.tooltip",ai);l.dispatch.on("elementMouseover.tooltip",ai);c.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});l.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});r.dispatch.on("elementMouseover.tooltip",vi);s.dispatch.on("elementMouseover.tooltip",vi);r.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});s.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});h.dispatch.on("elementMouseover.tooltip",yi);y.dispatch.on("elementMouseover.tooltip",yi);h.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});y.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});h.dispatch.on("elementMousemove.tooltip",function(){u()});y.dispatch.on("elementMousemove.tooltip",function(){u()})}}),t}var i={top:30,right:20,bottom:50,left:60},at=null,it=n.utils.defaultColor(),ot=null,rt=null,st=!0,vt=null,ht,ct,ut=function(n){return n.x},ft=function(n){return n.y},nt="linear",yt=!0,d=n.interactiveGuideline(),tt=!1,lt=" (right axis)",f=250,g=d3.scale.linear(),a=d3.scale.linear(),v=d3.scale.linear(),e=n.models.line().yScale(a).duration(f),o=n.models.line().yScale(v).duration(f),c=n.models.scatter().yScale(a).duration(f),l=n.models.scatter().yScale(v).duration(f),h=n.models.multiBar().stacked(!1).yScale(a).duration(f),y=n.models.multiBar().stacked(!1).yScale(v).duration(f),r=n.models.stackedArea().yScale(a).duration(f),s=n.models.stackedArea().yScale(v).duration(f),p=n.models.axis().scale(g).orient("bottom").tickPadding(5).duration(f),w=n.models.axis().scale(a).orient("left").duration(f),b=n.models.axis().scale(v).orient("right").duration(f),k=n.models.legend().height(30),u=n.models.tooltip(),pt=d3.dispatch(),et=[e,o,c,l,h,y,r,s];return t.dispatch=pt,t.legend=k,t.lines1=e,t.lines2=o,t.scatters1=c,t.scatters2=l,t.bars1=h,t.bars2=y,t.stack1=r,t.stack2=s,t.xAxis=p,t.yAxis1=w,t.yAxis2=b,t.tooltip=u,t.interactiveLayer=d,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return ot},set:function(n){ot=n}},height:{get:function(){return rt},set:function(n){rt=n}},showLegend:{get:function(){return st},set:function(n){st=n}},yDomain1:{get:function(){return ht},set:function(n){ht=n}},yDomain2:{get:function(){return ct},set:function(n){ct=n}},noData:{get:function(){return vt},set:function(n){vt=n}},interpolate:{get:function(){return nt},set:function(n){nt=n}},legendRightAxisHint:{get:function(){return lt},set:function(n){lt=n}},margin:{get:function(){return i},set:function(n){n.top!==undefined&&(i.top=n.top,at=n.top);i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}},color:{get:function(){return it},set:function(t){it=n.utils.getColor(t)}},x:{get:function(){return ut},set:function(n){ut=n;e.x(n);o.x(n);c.x(n);l.x(n);h.x(n);y.x(n);r.x(n);s.x(n)}},y:{get:function(){return ft},set:function(n){ft=n;e.y(n);o.y(n);c.y(n);l.y(n);r.y(n);s.y(n);h.y(n);y.y(n)}},useVoronoi:{get:function(){return yt},set:function(n){yt=n;e.useVoronoi(n);o.useVoronoi(n);r.useVoronoi(n);s.useVoronoi(n)}},useInteractiveGuideline:{get:function(){return tt},set:function(n){tt=n;tt&&(e.interactive(!1),e.useVoronoi(!1),o.interactive(!1),o.useVoronoi(!1),r.interactive(!1),r.useVoronoi(!1),s.interactive(!1),s.useVoronoi(!1),c.interactive(!1),l.interactive(!1))}},duration:{get:function(){return f},set:function(n){f=n;[e,o,r,s,c,l,p,w,b].forEach(function(n){n.duration(f)})}}}),n.utils.initOptions(t),t};n.models.ohlcBar=function(){"use strict";function u(rt){return rt.each(function(u){var rt,st,ft,ot;e=d3.select(this);rt=n.utils.availableWidth(w,e,r);st=n.utils.availableHeight(b,e,r);n.utils.initSVG(e);ft=rt/u[0].values.length*.9;i.domain(nt||d3.extent(u[0].values.map(l).concat(k)));d?i.range(p||[rt*.5/u[0].values.length,rt*(u[0].values.length-.5)/u[0].values.length]):i.range(p||[5+ft/2,rt-ft/2-5]);t.domain(tt||[d3.min(u[0].values.map(s).concat(v)),d3.max(u[0].values.map(o).concat(v))]).range(it||[st,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]+t.domain()[0]*.01,t.domain()[1]-t.domain()[1]*.01]):t.domain([-1,1]));var et=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([u[0].values]),ht=et.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),ct=ht.append("defs"),lt=ht.append("g"),at=et.select("g");lt.append("g").attr("class","nv-ticks");et.attr("transform","translate("+r.left+","+r.top+")");e.on("click",function(n,t){ut.chartClick({data:n,index:t,pos:d3.event,id:h})});ct.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");et.select("#nv-chart-clip-path-"+h+" rect").attr("width",rt).attr("height",st);at.attr("clip-path",g?"url(#nv-chart-clip-path-"+h+")":"");ot=et.select(".nv-ticks").selectAll(".nv-tick").data(function(n){return n});ot.exit().remove();ot.enter().append("path").attr("class",function(n,t,i){return(f(n,t)>c(n,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+i+"-"+t}).attr("d",function(n,i){return"m0,0l0,"+(t(f(n,i))-t(o(n,i)))+"l"+-ft/2+",0l"+ft/2+",0l0,"+(t(s(n,i))-t(f(n,i)))+"l0,"+(t(c(n,i))-t(s(n,i)))+"l"+ft/2+",0l"+-ft/2+",0z"}).attr("transform",function(n,r){return"translate("+i(l(n,r))+","+t(o(n,r))+")"}).attr("fill",function(){return y[0]}).attr("stroke",function(){return y[0]}).attr("x",0).attr("y",function(n,i){return t(Math.max(0,a(n,i)))}).attr("height",function(n,i){return Math.abs(t(a(n,i))-t(0))});ot.attr("class",function(n,t,i){return(f(n,t)>c(n,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+i+"-"+t});d3.transition(ot).attr("transform",function(n,r){return"translate("+i(l(n,r))+","+t(o(n,r))+")"}).attr("d",function(n,i){var r=rt/u[0].values.length*.9;return"m0,0l0,"+(t(f(n,i))-t(o(n,i)))+"l"+-r/2+",0l"+r/2+",0l0,"+(t(s(n,i))-t(f(n,i)))+"l0,"+(t(c(n,i))-t(s(n,i)))+"l"+r/2+",0l"+-r/2+",0z"})}),u}var r={top:0,right:0,bottom:0,left:0},w=null,b=null,h=Math.floor(Math.random()*1e4),e=null,i=d3.scale.linear(),t=d3.scale.linear(),l=function(n){return n.x},a=function(n){return n.y},f=function(n){return n.open},c=function(n){return n.close},o=function(n){return n.high},s=function(n){return n.low},k=[],v=[],d=!1,g=!0,y=n.utils.defaultColor(),rt=!1,nt,tt,p,it,ut=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return u.highlightPoint=function(n,t){u.clearHighlights();e.select(".nv-ohlcBar .nv-tick-0-"+n).classed("hover",t)},u.clearHighlights=function(){e.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},u.dispatch=ut,u.options=n.utils.optionsFunc.bind(u),u._options=Object.create({},{width:{get:function(){return w},set:function(n){w=n}},height:{get:function(){return b},set:function(n){b=n}},xScale:{get:function(){return i},set:function(n){i=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return nt},set:function(n){nt=n}},yDomain:{get:function(){return tt},set:function(n){tt=n}},xRange:{get:function(){return p},set:function(n){p=n}},yRange:{get:function(){return it},set:function(n){it=n}},forceX:{get:function(){return k},set:function(n){k=n}},forceY:{get:function(){return v},set:function(n){v=n}},padData:{get:function(){return d},set:function(n){d=n}},clipEdge:{get:function(){return g},set:function(n){g=n}},id:{get:function(){return h},set:function(n){h=n}},interactive:{get:function(){return rt},set:function(n){rt=n}},x:{get:function(){return l},set:function(n){l=n}},y:{get:function(){return a},set:function(n){a=n}},open:{get:function(){return f()},set:function(n){f=n}},close:{get:function(){return c()},set:function(n){c=n}},high:{get:function(){return o},set:function(n){o=n}},low:{get:function(){return s},set:function(n){s=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!=undefined?n.top:r.top;r.right=n.right!=undefined?n.right:r.right;r.bottom=n.bottom!=undefined?n.bottom:r.bottom;r.left=n.left!=undefined?n.left:r.left}},color:{get:function(){return y},set:function(t){y=n.utils.getColor(t)}}}),n.utils.initOptions(u),u};n.models.parallelCoordinates=function(){"use strict";function a(et){return ft.reset(),et.each(function(a){function at(n){return rt(h.map(function(i){var f;if(isNaN(n.values[i.key])||isNaN(parseFloat(n.values[i.key]))||wt){var r=t[i.key].domain(),e=t[i.key].range(),u=r[0]-(r[1]-r[0])/9;if(b.indexOf(i.key)<0&&(f=d3.scale.linear().domain([u,r[1]]).range([v-12,e[1]]),t[i.key].brush.y(f),b.push(i.key)),isNaN(n.values[i.key])||isNaN(parseFloat(n.values[i.key])))return[o(i.key),t[i.key](u)]}return st!==undefined&&(b.length>0||wt?(st.style("display","inline"),ht.style("display","inline")):(st.style("display","none"),ht.style("display","none"))),[o(i.key),t[i.key](n.values[i.key])]}))}function ii(n){s.forEach(function(i){var r=t[i.dimension].brush.y().domain();i.hasOnlyNaN&&(i.extent[1]=(t[i.dimension].domain()[1]-r[0])*(i.extent[1]-i.extent[0])/(gt[i.dimension]-i.extent[0])+r[0]);i.hasNaN&&(i.extent[0]=r[0]);n&&t[i.dimension].brush.extent(i.extent)});c.select(".nv-brushBackground").each(function(n){d3.select(this).call(t[n.key].brush)}).selectAll("rect").attr("x",-8).attr("width",16);ri()}function oi(){l===!1&&(l=!0,ii(!0))}function si(){ct=w.filter(function(n){return!t[n].brush.empty()});et=ct.map(function(n){return t[n].brush.extent()});s=[];ct.forEach(function(n,t){s[t]={dimension:n,extent:et[t],hasNaN:!1,hasOnlyNaN:!1}});u=[];e.style("display",function(n){var i=ct.every(function(i,r){return(isNaN(n.values[i])||isNaN(parseFloat(n.values[i])))&&et[r][0]==t[i].brush.y().domain()[0]?!0:et[r][0]<=n.values[i]&&n.values[i]<=et[r][1]&&!isNaN(parseFloat(n.values[i]))});return i&&u.push(n),i?null:"none"});ri();f.brush({filters:s,active:u})}function hi(){var n=ct.length>0?!0:!1;s.forEach(function(n){n.extent[0]===t[n.dimension].brush.y().domain()[0]&&b.indexOf(n.dimension)>=0&&(n.hasNaN=!0);n.extent[1]<t[n.dimension].domain()[0]&&(n.hasOnlyNaN=!0)});f.brushEnd(u,n)}function ri(){c.select(".nv-axis").each(function(n){var i=s.filter(function(t){return t.dimension==n.key});lt[n.key]=t[n.key].domain();i.length!=0&&l&&(lt[n.key]=[],i[0].extent[1]>t[n.key].domain()[0]&&(lt[n.key]=[i[0].extent[1]]),i[0].extent[0]>=t[n.key].domain()[0]&&lt[n.key].push(i[0].extent[0]));d3.select(this).call(ut.scale(t[n.key]).tickFormat(n.format).tickValues(lt[n.key]))})}function ci(n){g[n.key]=this.parentNode.__origin__=o(n.key);y.attr("visibility","hidden")}function li(n){g[n.key]=Math.min(p,Math.max(0,this.parentNode.__origin__+=d3.event.x));e.attr("d",at);h.sort(function(n,t){return kt(n.key)-kt(t.key)});h.forEach(function(n,t){return n.currentPosition=t});o.domain(h.map(function(n){return n.key}));c.attr("transform",function(n){return"translate("+kt(n.key)+")"})}function ai(n){delete this.parentNode.__origin__;delete g[n.key];d3.select(this.parentNode).attr("transform","translate("+o(n.key)+")");e.attr("d",at);y.attr("d",at).attr("visibility",null);f.dimensionsOrder(h)}function kt(n){var t=g[n];return t==null?o(n):t}var vt=d3.select(this),pt,dt,ni,st,ht,ft,ti,yt;p=n.utils.availableWidth(nt,vt,r);v=n.utils.availableHeight(tt,vt,r);n.utils.initSVG(vt);a[0].values===undefined&&(pt=[],a.forEach(function(n){var t={},i=Object.keys(n);i.forEach(function(i){i!=="name"&&(t[i]=n[i])});pt.push({key:n.name,values:t})}),a=pt);dt=a.map(function(n){return n.values});u.length===0&&(u=a);w=i.sort(function(n,t){return n.currentPosition-t.currentPosition}).map(function(n){return n.key});h=i.filter(function(n){return!n.disabled});o.rangePoints([0,p],1).domain(h.map(function(n){return n.key}));var gt={},wt=!1,lt=[];w.forEach(function(n){var f=d3.extent(dt,function(t){return+t[n]}),r=f[0],i=f[1],e=!1,u;(isNaN(r)||isNaN(i))&&(e=!0,r=0,i=0);r===i&&(r=r-1,i=i+1);u=s.filter(function(t){return t.dimension==n});u.length!==0&&(e?(r=t[n].domain()[0],i=t[n].domain()[1]):!u[0].hasOnlyNaN&&l?(r=r>u[0].extent[0]?u[0].extent[0]:r,i=i<u[0].extent[1]?u[0].extent[1]:i):u[0].hasNaN&&(i=i<u[0].extent[1]?u[0].extent[1]:i,gt[n]=t[n].domain()[1],wt=!0));t[n]=d3.scale.linear().domain([r,i]).range([(v-12)*.9,0]);b=[];t[n].brush=d3.svg.brush().y(t[n]).on("brushstart",oi).on("brush",si).on("brushend",hi)});var ot=vt.selectAll("g.nv-wrap.nv-parallelCoordinates").data([a]),ui=ot.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates"),bt=ui.append("g"),fi=ot.select("g");bt.append("g").attr("class","nv-parallelCoordinates background");bt.append("g").attr("class","nv-parallelCoordinates foreground");bt.append("g").attr("class","nv-parallelCoordinates missingValuesline");ot.attr("transform","translate("+r.left+","+r.top+")");rt.interpolate("cardinal").tension(it);ut.orient("left");ni=d3.behavior.drag().on("dragstart",ci).on("drag",li).on("dragend",ai);ft=o.range()[1]-o.range()[0];ft=isNaN(ft)?o.range()[0]:ft;isNaN(ft)||(ti=[0+ft/2,v-12,p-ft/2,v-12],st=ot.select(".missingValuesline").selectAll("line").data([ti]),st.enter().append("line"),st.exit().remove(),st.attr("x1",function(n){return n[0]}).attr("y1",function(n){return n[1]}).attr("x2",function(n){return n[2]}).attr("y2",function(n){return n[3]}),ht=ot.select(".missingValuesline").selectAll("text").data([k]),ht.append("text").data([k]),ht.enter().append("text"),ht.exit().remove(),ht.attr("y",v).attr("x",p-92-ft/2).text(function(n){return n}));y=ot.select(".background").selectAll("path").data(a);y.enter().append("path");y.exit().remove();y.attr("d",at);e=ot.select(".foreground").selectAll("path").data(a);e.enter().append("path");e.exit().remove();e.attr("d",at).style("stroke-width",function(n){return isNaN(n.strokeWidth)&&(n.strokeWidth=1),n.strokeWidth}).attr("stroke",function(n,t){return n.color||d(n,t)});e.on("mouseover",function(n,t){d3.select(this).classed("hover",!0).style("stroke-width",n.strokeWidth+2+"px").style("stroke-opacity",1);f.elementMouseover({label:n.name,color:n.color||d(n,t),values:n.values,dimensions:h})});e.on("mouseout",function(n,t){d3.select(this).classed("hover",!1).style("stroke-width",n.strokeWidth+"px").style("stroke-opacity",.7);f.elementMouseout({label:n.name,index:t})});e.on("mousemove",function(){f.elementMousemove()});e.on("click",function(n){f.elementClick({id:n.id})});c=fi.selectAll(".dimension").data(h);yt=c.enter().append("g").attr("class","nv-parallelCoordinates dimension");c.attr("transform",function(n){return"translate("+o(n.key)+",0)"});yt.append("g").attr("class","nv-axis");yt.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(n){f.elementMouseover({label:n.tooltip||n.key,color:n.color})}).on("mouseout",function(n){f.elementMouseout({label:n.tooltip})}).on("mousemove",function(){f.elementMousemove()}).call(ni);yt.append("g").attr("class","nv-brushBackground");c.exit().remove();c.select(".nv-label").text(function(n){return n.key});ii(l);var ct=w.filter(function(n){return!t[n].brush.empty()}),et=ct.map(function(n){return t[n].brush.extent()}),ei=u.slice(0);u=[];e.style("display",function(n){var i=ct.every(function(i,r){return(isNaN(n.values[i])||isNaN(parseFloat(n.values[i])))&&et[r][0]==t[i].brush.y().domain()[0]?!0:et[r][0]<=n.values[i]&&n.values[i]<=et[r][1]&&!isNaN(parseFloat(n.values[i]))});return i&&u.push(n),i?null:"none"});(s.length>0||!n.utils.arrayEquals(u,ei))&&f.activeChanged(u)}),a}var r={top:30,right:0,bottom:10,left:0},nt=null,tt=null,p=null,v=null,o=d3.scale.ordinal(),t={},k="undefined values",i=[],h=[],w=[],l=!0,d=n.utils.defaultColor(),s=[],u=[],g=[],b=[],it=1,e,y,c,rt=d3.svg.line(),ut=d3.svg.axis(),f=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),ft=n.utils.renderWatch(f);return a.dispatch=f,a.options=n.utils.optionsFunc.bind(a),a._options=Object.create({},{width:{get:function(){return nt},set:function(n){nt=n}},height:{get:function(){return tt},set:function(n){tt=n}},dimensionData:{get:function(){return i},set:function(n){i=n}},displayBrush:{get:function(){return l},set:function(n){l=n}},filters:{get:function(){return s},set:function(n){s=n}},active:{get:function(){return u},set:function(n){u=n}},lineTension:{get:function(){return it},set:function(n){it=n}},undefinedValuesLabel:{get:function(){return k},set:function(n){k=n}},dimensions:{get:function(){return i.map(function(n){return n.key})},set:function(t){n.deprecated("dimensions","use dimensionData instead");i.length===0?t.forEach(function(n){i.push({key:n})}):t.forEach(function(n,t){i[t].key=n})}},dimensionNames:{get:function(){return i.map(function(n){return n.key})},set:function(t){n.deprecated("dimensionNames","use dimensionData instead");w=[];i.length===0?t.forEach(function(n){i.push({key:n})}):t.forEach(function(n,t){i[t].key=n})}},dimensionFormats:{get:function(){return i.map(function(n){return n.format})},set:function(t){n.deprecated("dimensionFormats","use dimensionData instead");i.length===0?t.forEach(function(n){i.push({format:n})}):t.forEach(function(n,t){i[t].format=n})}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},color:{get:function(){return d},set:function(t){d=n.utils.getColor(t)}}}),n.utils.initOptions(a),a};n.models.parallelCoordinatesChart=function(){"use strict";function t(h){return w.reset(),w.models(u),h.each(function(h){var a=d3.select(this),p,rt;n.utils.initSVG(a);var ut=this,tt=n.utils.availableWidth(v,a,i),w=n.utils.availableHeight(l,a,i);if(t.update=function(){a.call(t)},t.container=this,f.setter(g(r),t.update).getter(d(r)).update(),f.disabled=r.map(function(n){return!!n.disabled}),r=r.map(function(n){return n.disabled=!!n.disabled,n}),r.forEach(function(n,t){n.originalPosition=isNaN(n.originalPosition)?t:n.originalPosition;n.currentPosition=isNaN(n.currentPosition)?t:n.currentPosition}),!o){o={};for(p in f)o[p]=f[p]instanceof Array?f[p].slice(0):f[p]}if(h&&h.length)a.selectAll(".nv-noData").remove();else return n.utils.noData(t,a),t;var k=a.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([h]),it=k.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),nt=k.select("g");it.append("g").attr("class","nv-parallelCoordinatesWrap");it.append("g").attr("class","nv-legendWrap");nt.select("rect").attr("width",tt).attr("height",w>0?w:0);y?(e.width(tt).color(function(){return"rgb(188,190,192)"}),nt.select(".nv-legendWrap").datum(r.sort(function(n,t){return n.originalPosition-t.originalPosition})).call(e),b||e.height()===i.top||(i.top=e.height(),w=n.utils.availableHeight(l,a,i)),k.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-i.top+")")):nt.select(".nv-legendWrap").selectAll("*").remove();k.attr("transform","translate("+i.left+","+i.top+")");u.width(tt).height(w).dimensionData(r).displayBrush(c);rt=nt.select(".nv-parallelCoordinatesWrap ").datum(h);rt.transition().call(u);u.dispatch.on("brushEnd",function(n,t){t?(c=!0,s.brushEnd(n)):c=!1});e.dispatch.on("stateChange",function(n){for(var i in n)f[i]=n[i];s.stateChange(f);t.update()});u.dispatch.on("dimensionsOrder",function(){r.sort(function(n,t){return n.currentPosition-t.currentPosition});var n=!1;r.forEach(function(t,i){t.currentPosition=i;t.currentPosition!==t.originalPosition&&(n=!0)});s.dimensionsOrder(r,n)});s.on("changeState",function(n){typeof n.disabled!="undefined"&&(r.forEach(function(t,i){t.disabled=n.disabled[i]}),f.disabled=n.disabled);t.update()})}),w.renderEnd("parraleleCoordinateChart immediate"),t}var u=n.models.parallelCoordinates(),e=n.models.legend(),h=n.models.tooltip(),nt=n.models.tooltip(),i={top:0,right:0,bottom:0,left:0},b=null,v=null,l=null,y=!0,a=n.utils.defaultColor(),f=n.utils.state(),r=[],c=!0,o=null,k=null,p="undefined",s=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),tt=function(){return showControls?180:0},w=n.utils.renderWatch(s),d=function(n){return function(){return{active:n.map(function(n){return!n.disabled})}}},g=function(n){return function(t){t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};h.contentGenerator(function(n){var t='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+n.color+'"><\/div><\/td><td><strong>'+n.key+"<\/strong><\/td><\/tr><\/thead>";return n.series.length!==0&&(t=t+'<tbody><tr><td height ="10px"><\/td><\/tr>',n.series.forEach(function(n){t=t+'<tr><td class="legend-color-guide"><div style="background-color:'+n.color+'"><\/div><\/td><td class="key">'+n.key+'<\/td><td class="value">'+n.value+"<\/td><\/tr>"}),t=t+"<\/tbody>"),t=t+"<\/table>"});u.dispatch.on("elementMouseover.tooltip",function(n){var t={key:n.label,color:n.color,series:[]};n.values&&(Object.keys(n.values).forEach(function(i){var r=n.dimensions.filter(function(n){return n.key===i})[0],u;r&&(u=isNaN(n.values[i])||isNaN(parseFloat(n.values[i]))?p:r.format(n.values[i]),t.series.push({idx:r.currentPosition,key:i,value:u,color:r.color}))}),t.series.sort(function(n,t){return n.idx-t.idx}));h.data(t).hidden(!1)});u.dispatch.on("elementMouseout.tooltip",function(){h.hidden(!0)});u.dispatch.on("elementMousemove.tooltip",function(){h()});return t.dispatch=s,t.parallelCoordinates=u,t.legend=e,t.tooltip=h,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return v},set:function(n){v=n}},height:{get:function(){return l},set:function(n){l=n}},showLegend:{get:function(){return y},set:function(n){y=n}},defaultState:{get:function(){return o},set:function(n){o=n}},dimensionData:{get:function(){return r},set:function(n){r=n}},displayBrush:{get:function(){return c},set:function(n){c=n}},noData:{get:function(){return k},set:function(n){k=n}},nanValue:{get:function(){return p},set:function(n){p=n}},margin:{get:function(){return i},set:function(n){n.top!==undefined&&(i.top=n.top,b=n.top);i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}},color:{get:function(){return a},set:function(t){a=n.utils.getColor(t);e.color(a);u.color(a)}}}),n.utils.inheritOptions(t,u),n.utils.initOptions(t),t};n.models.pie=function(){"use strict";function h(ct){return ut.reset(),ct.each(function(h){function pi(n,t){n.endAngle=isNaN(n.endAngle)?0:n.endAngle;n.startAngle=isNaN(n.startAngle)?0:n.startAngle;f||(n.innerRadius=0);var i=d3.interpolate(this._current,n);return this._current=i(0),function(n){return s[t](i(n))}}var ti=ft-t.left-t.right,ii=et-t.top-t.bottom,lt=Math.min(ti,ii)/2,vt=[],dt=[],ui,fi,pt,bt,gt,kt,ni,yt,yi,at,ct;if(g=d3.select(this),i.length===0)for(ui=lt-lt/5,fi=a*lt,ct=0;ct<h[0].length;ct++)vt.push(ui),dt.push(fi);else w?(vt=i.map(function(n){return(n.outer-n.outer/5)*lt}),dt=i.map(function(n){return(n.inner-n.inner/5)*lt}),a=d3.min(i.map(function(n){return n.inner-n.inner/5}))):(vt=i.map(function(n){return n.outer*lt}),dt=i.map(function(n){return n.inner*lt}),a=d3.min(i.map(function(n){return n.inner})));n.utils.initSVG(g);var wt=g.selectAll(".nv-wrap.nv-pie").data(h),ai=wt.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+d),ei=ai.append("g"),oi=wt.select("g"),vi=ei.append("g").attr("class","nv-pie");ei.append("g").attr("class","nv-pieLabels");wt.attr("transform","translate("+t.left+","+t.top+")");oi.select(".nv-pie").attr("transform","translate("+ti/2+","+ii/2+")");oi.select(".nv-pieLabels").attr("transform","translate("+ti/2+","+ii/2+")");g.on("click",function(n,t){r.chartClick({data:n,index:t,pos:d3.event,id:d})});for(s=[],ht=[],ct=0;ct<h[0].length;ct++)pt=d3.svg.arc().outerRadius(vt[ct]),bt=d3.svg.arc().outerRadius(vt[ct]+5),e!==!1&&(pt.startAngle(e),bt.startAngle(e)),o!==!1&&(pt.endAngle(o),bt.endAngle(o)),f&&(pt.innerRadius(dt[ct]),bt.innerRadius(dt[ct])),pt.cornerRadius&&b&&(pt.cornerRadius(b),bt.cornerRadius(b)),s.push(pt),ht.push(bt);gt=d3.layout.pie().sort(null).value(function(n){return n.disabled?0:v(n)});gt.padAngle&&it&&gt.padAngle(it);f&&p&&(vi.append("text").attr("class","nv-pie-title"),wt.select(".nv-pie-title").style("text-anchor","middle").text(function(){return p}).style("font-size",Math.min(ti,ii)*a*2/(p.length+2)+"px").attr("dy","0.35em").attr("transform",function(){return"translate(0, "+st+")"}));kt=wt.select(".nv-pie").selectAll(".nv-slice").data(gt);ni=wt.select(".nv-pieLabels").selectAll(".nv-label").data(gt);kt.exit().remove();ni.exit().remove();yt=kt.enter().append("g");yt.attr("class","nv-slice");yt.on("mouseover",function(n,t){d3.select(this).classed("hover",!0);w&&d3.select(this).select("path").transition().duration(70).attr("d",ht[t]);r.elementMouseover({data:n.data,index:t,color:d3.select(this).style("fill"),percent:(n.endAngle-n.startAngle)/(2*Math.PI)})});yt.on("mouseout",function(n,t){d3.select(this).classed("hover",!1);w&&d3.select(this).select("path").transition().duration(50).attr("d",s[t]);r.elementMouseout({data:n.data,index:t})});yt.on("mousemove",function(n,t){r.elementMousemove({data:n.data,index:t})});yt.on("click",function(n,t){var i=this;r.elementClick({data:n.data,index:t,color:d3.select(this).style("fill"),event:d3.event,element:i})});yt.on("dblclick",function(n,t){r.elementDblClick({data:n.data,index:t,color:d3.select(this).style("fill")})});if(kt.attr("fill",function(n,t){return nt(n.data,t)}),kt.attr("stroke",function(n,t){return nt(n.data,t)}),yi=yt.append("path").each(function(n){this._current=n}),kt.select("path").transition().duration(rt).attr("d",function(n,t){return s[t](n)}).attrTween("d",pi),ot){for(at=[],ct=0;ct<h[0].length;ct++)at.push(s[ct]),u?f&&(at[ct]=d3.svg.arc().outerRadius(s[ct].outerRadius()),e!==!1&&at[ct].startAngle(e),o!==!1&&at[ct].endAngle(o)):f||at[ct].innerRadius(0);ni.enter().append("g").classed("nv-label",!0).each(function(n){var t=d3.select(this);t.attr("transform",function(n,t){if(l){n.outerRadius=vt[t]+10;n.innerRadius=vt[t]+15;var i=(n.startAngle+n.endAngle)/2*(180/Math.PI);return(n.startAngle+n.endAngle)/2<Math.PI?i-=90:i+=90,"translate("+at[t].centroid(n)+") rotate("+i+")"}return n.outerRadius=lt+10,n.innerRadius=lt+15,"translate("+at[t].centroid(n)+")"});t.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);t.append("text").style("text-anchor",l?(n.startAngle+n.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var si={},ri=14,hi=140,ci=function(n){return Math.floor(n[0]/hi)*hi+","+Math.floor(n[1]/ri)*ri},li=function(n){return(n.endAngle-n.startAngle)/(2*Math.PI)};ni.watchTransition(ut,"pie labels").attr("transform",function(n,t){var r,i,u,f;return l?(n.outerRadius=vt[t]+10,n.innerRadius=vt[t]+15,r=(n.startAngle+n.endAngle)/2*(180/Math.PI),(n.startAngle+n.endAngle)/2<Math.PI?r-=90:r+=90,"translate("+at[t].centroid(n)+") rotate("+r+")"):(n.outerRadius=lt+10,n.innerRadius=lt+15,i=at[t].centroid(n),u=li(n),n.value&&u>=tt&&(f=ci(i),si[f]&&(i[1]-=ri),si[ci(i)]=!0),"translate("+i+")")});ni.select(".nv-label text").style("text-anchor",function(n){return l?(n.startAngle+n.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(n,t){var r=li(n),i="";if(!n.value||r<tt)return"";if(typeof y=="function")i=y(n,t,{key:k(n.data),value:v(n.data),percent:c(r)});else switch(y){case"key":i=k(n.data);break;case"value":i=c(v(n.data));break;case"percent":i=d3.format("%")(r)}return i})}}),ut.renderEnd("pie immediate"),h}var t={top:0,right:0,bottom:0,left:0},ft=500,et=500,k=function(n){return n.x},v=function(n){return n.y},d=Math.floor(Math.random()*1e4),g=null,nt=n.utils.defaultColor(),c=d3.format(",.2f"),ot=!0,u=!1,y="key",tt=.02,f=!1,p=!1,w=!0,st=0,l=!1,e=!1,it=!1,o=!1,b=0,a=.5,rt=250,i=[],r=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),s=[],ht=[],ut=n.utils.renderWatch(r);return h.dispatch=r,h.options=n.utils.optionsFunc.bind(h),h._options=Object.create({},{arcsRadius:{get:function(){return i},set:function(n){i=n}},width:{get:function(){return ft},set:function(n){ft=n}},height:{get:function(){return et},set:function(n){et=n}},showLabels:{get:function(){return ot},set:function(n){ot=n}},title:{get:function(){return p},set:function(n){p=n}},titleOffset:{get:function(){return st},set:function(n){st=n}},labelThreshold:{get:function(){return tt},set:function(n){tt=n}},valueFormat:{get:function(){return c},set:function(n){c=n}},x:{get:function(){return k},set:function(n){k=n}},id:{get:function(){return d},set:function(n){d=n}},endAngle:{get:function(){return o},set:function(n){o=n}},startAngle:{get:function(){return e},set:function(n){e=n}},padAngle:{get:function(){return it},set:function(n){it=n}},cornerRadius:{get:function(){return b},set:function(n){b=n}},donutRatio:{get:function(){return a},set:function(n){a=n}},labelsOutside:{get:function(){return u},set:function(n){u=n}},labelSunbeamLayout:{get:function(){return l},set:function(n){l=n}},donut:{get:function(){return f},set:function(n){f=n}},growOnHover:{get:function(){return w},set:function(n){w=n}},pieLabelsOutside:{get:function(){return u},set:function(t){u=t;n.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return u},set:function(t){u=t;n.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return c},set:function(t){c=t;n.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return t},set:function(n){t.top=typeof n.top!="undefined"?n.top:t.top;t.right=typeof n.right!="undefined"?n.right:t.right;t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom;t.left=typeof n.left!="undefined"?n.left:t.left}},duration:{get:function(){return rt},set:function(n){rt=n;ut.reset(rt)}},y:{get:function(){return v},set:function(n){v=d3.functor(n)}},color:{get:function(){return nt},set:function(t){nt=n.utils.getColor(t)}},labelType:{get:function(){return y},set:function(n){y=n||"key"}}}),n.utils.initOptions(h),h};n.models.pieChart=function(){"use strict";function t(o){return v.reset(),v.models(r),o.each(function(o){var c=d3.select(this),p,k,rt;n.utils.initSVG(c);var ut=this,l=n.utils.availableWidth(y,c,i),nt=n.utils.availableHeight(s,c,i);if(t.update=function(){c.transition().call(t)},t.container=this,f.setter(g(o),t.update).getter(d(o)).update(),f.disabled=o.map(function(n){return!!n.disabled}),!e){e={};for(p in f)e[p]=f[p]instanceof Array?f[p].slice(0):f[p]}if(o&&o.length)c.selectAll(".nv-noData").remove();else return n.utils.noData(t,c),t;var v=c.selectAll("g.nv-wrap.nv-pieChart").data([o]),tt=v.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),it=v.select("g");tt.append("g").attr("class","nv-pieWrap");tt.append("g").attr("class","nv-legendWrap");w?h==="top"?(u.width(l).key(r.x()),v.select(".nv-legendWrap").datum(o).call(u),b||u.height()===i.top||(i.top=u.height(),nt=n.utils.availableHeight(s,c,i)),v.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")")):h==="right"&&(k=n.models.legend().width(),l/2<k&&(k=l/2),u.height(nt).key(r.x()),u.width(k),l-=u.width(),v.select(".nv-legendWrap").datum(o).call(u).attr("transform","translate("+l+",0)")):it.select(".nv-legendWrap").selectAll("*").remove();v.attr("transform","translate("+i.left+","+i.top+")");r.width(l).height(nt);rt=it.select(".nv-pieWrap").datum([o]);d3.transition(rt).call(r);u.dispatch.on("stateChange",function(n){for(var i in n)f[i]=n[i];a.stateChange(f);t.update()});a.on("changeState",function(n){typeof n.disabled!="undefined"&&(o.forEach(function(t,i){t.disabled=n.disabled[i]}),f.disabled=n.disabled);t.update()})}),v.renderEnd("pieChart immediate"),t}var r=n.models.pie(),u=n.models.legend(),o=n.models.tooltip(),i={top:30,right:20,bottom:20,left:20},b=null,y=null,s=null,p=!1,w=!0,h="top",c=n.utils.defaultColor(),f=n.utils.state(),e=null,k=null,l=250,a=d3.dispatch("stateChange","changeState","renderEnd");o.duration(0).headerEnabled(!1).valueFormatter(function(n,t){return r.valueFormat()(n,t)});var v=n.utils.renderWatch(a),d=function(n){return function(){return{active:n.map(function(n){return!n.disabled})}}},g=function(n){return function(t){t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};r.dispatch.on("elementMouseover.tooltip",function(n){n.series={key:t.x()(n.data),value:t.y()(n.data),color:n.color,percent:n.percent};p||(delete n.percent,delete n.series.percent);o.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(){o.hidden(!0)});r.dispatch.on("elementMousemove.tooltip",function(){o()});return t.legend=u,t.dispatch=a,t.pie=r,t.tooltip=o,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return y},set:function(n){y=n}},height:{get:function(){return s},set:function(n){s=n}},noData:{get:function(){return k},set:function(n){k=n}},showTooltipPercent:{get:function(){return p},set:function(n){p=n}},showLegend:{get:function(){return w},set:function(n){w=n}},legendPosition:{get:function(){return h},set:function(n){h=n}},defaultState:{get:function(){return e},set:function(n){e=n}},color:{get:function(){return c},set:function(n){c=n;u.color(c);r.color(c)}},duration:{get:function(){return l},set:function(n){l=n;v.reset(l);r.duration(l)}},margin:{get:function(){return i},set:function(n){n.top!==undefined&&(i.top=n.top,b=n.top);i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}}}),n.utils.inheritOptions(t,r),n.utils.initOptions(t),t};n.models.sankey=function(){"use strict";function y(){t.forEach(function(n){n.sourceLinks=[];n.targetLinks=[]});o.forEach(function(n){var i=n.source,r=n.target;typeof i=="number"&&(i=n.source=t[n.source]);typeof r=="number"&&(r=n.target=t[n.target]);i.sourceLinks.push(n);r.targetLinks.push(n)})}function p(){t.forEach(function(n){n.value=Math.max(d3.sum(n.sourceLinks,f),d3.sum(n.targetLinks,f))})}function w(){for(var r=t,i,n=0;r.length&&n<t.length;)i=[],r.forEach(function(t){t.x=n;t.dx=e;t.sourceLinks.forEach(function(n){i.indexOf(n.target)<0&&i.push(n.target)})}),r=i,++n;c&&b(n);k((u[0]-e)/(n-1))}function b(n){t.forEach(function(t){t.sourceLinks.length||(t.x=n-1)})}function k(n){t.forEach(function(t){t.x*=n})}function d(n){function l(){var n=d3.min(r,function(n){return(u[1]-(n.length-1)*i)/d3.sum(n,f)});r.forEach(function(t){t.forEach(function(t,i){t.y=i;t.dy=t.value*n})});o.forEach(function(t){t.dy=t.value*n})}function a(n){function t(n){return(n.source.y+n.sy+n.dy/2)*n.value}r.forEach(function(i){i.forEach(function(i){if(i.targetLinks.length){var r=d3.sum(i.targetLinks,t)/d3.sum(i.targetLinks,f);i.y+=(r-s(i))*n}})})}function v(n){function t(n){return(n.target.y+n.ty+n.dy/2)*n.value}r.slice().reverse().forEach(function(i){i.forEach(function(i){if(i.sourceLinks.length){var r=d3.sum(i.sourceLinks,t)/d3.sum(i.sourceLinks,f);i.y+=(r-s(i))*n}})})}function c(){r.forEach(function(n){var t,r,e=0,o=n.length,f;for(n.sort(y),f=0;f<o;++f)t=n[f],r=e-t.y,r>0&&(t.y+=r),e=t.y+t.dy+i;if(r=e-i-u[1],r>0)for(e=t.y-=r,f=o-2;f>=0;--f)t=n[f],r=t.y+t.dy+i-e,r>0&&(t.y-=r),e=t.y})}function y(n,t){return n.y-t.y}var r=d3.nest().key(function(n){return n.x}).sortKeys(d3.ascending).entries(t).map(function(n){return n.values}),e;for(l(),c(),h(),e=1;n>0;--n)v(e*=.99),c(),h(),a(e),c(),h()}function h(){function n(n,t){return n.source.y-t.source.y}function i(n,t){return n.target.y-t.target.y}t.forEach(function(t){t.sourceLinks.sort(i);t.targetLinks.sort(n)});t.forEach(function(n){var t=0,i=0;n.sourceLinks.forEach(function(n){n.sy=t;t+=n.dy});n.targetLinks.forEach(function(n){n.ty=i;i+=n.dy})})}function f(n){return n.value}var r={},e=24,i=8,u=[1,1],t=[],o=[],c=!0,a=function(n){y();p();w();d(n)},v=function(){h()},l=function(){function t(t){var i=t.source.x+t.source.dx,r=t.target.x,u=d3.interpolateNumber(i,r),o=u(n),s=u(1-n),f=t.source.y+t.sy+t.dy/2,e=t.target.y+t.ty+t.dy/2;return"M"+i+","+f+"C"+o+","+f+" "+s+","+e+" "+r+","+e}var n=.5;return t.curvature=function(i){return arguments.length?(n=+i,t):n},t},s=function(n){return n.y+n.dy/2};return r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{nodeWidth:{get:function(){return e},set:function(n){e=+n}},nodePadding:{get:function(){return i},set:function(n){i=n}},nodes:{get:function(){return t},set:function(n){t=n}},links:{get:function(){return o},set:function(n){o=n}},size:{get:function(){return u},set:function(n){u=n}},sinksRight:{get:function(){return c},set:function(n){c=n}},layout:{get:function(){a(32)},set:function(n){a(n)}},relayout:{get:function(){v()},set:function(){}},center:{get:function(){return s()},set:function(n){typeof n=="function"&&(s=n)}},link:{get:function(){return l()},set:function(n){return typeof n=="function"&&(l=n),l()}}}),n.utils.initOptions(r),r};n.models.sankeyChart=function(){"use strict";function r(n){return n.each(function(t){function g(n){d3.select(this).attr("transform","translate("+n.x+","+(n.y=Math.max(0,Math.min(f-n.dy,d3.event.y)))+")");i.relayout();h.attr("d",e)}var b={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},{source:3,target:5,value:186}]},k=!1,d=!1,r,e,h,w;if((typeof t.nodes=="object"&&t.nodes.length)>=0&&(typeof t.links=="object"&&t.links.length)>=0&&(k=!0),t.nodes&&t.nodes.length>0&&t.links&&t.links.length>0&&(d=!0),!k)return console.error("NVD3 Sankey chart error:","invalid data format for",t),console.info("Valid data format is: ",b,JSON.stringify(b)),p(n,"Error loading chart, data is invalid"),!1;if(!d)return p(n,"No data available"),!1;r=n.append("svg").attr("width",u).attr("height",f).append("g").attr("class","nvd3 nv-wrap nv-sankeyChart");i.nodeWidth(o).nodePadding(s).size([u,f]);e=i.link();i.nodes(t.nodes).links(t.links).layout(32).center(c);h=r.append("g").selectAll(".link").data(t.links).enter().append("path").attr("class","link").attr("d",e).style("stroke-width",function(n){return Math.max(1,n.dy)}).sort(function(n,t){return t.dy-n.dy});h.append("title").text(l);w=r.append("g").selectAll(".node").data(t.nodes).enter().append("g").attr("class","node").attr("transform",function(n){return"translate("+n.x+","+n.y+")"}).call(d3.behavior.drag().origin(function(n){return n}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",g));w.append("rect").attr("height",function(n){return n.dy}).attr("width",i.nodeWidth()).style("fill",a).style("stroke",v).append("title").text(y);w.append("text").attr("x",-6).attr("y",function(n){return n.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(n){return n.name}).filter(function(n){return n.x<u/2}).attr("x",6+i.nodeWidth()).attr("text-anchor","start")}),r}var t={top:5,right:0,bottom:5,left:0},i=n.models.sankey(),u=600,f=400,o=36,s=40,h="units",c=undefined,w=d3.format(",.0f"),e=function(n){return w(n)+" "+h},b=d3.scale.category20(),l=function(n){return n.source.name+" → "+n.target.name+"\n"+e(n.value)},a=function(n){return n.color=b(n.name.replace(/ .*/,""))},v=function(n){return d3.rgb(n.color).darker(2)},y=function(n){return n.name+"\n"+e(n.value)},p=function(n,t){n.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(t)};return r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{units:{get:function(){return h},set:function(n){h=n}},width:{get:function(){return u},set:function(n){u=n}},height:{get:function(){return f},set:function(n){f=n}},format:{get:function(){return e},set:function(n){e=n}},linkTitle:{get:function(){return l},set:function(n){l=n}},nodeWidth:{get:function(){return o},set:function(n){o=n}},nodePadding:{get:function(){return s},set:function(n){s=n}},center:{get:function(){return c},set:function(n){c=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},nodeStyle:{get:function(){return{}},set:function(n){a=n.fillColor!==undefined?n.fillColor:a;v=n.strokeColor!==undefined?n.strokeColor:v;y=n.title!==undefined?n.title:y}}}),n.utils.initOptions(r),r};n.models.scatter=function(){"use strict";function si(n){var t;return t=n[0].series+":"+n[1],ri[t]=ri[t]||{}}function hi(n){var t;t=n[0].series+":"+n[1];delete ri[t]}function ei(n){for(var i,r,u=si(n),f=!1,t=1;t<arguments.length;t+=2)i=arguments[t],r=arguments[t+1](n[0],n[1]),u[i]===r&&u.hasOwnProperty(i)||(u[i]=r,f=!0);return f}function s(ct){return c.reset(),ct.each(function(ct){function nr(){var o,c,k,h,d,g,tt,s;if(w=!1,!b)return!1;if(ht===!0){if(o=d3.merge(ct.map(function(r,e){return r.values.map(function(r,o){var s=u(r,o),h=f(r,o);return[n.utils.NaNtoZero(t(s))+Math.random()*.0001,n.utils.NaNtoZero(i(h))+Math.random()*.0001,e,o,r]}).filter(function(n,t){return nt(n[4],t)})})),o.length==0)return!1;o.length<3&&(o.push([t.range()[0]-20,i.range()[0]-20,null,null]),o.push([t.range()[1]+20,i.range()[1]+20,null,null]),o.push([t.range()[0]-20,i.range()[0]+20,null,null]),o.push([t.range()[1]+20,i.range()[1]-20,null,null]));c=d3.geom.polygon([[-10,-10],[-10,a+10],[l+10,a+10],[l+10,-10]]);k=d3.geom.voronoi(o).map(function(n,t){return{data:c.clip(n),series:o[t][2],point:o[t][3]}});ri.select(".nv-point-paths").selectAll("path").remove();h=ri.select(".nv-point-paths").selectAll("path").data(k);d=h.enter().append("svg:path").attr("d",function(n){return n&&n.data&&n.data.length!==0?"M"+n.data.join(",")+"Z":"M 0 0"}).attr("id",function(n,t){return"nv-path-"+t}).attr("clip-path",function(n,t){return"url(#nv-clip-"+v+"-"+t+")"});gt&&d.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));ut&&(ri.select(".nv-point-clips").selectAll("*").remove(),g=ri.select(".nv-point-clips").selectAll("clipPath").data(o),tt=g.enter().append("svg:clipPath").attr("id",function(n,t){return"nv-clip-"+v+"-"+t}).append("svg:circle").attr("cx",function(n){return n[0]}).attr("cy",function(n){return n[1]}).attr("r",ni));s=function(n,e,o){var h,s;if(w)return 0;if(h=ct[e.series],h!==undefined){s=h.values[e.point];s.color=p(h,e.series);s.x=u(s);s.y=f(s);var c=y.node().getBoundingClientRect(),l=window.pageYOffset||document.documentElement.scrollTop,a=window.pageXOffset||document.documentElement.scrollLeft,v={left:t(u(s,e.point))+c.left+a+r.left+10,top:i(f(s,e.point))+c.top+l+r.top+10};o({point:s,series:h,pos:v,relativePos:[t(u(s,e.point))+r.left,i(f(s,e.point))+r.top],seriesIndex:e.series,pointIndex:e.point,event:d3.event,element:n})}};h.on("click",function(n){s(this,n,e.elementClick)}).on("dblclick",function(n){s(this,n,e.elementDblClick)}).on("mouseover",function(n){s(this,n,e.elementMouseover)}).on("mouseout",function(n){s(this,n,e.elementMouseout)})}else ri.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(n,o){if(w||!ct[n.series])return 0;var h=ct[n.series],s=h.values[o],c=this;e.elementClick({point:s,series:h,pos:[t(u(s,o))+r.left,i(f(s,o))+r.top],relativePos:[t(u(s,o))+r.left,i(f(s,o))+r.top],seriesIndex:n.series,pointIndex:o,event:d3.event,element:c})}).on("dblclick",function(n,o){if(w||!ct[n.series])return 0;var h=ct[n.series],s=h.values[o];e.elementDblClick({point:s,series:h,pos:[t(u(s,o))+r.left,i(f(s,o))+r.top],relativePos:[t(u(s,o))+r.left,i(f(s,o))+r.top],seriesIndex:n.series,pointIndex:o})}).on("mouseover",function(n,o){if(w||!ct[n.series])return 0;var h=ct[n.series],s=h.values[o];e.elementMouseover({point:s,series:h,pos:[t(u(s,o))+r.left,i(f(s,o))+r.top],relativePos:[t(u(s,o))+r.left,i(f(s,o))+r.top],seriesIndex:n.series,pointIndex:o,color:p(n,o)})}).on("mouseout",function(n,o){if(w||!ct[n.series])return 0;var h=ct[n.series],s=h.values[o];e.elementMouseout({point:s,series:h,pos:[t(u(s,o))+r.left,i(f(s,o))+r.top],relativePos:[t(u(s,o))+r.left,i(f(s,o))+r.top],seriesIndex:n.series,pointIndex:o,color:p(n,o)})})}var ci,ai,bi,li,ki,pi,si,vi,yi;y=d3.select(this);ci=n.utils.availableWidth(l,y,r);ai=n.utils.availableHeight(a,y,r);n.utils.initSVG(y);ct.forEach(function(n,t){n.values.forEach(function(n){n.series=t})});bi=s.yScale().name===d3.scale.log().name?!0:!1;li=ft&&tt&&st?[]:d3.merge(ct.map(function(n){return n.values.map(function(n,t){return{x:u(n,t),y:f(n,t),size:h(n,t)}})}));t.domain(ft||d3.extent(li.map(function(n){return n.x}).concat(wt)));kt&&ct[0]?t.range(et||[(ci*rt+ci)/(2*ct[0].values.length),ci-ci*(1+rt)/(2*ct[0].values.length)]):t.range(et||[0,ci]);bi?(ki=d3.min(li.map(function(n){if(n.y!==0)return n.y})),i.clamp(!0).domain(tt||d3.extent(li.map(function(n){return n.y!==0?n.y:ki*.1}).concat(it))).range(ot||[ai,0])):i.domain(tt||d3.extent(li.map(function(n){return n.y}).concat(it))).range(ot||[ai,0]);o.domain(st||d3.extent(li.map(function(n){return n.size}).concat(bt))).range(ti||oi);ui=t.domain()[0]===t.domain()[1]||i.domain()[0]===i.domain()[1];t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]-t.domain()[0]*.01,t.domain()[1]+t.domain()[1]*.01]):t.domain([-1,1]));i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));isNaN(t.domain()[0])&&t.domain([-1,1]);isNaN(i.domain()[0])&&i.domain([-1,1]);k=k||t;d=d||i;at=at||o;pi=t(1)!==k(1)||i(1)!==d(1)||o(1)!==at(1);vt=vt||l;yt=yt||a;var di=vt!==l||yt!==a,ri=y.selectAll("g.nv-wrap.nv-scatter").data([ct]),wi=ri.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+v),tr=wi.append("defs"),gi=wi.append("g"),ir=ri.select("g");ri.classed("nv-single-point",ui);gi.append("g").attr("class","nv-groups");gi.append("g").attr("class","nv-point-paths");wi.append("g").attr("class","nv-point-clips");ri.attr("transform","translate("+r.left+","+r.top+")");tr.append("clipPath").attr("id","nv-edge-clip-"+v).append("rect").attr("transform","translate( -10, -10)");ri.select("#nv-edge-clip-"+v+" rect").attr("width",ci+20).attr("height",ai>0?ai+20:0);ir.attr("clip-path",dt?"url(#nv-edge-clip-"+v+")":"");w=!0;si=ri.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n){return n.key});si.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);si.exit().remove();si.attr("class",function(n,t){return(n.classed||"")+" nv-group nv-series-"+t}).classed("nv-noninteractive",!b).classed("hover",function(n){return n.hover});si.watchTransition(c,"scatter: groups").style("fill",function(n,t){return p(n,t)}).style("stroke",function(n,t){return n.pointBorderColor||pt||p(n,t)}).style("stroke-opacity",1).style("fill-opacity",.5);vi=si.selectAll("path.nv-point").data(function(n){return n.values.map(function(n,t){return[n,t]}).filter(function(n,t){return nt(n[0],t)})});vi.enter().append("path").attr("class",function(n){return"nv-point nv-point-"+n[1]}).style("fill",function(n){return n.color}).style("stroke",function(n){return n.color}).attr("transform",function(t){return"translate("+n.utils.NaNtoZero(k(u(t[0],t[1])))+","+n.utils.NaNtoZero(d(f(t[0],t[1])))+")"}).attr("d",n.utils.symbol().type(function(n){return g(n[0])}).size(function(n){return o(h(n[0],n[1]))}));vi.exit().each(hi).remove();si.exit().selectAll("path.nv-point").watchTransition(c,"scatter exit").attr("transform",function(r){return"translate("+n.utils.NaNtoZero(t(u(r[0],r[1])))+","+n.utils.NaNtoZero(i(f(r[0],r[1])))+")"}).remove();vi.filter(function(n){return pi||di||ei(n,"x",u,"y",f)}).watchTransition(c,"scatter points").attr("transform",function(r){return"translate("+n.utils.NaNtoZero(t(u(r[0],r[1])))+","+n.utils.NaNtoZero(i(f(r[0],r[1])))+")"});vi.filter(function(n){return pi||di||ei(n,"shape",g,"size",h)}).watchTransition(c,"scatter points").attr("d",n.utils.symbol().type(function(n){return g(n[0])}).size(function(n){return o(h(n[0],n[1]))}));ii&&(yi=si.selectAll(".nv-label").data(function(n){return n.values.map(function(n,t){return[n,t]}).filter(function(n,t){return nt(n[0],t)})}),yi.enter().append("text").style("fill",function(n){return n.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(t){var i=n.utils.NaNtoZero(k(u(t[0],t[1])))+Math.sqrt(o(h(t[0],t[1]))/Math.PI)+2;return"translate("+i+","+n.utils.NaNtoZero(d(f(t[0],t[1])))+")"}).text(function(n){return n[0].label}),yi.exit().remove(),si.exit().selectAll("path.nv-label").watchTransition(c,"scatter exit").attr("transform",function(r){var e=n.utils.NaNtoZero(t(u(r[0],r[1])))+Math.sqrt(o(h(r[0],r[1]))/Math.PI)+2;return"translate("+e+","+n.utils.NaNtoZero(i(f(r[0],r[1])))+")"}).remove(),yi.each(function(n){d3.select(this).classed("nv-label",!0).classed("nv-label-"+n[1],!1).classed("hover",!1)}),yi.watchTransition(c,"scatter labels").attr("transform",function(r){var e=n.utils.NaNtoZero(t(u(r[0],r[1])))+Math.sqrt(o(h(r[0],r[1]))/Math.PI)+2;return"translate("+e+","+n.utils.NaNtoZero(i(f(r[0],r[1])))+")"}));lt?(clearTimeout(fi),fi=setTimeout(nr,lt)):nr();k=t.copy();d=i.copy();at=o.copy();vt=l;yt=a}),c.renderEnd("scatter immediate"),s}var r={top:0,right:0,bottom:0,left:0},l=null,a=null,p=n.utils.defaultColor(),pt=null,v=Math.floor(Math.random()*1e5),y=null,t=d3.scale.linear(),i=d3.scale.linear(),o=d3.scale.linear(),u=function(n){return n.x},f=function(n){return n.y},h=function(n){return n.size||1},g=function(n){return n.shape||"circle"},wt=[],it=[],bt=[],b=!0,nt=function(n){return!n.notActive},kt=!1,rt=.1,dt=!1,ut=!0,gt=!1,ni=function(){return 25},ft=null,tt=null,et=null,ot=null,st=null,ti=null,ui=!1,e=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),ht=!0,ct=250,lt=300,ii=!1,k,d,at,vt,yt,fi,w=!1,c=n.utils.renderWatch(e,ct),oi=[16,256],ri={};s.dispatch=e;s.options=n.utils.optionsFunc.bind(s);s._calls=new function(){this.clearHighlights=function(){return n.dom.write(function(){y.selectAll(".nv-point.hover").classed("hover",!1)}),null};this.highlightPoint=function(t,i,r){n.dom.write(function(){y.select(".nv-groups").selectAll(".nv-series-"+t).selectAll(".nv-point-"+i).classed("hover",r)})}};e.on("elementMouseover.point",function(n){b&&s._calls.highlightPoint(n.seriesIndex,n.pointIndex,!0)});e.on("elementMouseout.point",function(n){b&&s._calls.highlightPoint(n.seriesIndex,n.pointIndex,!1)});return s._options=Object.create({},{width:{get:function(){return l},set:function(n){l=n}},height:{get:function(){return a},set:function(n){a=n}},xScale:{get:function(){return t},set:function(n){t=n}},yScale:{get:function(){return i},set:function(n){i=n}},pointScale:{get:function(){return o},set:function(n){o=n}},xDomain:{get:function(){return ft},set:function(n){ft=n}},yDomain:{get:function(){return tt},set:function(n){tt=n}},pointDomain:{get:function(){return st},set:function(n){st=n}},xRange:{get:function(){return et},set:function(n){et=n}},yRange:{get:function(){return ot},set:function(n){ot=n}},pointRange:{get:function(){return ti},set:function(n){ti=n}},forceX:{get:function(){return wt},set:function(n){wt=n}},forceY:{get:function(){return it},set:function(n){it=n}},forcePoint:{get:function(){return bt},set:function(n){bt=n}},interactive:{get:function(){return b},set:function(n){b=n}},pointActive:{get:function(){return nt},set:function(n){nt=n}},padDataOuter:{get:function(){return rt},set:function(n){rt=n}},padData:{get:function(){return kt},set:function(n){kt=n}},clipEdge:{get:function(){return dt},set:function(n){dt=n}},clipVoronoi:{get:function(){return ut},set:function(n){ut=n}},clipRadius:{get:function(){return ni},set:function(n){ni=n}},showVoronoi:{get:function(){return gt},set:function(n){gt=n}},id:{get:function(){return v},set:function(n){v=n}},interactiveUpdateDelay:{get:function(){return lt},set:function(n){lt=n}},showLabels:{get:function(){return ii},set:function(n){ii=n}},pointBorderColor:{get:function(){return pt},set:function(n){pt=n}},x:{get:function(){return u},set:function(n){u=d3.functor(n)}},y:{get:function(){return f},set:function(n){f=d3.functor(n)}},pointSize:{get:function(){return h},set:function(n){h=d3.functor(n)}},pointShape:{get:function(){return g},set:function(n){g=d3.functor(n)}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return ct},set:function(n){ct=n;c.reset(ct)}},color:{get:function(){return p},set:function(t){p=n.utils.getColor(t)}},useVoronoi:{get:function(){return ht},set:function(n){ht=n;ht===!1&&(ut=!1)}}}),n.utils.initOptions(s),s};n.models.scatterChart=function(){"use strict";function t(st){return h.reset(),h.models(i),tt&&h.models(y),it&&h.models(l),g&&h.models(v),nt&&h.models(c),st.each(function(st){var ii=this,yt,wt,kt,ni,dt,gt;if(u=d3.select(this),n.utils.initSVG(u),yt=n.utils.availableWidth(ut,u,r),wt=n.utils.availableHeight(d,u,r),t.update=function(){b===0?u.call(t):u.transition().duration(b).call(t)},t.container=this,s.setter(at(st),t.update).getter(lt(st)).update(),s.disabled=st.map(function(n){return!!n.disabled}),!p){p={};for(kt in s)p[kt]=s[kt]instanceof Array?s[kt].slice(0):s[kt]}if(st&&st.length&&st.filter(function(n){return n.values.length}).length)u.selectAll(".nv-noData").remove();else return n.utils.noData(t,u),h.renderEnd("scatter immediate"),t;e=i.xScale();o=i.yScale();var pt=u.selectAll("g.nv-wrap.nv-scatterChart").data([st]),ti=pt.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+i.id()),vt=ti.append("g"),bt=pt.select("g");vt.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");vt.append("g").attr("class","nv-x nv-axis");vt.append("g").attr("class","nv-y nv-axis");vt.append("g").attr("class","nv-scatterWrap");vt.append("g").attr("class","nv-regressionLinesWrap");vt.append("g").attr("class","nv-distWrap");vt.append("g").attr("class","nv-legendWrap");w&&bt.select(".nv-y.nv-axis").attr("transform","translate("+yt+",0)");ft?(ni=yt,a.width(ni),pt.select(".nv-legendWrap").datum(st).call(a),ot||a.height()===r.top||(r.top=a.height(),wt=n.utils.availableHeight(d,u,r)),pt.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")")):bt.select(".nv-legendWrap").selectAll("*").remove();pt.attr("transform","translate("+r.left+","+r.top+")");i.width(yt).height(wt).color(st.map(function(n,t){return n.color=n.color||f(n,t),n.color}).filter(function(n,t){return!st[t].disabled})).showLabels(et);pt.select(".nv-scatterWrap").datum(st.filter(function(n){return!n.disabled})).call(i);pt.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+i.id()+")");dt=pt.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(n){return n});dt.enter().append("g").attr("class","nv-regLines");gt=dt.selectAll(".nv-regLine").data(function(n){return[n]});gt.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);gt.filter(function(n){return n.intercept&&n.slope}).watchTransition(h,"scatterPlusLineChart: regline").attr("x1",e.range()[0]).attr("x2",e.range()[1]).attr("y1",function(n){return o(e.domain()[0]*n.slope+n.intercept)}).attr("y2",function(n){return o(e.domain()[1]*n.slope+n.intercept)}).style("stroke",function(n,t,i){return f(n,i)}).style("stroke-opacity",function(n){return n.disabled||typeof n.slope=="undefined"||typeof n.intercept=="undefined"?0:1});tt&&(y.scale(e)._ticks(n.utils.calcTicksX(yt/100,st)).tickSize(-wt,0),bt.select(".nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")").call(y));it&&(l.scale(o)._ticks(n.utils.calcTicksY(wt/36,st)).tickSize(-yt,0),bt.select(".nv-y.nv-axis").call(l));g&&(v.getData(i.x()).scale(e).width(yt).color(st.map(function(n,t){return n.color||f(n,t)}).filter(function(n,t){return!st[t].disabled})),vt.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),bt.select(".nv-distributionX").attr("transform","translate(0,"+o.range()[0]+")").datum(st.filter(function(n){return!n.disabled})).call(v));nt&&(c.getData(i.y()).scale(o).width(wt).color(st.map(function(n,t){return n.color||f(n,t)}).filter(function(n,t){return!st[t].disabled})),vt.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),bt.select(".nv-distributionY").attr("transform","translate("+(w?yt:-c.size())+",0)").datum(st.filter(function(n){return!n.disabled})).call(c));a.dispatch.on("stateChange",function(n){for(var i in n)s[i]=n[i];rt.stateChange(s);t.update()});rt.on("changeState",function(n){typeof n.disabled!="undefined"&&(st.forEach(function(t,i){t.disabled=n.disabled[i]}),s.disabled=n.disabled);t.update()});i.dispatch.on("elementMouseout.tooltip",function(n){k.hidden(!0);u.select(".nv-chart-"+i.id()+" .nv-series-"+n.seriesIndex+" .nv-distx-"+n.pointIndex).attr("y1",0);u.select(".nv-chart-"+i.id()+" .nv-series-"+n.seriesIndex+" .nv-disty-"+n.pointIndex).attr("x2",c.size())});i.dispatch.on("elementMouseover.tooltip",function(n){u.select(".nv-series-"+n.seriesIndex+" .nv-distx-"+n.pointIndex).attr("y1",n.relativePos[1]-wt);u.select(".nv-series-"+n.seriesIndex+" .nv-disty-"+n.pointIndex).attr("x2",n.relativePos[0]+v.size());k.data(n).hidden(!1)});ht=e.copy();ct=o.copy()}),h.renderEnd("scatter with line immediate"),t}var i=n.models.scatter(),y=n.models.axis(),l=n.models.axis(),a=n.models.legend(),v=n.models.distribution(),c=n.models.distribution(),k=n.models.tooltip(),r={top:30,right:20,bottom:50,left:75},ot=null,ut=null,d=null,u=null,f=n.utils.defaultColor(),e=i.xScale(),o=i.yScale(),g=!1,nt=!1,ft=!0,tt=!0,it=!0,w=!1,s=n.utils.state(),p=null,rt=d3.dispatch("stateChange","changeState","renderEnd"),st=null,b=250,et=!1;i.xScale(e).yScale(o);y.orient("bottom").tickPadding(10);l.orient(w?"right":"left").tickPadding(10);v.axis("x");c.axis("y");k.headerFormatter(function(n,t){return y.tickFormat()(n,t)}).valueFormatter(function(n,t){return l.tickFormat()(n,t)});var ht,ct,h=n.utils.renderWatch(rt,b),lt=function(n){return function(){return{active:n.map(function(n){return!n.disabled})}}},at=function(n){return function(t){t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};return t.dispatch=rt,t.scatter=i,t.legend=a,t.xAxis=y,t.yAxis=l,t.distX=v,t.distY=c,t.tooltip=k,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return ut},set:function(n){ut=n}},height:{get:function(){return d},set:function(n){d=n}},container:{get:function(){return u},set:function(n){u=n}},showDistX:{get:function(){return g},set:function(n){g=n}},showDistY:{get:function(){return nt},set:function(n){nt=n}},showLegend:{get:function(){return ft},set:function(n){ft=n}},showXAxis:{get:function(){return tt},set:function(n){tt=n}},showYAxis:{get:function(){return it},set:function(n){it=n}},defaultState:{get:function(){return p},set:function(n){p=n}},noData:{get:function(){return st},set:function(n){st=n}},duration:{get:function(){return b},set:function(n){b=n}},showLabels:{get:function(){return et},set:function(n){et=n}},margin:{get:function(){return r},set:function(n){n.top!==undefined&&(r.top=n.top,ot=n.top);r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},rightAlignYAxis:{get:function(){return w},set:function(n){w=n;l.orient(n?"right":"left")}},color:{get:function(){return f},set:function(t){f=n.utils.getColor(t);a.color(f);v.color(f);c.color(f)}}}),n.utils.inheritOptions(t,i),n.utils.initOptions(t),t};n.models.sparkline=function(){"use strict";function u(b){return d.reset(),b.each(function(u){var g=s-t.left-t.right,nt=h-t.top-t.bottom,k,d;c=d3.select(this);n.utils.initSVG(c);f.domain(a||d3.extent(u,e)).range(y||[0,g]);i.domain(v||d3.extent(u,r)).range(p||[nt,0]);var b=c.selectAll("g.nv-wrap.nv-sparkline").data([u]),tt=b.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),it=tt.append("g"),rt=b.select("g");b.attr("transform","translate("+t.left+","+t.top+")");k=b.selectAll("path").data(function(n){return[n]});k.enter().append("path");k.exit().remove();k.style("stroke",function(n,t){return n.color||l(n,t)}).attr("d",d3.svg.line().x(function(n,t){return f(e(n,t))}).y(function(n,t){return i(r(n,t))}));d=b.selectAll("circle.nv-point").data(function(n){function u(t){if(t!=-1){var i=n[t];return i.pointIndex=t,i}return null}var t=n.map(function(n,t){return r(n,t)}),f=u(t.lastIndexOf(i.domain()[1])),e=u(t.indexOf(i.domain()[0])),s=u(t.length-1);return[o?e:null,o?f:null,w?s:null].filter(function(n){return n!=null})});d.enter().append("circle");d.exit().remove();d.attr("cx",function(n){return f(e(n,n.pointIndex))}).attr("cy",function(n){return i(r(n,n.pointIndex))}).attr("r",2).attr("class",function(n){return e(n,n.pointIndex)==f.domain()[1]?"nv-point nv-currentValue":r(n,n.pointIndex)==i.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),d.renderEnd("sparkline immediate"),u}var t={top:2,right:0,bottom:2,left:0},s=400,h=32,c=null,b=!0,f=d3.scale.linear(),i=d3.scale.linear(),e=function(n){return n.x},r=function(n){return n.y},l=n.utils.getColor(["#000"]),a,v,y,p,o=!0,w=!0,k=d3.dispatch("renderEnd"),d=n.utils.renderWatch(k);return u.options=n.utils.optionsFunc.bind(u),u._options=Object.create({},{width:{get:function(){return s},set:function(n){s=n}},height:{get:function(){return h},set:function(n){h=n}},xDomain:{get:function(){return a},set:function(n){a=n}},yDomain:{get:function(){return v},set:function(n){v=n}},xRange:{get:function(){return y},set:function(n){y=n}},yRange:{get:function(){return p},set:function(n){p=n}},xScale:{get:function(){return f},set:function(n){f=n}},yScale:{get:function(){return i},set:function(n){i=n}},animate:{get:function(){return b},set:function(n){b=n}},showMinMaxPoints:{get:function(){return o},set:function(n){o=n}},showCurrentPoint:{get:function(){return w},set:function(n){w=n}},x:{get:function(){return e},set:function(n){e=d3.functor(n)}},y:{get:function(){return r},set:function(n){r=d3.functor(n)}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},color:{get:function(){return l},set:function(t){l=n.utils.getColor(t)}}}),u.dispatch=k,n.utils.initOptions(u),u};n.models.sparklinePlus=function(){"use strict";function r(w){return y.reset(),y.models(i),w.each(function(y){function ft(){if(!e){var n=b.selectAll(".nv-hoverValue").data(u),r=n.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);(n.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),n.attr("transform",function(n){return"translate("+c(i.x()(y[n],n))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),u.length)&&(r.append("line").attr("x1",0).attr("y1",-t.top).attr("x2",0).attr("y2",d),r.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-t.top).attr("text-anchor","end").attr("dy",".9em"),b.select(".nv-hoverValue .nv-xValue").text(l(i.x()(y[u[0]],u[0]))),r.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-t.top).attr("text-anchor","start").attr("dy",".9em"),b.select(".nv-hoverValue .nv-yValue").text(o(i.y()(y[u[0]],u[0]))))}}function ot(){function r(n,t){for(var u=Math.abs(i.x()(n[0],0)-t),f=0,r=0;r<n.length;r++)Math.abs(i.x()(n[r],r)-t)<u&&(u=Math.abs(i.x()(n[r],r)-t),f=r);return f}if(!e){var n=d3.mouse(this)[0]-t.left;u=[r(y,Math.round(c.invert(n)))];ft()}}var w=d3.select(this),k,d,nt,rt,ut,it;if(n.utils.initSVG(w),k=n.utils.availableWidth(s,w,t),d=n.utils.availableHeight(h,w,t),r.update=function(){w.call(r)},r.container=this,y&&y.length)w.selectAll(".nv-noData").remove();else return n.utils.noData(r,w),r;nt=i.y()(y[y.length-1],y.length-1);c=i.xScale();p=i.yScale();var tt=w.selectAll("g.nv-wrap.nv-sparklineplus").data([y]),et=tt.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),g=et.append("g"),b=tt.select("g");g.append("g").attr("class","nv-sparklineWrap");g.append("g").attr("class","nv-valueWrap");g.append("g").attr("class","nv-hoverArea");tt.attr("transform","translate("+t.left+","+t.top+")");rt=b.select(".nv-sparklineWrap");i.width(k).height(d);rt.call(i);a&&(ut=b.select(".nv-valueWrap"),it=ut.selectAll(".nv-currentValue").data([nt]),it.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start"),it.attr("x",k+(f?t.right:0)).attr("y",v?function(n){return p(n)}:0).style("fill",i.color()(y[y.length-1],y.length-1)).text(o(nt)));g.select(".nv-hoverArea").append("rect").on("mousemove",ot).on("click",function(){e=!e}).on("mouseout",function(){u=[];ft()});b.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-t.left+","+-t.top+")"}).attr("width",k+t.left+t.right).attr("height",d+t.top)}),y.renderEnd("sparklinePlus immediate"),r}var i=n.models.sparkline(),t={top:15,right:100,bottom:10,left:50},s=null,h=null,c,p,u=[],e=!1,l=d3.format(",r"),o=d3.format(",.2f"),a=!0,v=!0,f=!1,w=null,b=d3.dispatch("renderEnd"),y=n.utils.renderWatch(b);return r.dispatch=b,r.sparkline=i,r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{width:{get:function(){return s},set:function(n){s=n}},height:{get:function(){return h},set:function(n){h=n}},xTickFormat:{get:function(){return l},set:function(n){l=n}},yTickFormat:{get:function(){return o},set:function(n){o=n}},showLastValue:{get:function(){return a},set:function(n){a=n}},alignValue:{get:function(){return v},set:function(n){v=n}},rightAlignValue:{get:function(){return f},set:function(n){f=n}},noData:{get:function(){return w},set:function(n){w=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}}}),n.utils.inheritOptions(r,i),n.utils.initOptions(r),r};n.models.stackedArea=function(){"use strict";function t(u){return e.reset(),e.models(i),u.each(function(u){var ut=y-r.left-r.right,ft=p-r.top-r.bottom,rt,et,ht;w=d3.select(this);n.utils.initSVG(w);nt=i.xScale();a=i.yScale();rt=u;u.forEach(function(n,t){n.seriesIndex=t;n.values=n.values.map(function(n,i){return n.index=i,n.seriesIndex=t,n})});et=u.filter(function(n){return!n.disabled});u=d3.layout.stack().order(d).offset(k).values(function(n){return n.values}).x(o).y(s).out(function(n,t,i){n.display={y:i,y0:t}})(et);var tt=w.selectAll("g.nv-wrap.nv-stackedarea").data([u]),ot=tt.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),ct=ot.append("defs"),st=ot.append("g"),b=tt.select("g");st.append("g").attr("class","nv-areaWrap");st.append("g").attr("class","nv-scatterWrap");tt.attr("transform","translate("+r.left+","+r.top+")");i.forceY().length==0&&i.forceY().push(0);i.width(ut).height(ft).x(o).y(function(n){if(n.display!==undefined)return n.display.y+n.display.y0}).color(u.map(function(n){return n.color=n.color||h(n,n.seriesIndex),n.color}));ht=b.select(".nv-scatterWrap").datum(u);ht.call(i);ct.append("clipPath").attr("id","nv-edge-clip-"+c).append("rect");tt.select("#nv-edge-clip-"+c+" rect").attr("width",ut).attr("height",ft);b.attr("clip-path",g?"url(#nv-edge-clip-"+c+")":"");var lt=d3.svg.area().defined(v).x(function(n,t){return nt(o(n,t))}).y0(function(n){return a(n.display.y0)}).y1(function(n){return a(n.display.y+n.display.y0)}).interpolate(l),at=d3.svg.area().defined(v).x(function(n,t){return nt(o(n,t))}).y0(function(n){return a(n.display.y0)}).y1(function(n){return a(n.display.y0)}),it=b.select(".nv-areaWrap").selectAll("path.nv-area").data(function(n){return n});it.enter().append("path").attr("class",function(n,t){return"nv-area nv-area-"+t}).attr("d",function(n){return at(n.values,n.seriesIndex)}).on("mouseover",function(n){d3.select(this).classed("hover",!0);f.areaMouseover({point:n,series:n.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:n.seriesIndex})}).on("mouseout",function(n){d3.select(this).classed("hover",!1);f.areaMouseout({point:n,series:n.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:n.seriesIndex})}).on("click",function(n){d3.select(this).classed("hover",!1);f.areaClick({point:n,series:n.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:n.seriesIndex})});it.exit().remove();it.style("fill",function(n){return n.color||h(n,n.seriesIndex)}).style("stroke",function(n){return n.color||h(n,n.seriesIndex)});it.watchTransition(e,"stackedArea path").attr("d",function(n,t){return lt(n.values,t)});i.dispatch.on("elementMouseover.area",function(n){b.select(".nv-chart-"+c+" .nv-area-"+n.seriesIndex).classed("hover",!0)});i.dispatch.on("elementMouseout.area",function(n){b.select(".nv-chart-"+c+" .nv-area-"+n.seriesIndex).classed("hover",!1)});t.d3_stackedOffset_stackPercent=function(n){for(var u=n.length,f=n[0].length,t,r,e=[],i=0;i<f;++i){for(t=0,r=0;t<rt.length;t++)r+=s(rt[t].values[i]);if(r)for(t=0;t<u;t++)n[t][i][1]/=r;else for(t=0;t<u;t++)n[t][i][1]=0}for(i=0;i<f;++i)e[i]=0;return e}}),e.renderEnd("stackedArea immediate"),t}var r={top:0,right:0,bottom:0,left:0},y=960,p=500,h=n.utils.defaultColor(),c=Math.floor(Math.random()*1e5),w=null,o=function(n){return n.x},s=function(n){return n.y},v=function(n,t){return!isNaN(s(n,t))&&s(n,t)!==null},b="stack",k="zero",d="default",l="linear",g=!1,nt,a,i=n.models.scatter(),u=250,f=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout"),e;i.pointSize(2.2).pointDomain([2.2,2.2]);e=n.utils.renderWatch(f,u);t.dispatch=f;t.scatter=i;i.dispatch.on("elementClick",function(){f.elementClick.apply(this,arguments)});i.dispatch.on("elementMouseover",function(){f.elementMouseover.apply(this,arguments)});i.dispatch.on("elementMouseout",function(){f.elementMouseout.apply(this,arguments)});return t.interpolate=function(n){return arguments.length?(l=n,t):l},t.duration=function(n){return arguments.length?(u=n,e.reset(u),i.duration(u),t):u},t.dispatch=f,t.scatter=i,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return y},set:function(n){y=n}},height:{get:function(){return p},set:function(n){p=n}},defined:{get:function(){return v},set:function(n){v=n}},clipEdge:{get:function(){return g},set:function(n){g=n}},offset:{get:function(){return k},set:function(n){k=n}},order:{get:function(){return d},set:function(n){d=n}},interpolate:{get:function(){return l},set:function(n){l=n}},x:{get:function(){return o},set:function(n){o=d3.functor(n)}},y:{get:function(){return s},set:function(n){s=d3.functor(n)}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},color:{get:function(){return h},set:function(t){h=n.utils.getColor(t)}},style:{get:function(){return b},set:function(n){b=n;switch(b){case"stack":t.offset("zero");t.order("default");break;case"stream":t.offset("wiggle");t.order("inside-out");break;case"stream-center":t.offset("silhouette");t.order("inside-out");break;case"expand":t.offset("expand");t.order("default");break;case"stack_percent":t.offset(t.d3_stackedOffset_stackPercent);t.order("default")}}},duration:{get:function(){return u},set:function(n){u=n;e.reset(u);i.duration(u)}}}),n.utils.inheritOptions(t,i),n.utils.initOptions(t),t};n.models.stackedAreaChart=function(){"use strict";function i(ut){return tt.reset(),tt.models(t),b&&tt.models(c),it&&tt.models(e),ut.each(function(tt){function yi(){b&&ut.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+wt+")").transition().duration(h).call(c)}function pi(){if(it){if(t.style()==="expand"||t.style()==="stack_percent"){var n=e.tickFormat();g&&n===kt||(g=n);e.tickFormat(kt)}else g&&(e.tickFormat(g),g=null);ut.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(e)}}function wi(n){var i=ut.select(".nv-focus .nv-stackedWrap").datum(tt.filter(function(n){return!n.disabled}).map(function(i){return{key:i.key,area:i.area,classed:i.classed,values:i.values.filter(function(i,r){return t.x()(i,r)>=n[0]&&t.x()(i,r)<=n[1]}),disableTooltip:i.disableTooltip}}));i.transition().duration(h).call(t);yi();pi()}var ni=d3.select(this),ki=this,ti,wt,ui,ii,bi,oi,si,li,ri,hi,ai,vi,ci;if(n.utils.initSVG(ni),ti=n.utils.availableWidth(ht,ni,u),wt=n.utils.availableHeight(p,ni,u)-(a?r.height():0),i.update=function(){ni.transition().duration(h).call(i)},i.container=this,f.setter(gt(tt),i.update).getter(dt(tt)).update(),f.disabled=tt.map(function(n){return!!n.disabled}),!k){k={};for(ui in f)k[ui]=f[ui]instanceof Array?f[ui].slice(0):f[ui]}if(tt&&tt.length&&tt.filter(function(n){return n.values.length}).length)ni.selectAll(".nv-noData").remove();else return n.utils.noData(i,ni),i;at=t.xScale();pt=t.yScale();var fi=ni.selectAll("g.nv-wrap.nv-stackedAreaChart").data([tt]),ei=fi.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),ut=fi.select("g");ei.append("g").attr("class","nv-legendWrap");ei.append("g").attr("class","nv-controlsWrap");ii=ei.append("g").attr("class","nv-focus");ii.append("g").attr("class","nv-background").append("rect");ii.append("g").attr("class","nv-x nv-axis");ii.append("g").attr("class","nv-y nv-axis");ii.append("g").attr("class","nv-stackedWrap");ii.append("g").attr("class","nv-interactive");bi=ei.append("g").attr("class","nv-focusWrap");et?(oi=ft&&w==="top"?ti-vt:ti,o.width(oi),ut.select(".nv-legendWrap").datum(tt).call(o),w==="bottom"?(si=(b?12:0)+10,u.bottom=Math.max(o.height()+si,u.bottom),wt=n.utils.availableHeight(p,ni,u)-(a?r.height():0),li=wt+si,ut.select(".nv-legendWrap").attr("transform","translate(0,"+li+")")):w==="top"&&(yt||u.top==o.height()||(u.top=o.height(),wt=n.utils.availableHeight(p,ni,u)-(a?r.height():0)),ut.select(".nv-legendWrap").attr("transform","translate("+(ti-oi)+","+-u.top+")"))):ut.select(".nv-legendWrap").selectAll("*").remove();ft?(ri=[{key:d.stacked||"Stacked",metaKey:"Stacked",disabled:t.style()!="stack",style:"stack"},{key:d.stream||"Stream",metaKey:"Stream",disabled:t.style()!="stream",style:"stream"},{key:d.expanded||"Expanded",metaKey:"Expanded",disabled:t.style()!="expand",style:"expand"},{key:d.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:t.style()!="stack_percent",style:"stack_percent"}],vt=st.length/3*260,ri=ri.filter(function(n){return st.indexOf(n.metaKey)!==-1}),y.width(vt).color(["#444","#444","#444"]),ut.select(".nv-controlsWrap").datum(ri).call(y),hi=Math.max(y.height(),et&&w==="top"?o.height():0),u.top!=hi&&(u.top=hi,wt=n.utils.availableHeight(p,ni,u)-(a?r.height():0)),ut.select(".nv-controlsWrap").attr("transform","translate(0,"+-u.top+")")):ut.select(".nv-controlsWrap").selectAll("*").remove();fi.attr("transform","translate("+u.left+","+u.top+")");rt&&ut.select(".nv-y.nv-axis").attr("transform","translate("+ti+",0)");ct&&(s.width(ti).height(wt).margin({left:u.left,top:u.top}).svgContainer(ni).xScale(at),fi.select(".nv-interactive").call(s));ut.select(".nv-focus .nv-background rect").attr("width",ti).attr("height",wt);t.width(ti).height(wt).color(tt.map(function(n,t){return n.color||l(n,t)}).filter(function(n,t){return!tt[t].disabled}));ai=ut.select(".nv-focus .nv-stackedWrap").datum(tt.filter(function(n){return!n.disabled}));b&&c.scale(at)._ticks(n.utils.calcTicksX(ti/100,tt)).tickSize(-wt,0);it&&(vi=t.offset()==="wiggle"?0:n.utils.calcTicksY(wt/36,tt),e.scale(pt)._ticks(vi).tickSize(-ti,0));a?(r.width(ti),ut.select(".nv-focusWrap").attr("transform","translate(0,"+(wt+u.bottom+r.margin().top)+")").datum(tt.filter(function(n){return!n.disabled})).call(r),ci=r.brush.empty()?r.xDomain():r.brush.extent(),ci!==null&&wi(ci)):(ai.transition().call(t),yi(),pi());t.dispatch.on("areaClick.toggle",function(n){tt.filter(function(n){return!n.disabled}).length===1?tt.forEach(function(n){n.disabled=!1}):tt.forEach(function(t,i){t.disabled=i!=n.seriesIndex});f.disabled=tt.map(function(n){return!!n.disabled});v.stateChange(f);i.update()});o.dispatch.on("stateChange",function(n){for(var t in n)f[t]=n[t];v.stateChange(f);i.update()});y.dispatch.on("legendClick",function(n){n.disabled&&(ri=ri.map(function(n){return n.disabled=!0,n}),n.disabled=!1,t.style(n.style),f.style=t.style(),v.stateChange(f),i.update())});s.dispatch.on("elementMousemove",function(r){var p,e;t.clearHighlights();var h,f,c,u=[],v=0,y=!0;if(tt.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(e,o){var s,p,a;(f=n.interactiveBisect(e.values,r.pointXValue,i.x()),s=e.values[f],p=i.y()(s,f),p!=null&&t.highlightPoint(o,f,!0),typeof s!="undefined")&&(typeof h=="undefined"&&(h=s),typeof c=="undefined"&&(c=i.xScale()(i.x()(s,f))),a=t.style()=="expand"?s.display.y:i.y()(s,f),u.push({key:e.key,value:a,color:l(e,e.seriesIndex),point:s}),ot&&t.style()!="expand"&&a!=null&&(v+=a,y=!1))}),u.reverse(),u.length>2){var o=i.yScale().invert(r.mouseY),a=null;u.forEach(function(n,t){o=Math.abs(o);var i=Math.abs(n.point.display.y0),r=Math.abs(n.point.display.y);if(o>=i&&o<=r+i){a=t;return}});a!=null&&(u[a].highlight=!0)}ot&&t.style()!="expand"&&u.length>=2&&!y&&u.push({key:lt,value:v,total:!0});p=i.x()(h,f);e=s.tooltip.valueFormatter();t.style()==="expand"||t.style()==="stack_percent"?(nt||(nt=e),e=d3.format(".1%")):nt&&(e=nt,nt=null);s.tooltip.valueFormatter(e).data({value:p,series:u})();s.renderGuideLine(c)});s.dispatch.on("elementMouseout",function(){t.clearHighlights()});r.dispatch.on("onBrush",function(n){wi(n)});v.on("changeState",function(n){typeof n.disabled!="undefined"&&tt.length===n.disabled.length&&(tt.forEach(function(t,i){t.disabled=n.disabled[i]}),f.disabled=n.disabled);typeof n.style!="undefined"&&(t.style(n.style),bt=n.style);i.update()})}),tt.renderEnd("stacked Area chart immediate"),i}var t=n.models.stackedArea(),c=n.models.axis(),e=n.models.axis(),o=n.models.legend(),y=n.models.legend(),s=n.interactiveGuideline(),ut=n.models.tooltip(),r=n.models.focus(n.models.stackedArea()),u={top:10,right:25,bottom:50,left:60},yt=null,ht=null,p=null,l=n.utils.defaultColor(),ft=!0,et=!0,w="top",b=!0,it=!0,rt=!1,a=!1,ct=!1,ot=!0,lt="TOTAL",at,pt,f=n.utils.state(),k=null,wt=null,v=d3.dispatch("stateChange","changeState","renderEnd"),vt=250,st=["Stacked","Stream","Expanded"],d={},h=250,g,nt;f.style=t.style();c.orient("bottom").tickPadding(7);e.orient(rt?"right":"left");ut.headerFormatter(function(n,t){return c.tickFormat()(n,t)}).valueFormatter(function(n,t){return e.tickFormat()(n,t)});s.tooltip.headerFormatter(function(n,t){return c.tickFormat()(n,t)}).valueFormatter(function(n,t){return n==null?"N/A":e.tickFormat()(n,t)});g=null;nt=null;y.updateState(!1);var tt=n.utils.renderWatch(v),bt=t.style(),dt=function(n){return function(){return{active:n.map(function(n){return!n.disabled}),style:t.style()}}},gt=function(n){return function(t){t.style!==undefined&&(bt=t.style);t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}},kt=d3.format("%");t.dispatch.on("elementMouseover.tooltip",function(n){n.point.x=t.x()(n.point);n.point.y=t.y()(n.point);ut.data(n).hidden(!1)});t.dispatch.on("elementMouseout.tooltip",function(){ut.hidden(!0)});return i.dispatch=v,i.stacked=t,i.legend=o,i.controls=y,i.xAxis=c,i.x2Axis=r.xAxis,i.yAxis=e,i.y2Axis=r.yAxis,i.interactiveLayer=s,i.tooltip=ut,i.focus=r,i.dispatch=v,i.options=n.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return ht},set:function(n){ht=n}},height:{get:function(){return p},set:function(n){p=n}},showLegend:{get:function(){return et},set:function(n){et=n}},legendPosition:{get:function(){return w},set:function(n){w=n}},showXAxis:{get:function(){return b},set:function(n){b=n}},showYAxis:{get:function(){return it},set:function(n){it=n}},defaultState:{get:function(){return k},set:function(n){k=n}},noData:{get:function(){return wt},set:function(n){wt=n}},showControls:{get:function(){return ft},set:function(n){ft=n}},controlLabels:{get:function(){return d},set:function(n){d=n}},controlOptions:{get:function(){return st},set:function(n){st=n}},showTotalInTooltip:{get:function(){return ot},set:function(n){ot=n}},totalLabel:{get:function(){return lt},set:function(n){lt=n}},focusEnable:{get:function(){return a},set:function(n){a=n}},focusHeight:{get:function(){return r.height()},set:function(n){r.height(n)}},brushExtent:{get:function(){return r.brushExtent()},set:function(n){r.brushExtent(n)}},margin:{get:function(){return u},set:function(n){n.top!==undefined&&(u.top=n.top,yt=n.top);u.right=n.right!==undefined?n.right:u.right;u.bottom=n.bottom!==undefined?n.bottom:u.bottom;u.left=n.left!==undefined?n.left:u.left}},focusMargin:{get:function(){return r.margin},set:function(n){r.margin.top=n.top!==undefined?n.top:r.margin.top;r.margin.right=n.right!==undefined?n.right:r.margin.right;r.margin.bottom=n.bottom!==undefined?n.bottom:r.margin.bottom;r.margin.left=n.left!==undefined?n.left:r.margin.left}},duration:{get:function(){return h},set:function(n){h=n;tt.reset(h);t.duration(h);c.duration(h);e.duration(h)}},color:{get:function(){return l},set:function(i){l=n.utils.getColor(i);o.color(l);t.color(l);r.color(l)}},x:{get:function(){return t.x()},set:function(n){t.x(n);r.x(n)}},y:{get:function(){return t.y()},set:function(n){t.y(n);r.y(n)}},rightAlignYAxis:{get:function(){return rt},set:function(n){rt=n;e.orient(rt?"right":"left")}},useInteractiveGuideline:{get:function(){return ct},set:function(n){ct=!!n;i.interactive(!n);i.useVoronoi(!n);t.scatter.interactive(!n)}}}),n.utils.inheritOptions(i,t),n.utils.initOptions(i),i};n.models.stackedAreaWithFocusChart=function(){return n.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)};n.models.sunburst=function(){"use strict";function ot(n){var t=ut(n);return t>90?180:0}function ut(n){var t=Math.max(0,Math.min(2*Math.PI,r(n.x))),i=Math.max(0,Math.min(2*Math.PI,r(n.x+n.dx)));return(t+i)/2*(180/Math.PI)-90}function lt(n){var t=Math.max(0,Math.min(2*Math.PI,r(n.x))),i=Math.max(0,Math.min(2*Math.PI,r(n.x+n.dx)));return(i-t)/(2*Math.PI)}function st(n){var t=Math.max(0,Math.min(2*Math.PI,r(n.x))),i=Math.max(0,Math.min(2*Math.PI,r(n.x+n.dx))),u=i-t;return u>nt}function at(n,t){var u=d3.interpolate(r.domain(),[h.x,h.x+h.dx]),f=d3.interpolate(i.domain(),[h.y,1]),e=d3.interpolate(i.range(),[h.y?20:0,rt]);return t===0?function(){return b(n)}:function(t){return r.domain(u(t)),i.domain(f(t)).range(e(t)),b(n)}}function vt(n){var t=d3.interpolate({x:n.x0,dx:n.dx0,y:n.y0,dy:n.dy0},n);return function(i){var r=t(i);return n.x0=r.x,n.dx0=r.dx,n.y0=r.y,n.dy0=r.dy,b(r)}}function yt(n){var i=s(n),t;c[i]||(c[i]={});t=c[i];t.dx=n.dx;t.x=n.x;t.dy=n.dy;t.y=n.y}function pt(n){n.forEach(function(n){var i=s(n),t=c[i];t?(n.dx0=t.dx,n.x0=t.x,n.dy0=t.dy,n.y0=t.y):(n.dx0=n.dx,n.x0=n.x,n.dy0=n.dy,n.y0=n.y);yt(n)})}function ht(n){var t=u.selectAll("text"),r=u.selectAll("path");t.transition().attr("opacity",0);h=n;r.transition().duration(f).attrTween("d",at).each("end",function(t){if(t.x>=n.x&&t.x<n.x+n.dx&&t.depth>=n.depth){var r=d3.select(this.parentNode),u=r.select("text");u.transition().duration(f).text(function(n){return y(n)}).attr("opacity",function(n){return st(n)?1:0}).attr("transform",function(){var f=this.getBBox().width,r,u;return t.depth===0?"translate("+f/-2+",0)":t.depth===n.depth?"translate("+(i(t.y)+5)+",0)":(r=ut(t),u=ot(t),u===0?"rotate("+r+")translate("+(i(t.y)+5)+",0)":"rotate("+r+")translate("+(i(t.y)+f+5)+",0)rotate("+u+")")})}})}function o(r){return ct.reset(),r.each(function(r){var h,nt,o,tt;u=d3.select(this);p=n.utils.availableWidth(k,u,t);w=n.utils.availableHeight(d,u,t);rt=Math.min(p,w)/2;i.range([0,rt]);h=u.select("g.nvd3.nv-wrap.nv-sunburst");h[0][0]?h.attr("transform","translate("+(p/2+t.left+t.right)+","+(w/2+t.top+t.bottom)+")"):h=u.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+a).attr("transform","translate("+(p/2+t.left+t.right)+","+(w/2+t.top+t.bottom)+")");u.on("click",function(n,t){e.chartClick({data:n,index:t,pos:d3.event,id:a})});et.value(ft[l]||ft.count);nt=et.nodes(r[0]).reverse();pt(nt);o=h.selectAll(".arc-container").data(nt,s);tt=o.enter().append("g").attr("class","arc-container");tt.append("path").attr("d",b).style("fill",function(n){return n.color?n.color:it?v((n.children?n:n.parent).name):v(n.name)}).style("stroke","#FFF").on("click",function(n,t){ht(n);e.elementClick({data:n,index:t})}).on("mouseover",function(n){d3.select(this).classed("hover",!0).style("opacity",.8);e.elementMouseover({data:n,color:d3.select(this).style("fill"),percent:lt(n)})}).on("mouseout",function(n){d3.select(this).classed("hover",!1).style("opacity",1);e.elementMouseout({data:n})}).on("mousemove",function(n){e.elementMousemove({data:n})});o.each(function(){d3.select(this).select("path").transition().duration(f).attrTween("d",vt)});g&&(o.selectAll("text").remove(),o.append("text").text(function(n){return y(n)}).transition().duration(f).attr("opacity",function(n){return st(n)?1:0}).attr("transform",function(n){var u=this.getBBox().width,t,r;return n.depth===0?"rotate(0)translate("+u/-2+",0)":(t=ut(n),r=ot(n),r===0?"rotate("+t+")translate("+(i(n.y)+5)+",0)":"rotate("+t+")translate("+(i(n.y)+u+5)+",0)rotate("+r+")")}));ht(nt[nt.length-1]);o.exit().transition().duration(f).attr("opacity",0).each("end",function(n){var t=s(n);c[t]=undefined}).remove()}),ct.renderEnd("sunburst immediate"),o}var t={top:0,right:0,bottom:0,left:0},k=600,d=600,l="count",ft={count:function(){return 1},value:function(n){return n.value||n.size},size:function(n){return n.value||n.size}},a=Math.floor(Math.random()*1e4),u=null,v=n.utils.defaultColor(),g=!1,y=function(n){return l==="count"?n.name+" #"+n.value:n.name+" "+(n.value||n.size)},nt=.02,tt=function(n,t){return n.name>t.name},s=function(n){return n.name},it=!0,f=500,e=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),r=d3.scale.linear().range([0,2*Math.PI]),i=d3.scale.sqrt(),et=d3.layout.partition().sort(tt),h,p,w,rt,c={},b=d3.svg.arc().startAngle(function(n){return Math.max(0,Math.min(2*Math.PI,r(n.x)))}).endAngle(function(n){return Math.max(0,Math.min(2*Math.PI,r(n.x+n.dx)))}).innerRadius(function(n){return Math.max(0,i(n.y))}).outerRadius(function(n){return Math.max(0,i(n.y+n.dy))}),ct=n.utils.renderWatch(e);return o.dispatch=e,o.options=n.utils.optionsFunc.bind(o),o._options=Object.create({},{width:{get:function(){return k},set:function(n){k=n}},height:{get:function(){return d},set:function(n){d=n}},mode:{get:function(){return l},set:function(n){l=n}},id:{get:function(){return a},set:function(n){a=n}},duration:{get:function(){return f},set:function(n){f=n}},groupColorByParent:{get:function(){return it},set:function(n){it=!!n}},showLabels:{get:function(){return g},set:function(n){g=!!n}},labelFormat:{get:function(){return y},set:function(n){y=n}},labelThreshold:{get:function(){return nt},set:function(n){nt=n}},sort:{get:function(){return tt},set:function(n){tt=n}},key:{get:function(){return s},set:function(n){s=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!=undefined?n.top:t.top;t.right=n.right!=undefined?n.right:t.right;t.bottom=n.bottom!=undefined?n.bottom:t.bottom;t.left=n.left!=undefined?n.left:t.left}},color:{get:function(){return v},set:function(t){v=n.utils.getColor(t)}}}),n.utils.initOptions(o),o};n.models.sunburstChart=function(){"use strict";function t(f){return e.reset(),e.models(r),f.each(function(f){var e=d3.select(this),o,s;if(n.utils.initSVG(e),o=n.utils.availableWidth(a,e,i),s=n.utils.availableHeight(v,e,i),t.update=function(){u===0?e.call(t):e.transition().duration(u).call(t)},t.container=e,f&&f.length)e.selectAll(".nv-noData").remove();else return n.utils.noData(t,e),t;r.width(o).height(s).margin(i);e.call(r)}),e.renderEnd("sunburstChart immediate"),t}var r=n.models.sunburst(),f=n.models.tooltip(),i={top:30,right:20,bottom:20,left:20},a=null,v=null,o=n.utils.defaultColor(),s=!1,y=Math.round(Math.random()*1e5),h=null,c=null,u=250,l=d3.dispatch("stateChange","changeState","renderEnd"),e=n.utils.renderWatch(l);f.duration(0).headerEnabled(!1).valueFormatter(function(n){return n});r.dispatch.on("elementMouseover.tooltip",function(n){n.series={key:n.data.name,value:n.data.value||n.data.size,color:n.color,percent:n.percent};s||(delete n.percent,delete n.series.percent);f.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(){f.hidden(!0)});r.dispatch.on("elementMousemove.tooltip",function(){f()});return t.dispatch=l,t.sunburst=r,t.tooltip=f,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{noData:{get:function(){return c},set:function(n){c=n}},defaultState:{get:function(){return h},set:function(n){h=n}},showTooltipPercent:{get:function(){return s},set:function(n){s=n}},color:{get:function(){return o},set:function(n){o=n;r.color(o)}},duration:{get:function(){return u},set:function(n){u=n;e.reset(u);r.duration(u)}},margin:{get:function(){return i},set:function(n){i.top=n.top!==undefined?n.top:i.top;i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left;r.margin(i)}}}),n.utils.inheritOptions(t,r),n.utils.initOptions(t),t};n.version="1.8.5"})();
//# sourceMappingURL=nv.d3.min.js.map
